(this["webpackJsonparabic-club"]=this["webpackJsonparabic-club"]||[]).push([[0],{41:function(e,t,a){},44:function(e,t,a){e.exports=a(84)},49:function(e,t,a){},50:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),o=a(22),l=a.n(o),s=(a(49),a(2)),c=a(7),u=a(4),d=a(3),m=a(1),p=(a(50),a(10)),f=a(8),h=a(18),v={mainApp:void 0},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MAIN_APP":return Object(f.a)(Object(f.a)({},e),{},{mainApp:t.payload});default:return e}};!function(e){e.ROLE_ADMIN="ROLE_ADMIN",e.ROLE_USER="ROLE_USER"}(n||(n={}));var b=function e(){Object(m.a)(this,e),this.id=void 0,this.createdDate=void 0,this.modifiedDate=void 0,this.nulledFields=void 0},E=1,y=function(){var e=new String((new Date).getUTCMilliseconds()).toString();return++E+"-"+e};function C(e){if(""==e||null==e)return"0";var t=new String(e).includes("."),a=new String(e).startsWith("-");a&&(e=new String(e).replace("-",""));var n=t?parseInt(new String(e).split(".")[0]):parseInt(e),r=Math.abs(n).toString(),i="";if(r.length>3){for(var o=0,l=r.length-1;l>0;l--)o++,i=r[l]+i,3==o&&(i="."+i,o=0);i=r[0]+i}else i=e;return n<0?n:(t&&(i+=","+new String(e).split(".")[1]),a&&(i="-"+i),i)}var N=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).code=y(),e.name=void 0,e.description=void 0,e.url=void 0,e.pathVariables=void 0,e.iconUrl=void 0,e.color=void 0,e.fontColor=void 0,e.role=[],e.active=!1,e.menuClass="fas fa-folder",e.authenticated=!1,e.showSidebar=!1,e.subMenus=void 0,e.userAuthorized=function(t){if(0==e.role.length)return!0;if(!t)return!1;for(var a=0;a<e.role.length;a++){var n=e.role[a];if(t.role==n)return!0}return!1},e}return a}(b);N.defaultMenuIconClassName="fas fa-folder",N.getIconClassName=function(e){return void 0==e.menuClass?N.defaultMenuIconClassName:e.menuClass};var w=function(){for(var e=[],t=0;t<O.length;t++){var a=O[t],n=Object.assign(new N,a),r=[];if(a.subMenus){for(var i=0;i<a.subMenus.length;i++){var o=a.subMenus[i];r.push(Object.assign(new N,o))}n.subMenus=r}e.push(n)}return e},O=[{code:"home",name:"Home",url:"/home",menuClass:"fa fa-home",active:!1,authenticated:!1,showSidebar:!1,role:[]},{code:"dashboard",name:"Dashboard",url:"/dashboard",menuClass:"fas fa-tachometer-alt",active:!1,authenticated:!0,showSidebar:!0,role:[n.ROLE_ADMIN,n.ROLE_USER],subMenus:[{code:"dashboard_quiz_history",name:"Quiz History",url:"quizhistory",menuClass:"fas fa-history",role:[n.ROLE_ADMIN,n.ROLE_USER]}]},{code:"public_quiz",name:"Quiz",url:"/quiz",menuClass:"fas fa-book",active:!1,authenticated:!0,showSidebar:!1,subMenus:[],role:[n.ROLE_ADMIN,n.ROLE_USER]},{code:"quiz_management",name:"Quiz Management",url:"/quizmanagement",menuClass:"fas fa-chalkboard",active:!1,authenticated:!0,showSidebar:!0,role:[n.ROLE_ADMIN],subMenus:[{code:"quiz_management_form",name:"Quiz Form",url:"form",menuClass:"fas fa-keyboard",role:[]}]},{code:"management",name:"Master Data",url:"/management",menuClass:"fa fa-database",active:!1,authenticated:!0,showSidebar:!0,role:[n.ROLE_ADMIN]},{code:"settings",name:"Setting",url:"/settings",menuClass:"fas fa-cogs",active:!1,authenticated:!0,showSidebar:!0,role:[n.ROLE_ADMIN,n.ROLE_USER],subMenus:[{code:"user_profile",name:"Profile",menuClass:"fas fa-user-cog",url:"user-profile",role:[n.ROLE_ADMIN,n.ROLE_USER]},{code:"app_profile",name:"Application Setting",menuClass:"fas fa-cog",url:"app-profile",role:[n.ROLE_ADMIN]}]}],S={loginKey:null,loginStatus:!1,loginFailed:!1,menus:w(),loggedUser:null,loginAttempt:!1,requestId:null,applicationProfile:{},assetsPath:""},j=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,n=arguments.length>1?arguments[1]:void 0,r={};switch(n.type){case"SET_REQUEST_ID":return console.debug("USER REDUCER:REQUEST_ID",n.payload.requestId),r=Object(f.a)(Object(f.a)({},a),{},{requestId:n.payload.requestId,masterHealthCenter:null!==(e=n.payload.masterHealthCenter)&&void 0!==e?e:{},applicationProfile:null!==(t=n.payload.applicationProfile)&&void 0!==t?t:{},assetsPath:n.payload.applicationProfile.assetsPath}),1==n.payload.loginStatus?(r.loggedUser=n.payload.user,r.loginStatus=!0):(r.loginStatus=!1,r.loggedUser=null),console.debug("result"),console.debug("action.payload.requestId: ",n.payload.requestId),console.debug("REQUEST_ID result.loginStatus:",r.loginStatus),n.payload.referer.refresh(),r;case"do_login":return r=Object(f.a)(Object(f.a)({},a),{},{loginAttempt:!0,loginStatus:n.payload.loginStatus,loginKey:n.payload.loginKey,loginFailed:0==n.payload.loginStatus,loggedUser:n.payload.loggedUser});case"do_logout":return r=Object(f.a)(Object(f.a)({},a),{},{loginStatus:!1,loggedUser:null}),me(null),r;case"refresh_login":return r=Object(f.a)(Object(f.a)({},a),{},{loginStatus:n.payload.loginStatus,loggedUser:n.payload.loggedUser,requestId:n.payload.requestId});case"get_logged_user":return r=Object(f.a)(Object(f.a)({},a),{},{loggedUser:n.payload.data});case"set_logged_user":return r=Object(f.a)(Object(f.a)({},a),{},{loggedUser:n.payload.user});case"SET_APPLICATION_PROFILE":return r=Object(f.a)(Object(f.a)({},a),{},{applicationProfile:n.payload.applicationProfile});default:return Object(f.a)({},a)}},k=function e(){Object(m.a)(this,e),this.name="",this.data=new Blob,this.dataUrl=""},D=a(30),I=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){D.post(e,a,{headers:oe()}).then((function(e){de(e);var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))},q=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){D.post(e,a,{headers:le()}).then((function(e){var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))},P=function(){function e(){Object(m.a)(this,e),this.updateProfile=function(e){var t={user:e},a=ge().concat("api/member/account/updateprofile");return I(a,t)},this.requestApplicationId=function(e,t){var a=ge()+"api/public/requestid";I(a,{}).then((function(t){if("00"==t.code){var a=t.rawAxiosResponse;de(a),console.debug("response header:",a.headers["access-token"]),e(t)}else alert("Error requesting app ID")})).catch((function(e){console.error("ERROR requestApplicationId: ",e),t()}))},this.requestApplicationIdNoAuth=function(e,t){var a=ge()+"api/public/requestid";q(a,{}).then((function(t){"00"==t.code?e(t):alert("Error requesting app ID")})).catch((function(e){console.error("ERROR requestApplicationIdNoAuth: ",e),t()}))}}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();P.instance=void 0;var T=function(){function e(){var t=this;Object(m.a)(this,e),this.categories=new Map,this.getCategories=function(e){var t=ge().concat("api/public/categories/"+e);return q(t,{})},this.getLoadedCategories=function(e){var a;return null!==(a=t.categories.get(e))&&void 0!==a?a:[]},this.setLoadedCategories=function(e,a){t.categories.set(e,a)}}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();T.instance=void 0;var A=function(){function e(){Object(m.a)(this,e),this.getLessons=function(e,t){var a=ge().concat("api/public/lessons/"+e);return q(a,t)}}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();A.instance=void 0;var L=a(15),R=function(){function e(){Object(m.a)(this,e),this.managementProperties=[],this.entityPropertyMap=new Map,this.updateApplicationProfile=function(e){var t={profile:e},a=ge().concat("api/app/setting/updateprofile");return I(a,t)}}return Object(s.a)(e,[{key:"setEntityProperty",value:function(e,t){t&&this.entityPropertyMap.set(e,t)}},{key:"getEntityProperty",value:function(e){if(void 0!=e)return this.entityPropertyMap.get(e)}},{key:"loadManagementProperties",value:function(e){var t=ge().concat("api/app/entity/managementpages");return I(t,{})}},{key:"generateReport",value:function(e){return function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){D.post(e,a,{responseType:"blob",headers:oe()}).then((function(e){de(e);var a=e.data;a.rawAxiosResponse=e,console.debug("axiosResponse.headers: ",e.headers);var n=e.headers["content-disposition"].split("filename=")[1],r=n.split("."),i=r[r.length-1],o=new Blob([a],{type:i}),l=window.URL.createObjectURL(o),s=new k;s.name=n,s.data=o,s.dataUrl=l,t(s)})).catch((function(e){console.error(e),n(e)}))}))}(ge().concat("api/app/report/records"),e)}},{key:"loadEntityProperty",value:function(e){console.debug("Load entity prop: ",e);var t={entity:e},a=ge().concat("api/app/entity/configv2");return I(a,t)}},{key:"loadEntities",value:function(e){var t=ge().concat("api/app/entity/get");return I(t,e)}},{key:"loadAllEntities",value:function(e){var t={entity:e,filter:{limit:0,page:0}},a=ge().concat("api/app/entity/get");return I(a,t)}},{key:"getById",value:function(e,t){var a={entity:e,filter:{exacts:!0,limit:1,page:0,fieldsFilter:{id:t}}},n=ge().concat("api/app/entity/get");return I(n,a)}},{key:"getBy",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n={entity:e,filter:{exacts:!0,limit:a,page:0,fieldsFilter:t}},r=ge().concat("api/app/entity/get");return I(r,n)}},{key:"delete",value:function(e,t){var a={entity:e,filter:{fieldsFilter:{id:t}}},n=ge().concat("api/app/entity/delete");return I(n,a)}},{key:"save",value:function(e,t,a){var n,r=Object(L.a)({entity:e},e,t);return n=a?ge().concat("api/app/entity/update"):ge().concat("api/app/entity/add"),I(n,r)}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();R.instance=void 0;var z=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).title="",e.description="",e.publicQuiz=!0,e.questions=[],e.duration=0,e.active=!0,e.repeatable=!0,e.available=!0,e.showAllQuestion=!0,e.questionsTimered=!1,e.image="",e.startedDate=new Date,e.submittedDate=new Date,e.mappedAnswer=void 0,e.maxQuestionNumber=void 0,e.getQuestionCount=function(){return e.questions?e.questions.length:0},e.resetCorrectChoices=function(){if(e.questions&&0!=e.getQuestionCount())for(var t=0;t<e.questions.length;t++){var a=e.questions[t];a.correctChoice=void 0,a.answerCode=void 0}},e.allQuestionHasBeenAnswered=function(){if(!e.questions||0==e.getQuestionCount())return!1;for(var t=0;t<e.questions.length;t++){if(null==e.questions[t].answerCode)return!1}return!0},e}return a}(b);z.updateMappedAnswer=function(e){e.mappedAnswer={};for(var t=0;t<e.questions.length;t++){var a,n=e.questions[t];if(n.id&&(n.answerCode||1==n.entered))e.mappedAnswer[new String(n.number).toString()]=null!==(a=n.answerCode)&&void 0!==a?a:null}};var x=void 0,M=!1,F=void 0,_=new Array,Q=new Array,U=function(e,t){return M&&x?(console.debug("SEND WEBSOCKET"),x.send(e,{},JSON.stringify(t)),!0):(console.info("Connecting"),!1)},B=function(){function e(){Object(m.a)(this,e),this.getQuiz=function(e){var t=ge().concat("api/member/quiz/get/"+e);return I(t,{})},this.submitAnswers=function(e){for(var t=Object.assign(new z,e),a=0;a<t.questions.length;a++)t.questions[a].choices=void 0;var n=ge().concat("api/member/quiz/submit");return I(n,{quiz:t})},this.getQuizList=function(e){e.orderBy="title",e.orderType="asc";var t={filter:e},a=ge().concat("api/member/quiz/list");return I(a,t)},this.getHistories=function(e){var t={filter:e},a=ge().concat("api/member/quiz/history");return I(a,t)},this.sendUpdateStart=function(e,t){var a=Object.assign(new z,e);a.questions=[],U("/app/quiz/start",{quizHistory:{quiz:a,token:ue(),requestId:t}})},this.sendUpdateAnswer=function(e,t){var a=Object.assign(new z,e);try{z.updateMappedAnswer(a),a.questions=[];var n={updated:new Date,requestId:t,quiz:a,token:ue()};U("/app/quiz/answer",{quizHistory:n})}catch(r){console.error(r)}}}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();B.instance=void 0;var Y=function(){function e(){Object(m.a)(this,e),this.getQuizList=function(e){var t=ge().concat("api/app/quiz/list");return I(t,{filter:e})},this.submit=function(e){var t=ge().concat("api/app/quiz/submit");return I(t,{quiz:e})},this.getQuiz=function(e){var t=ge().concat("api/app/quiz/getquiz/"+e);return I(t,{})},this.deleteQuiz=function(e){var t=ge().concat("api/app/quiz/deletequiz/"+e);return I(t,{})}}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();Y.instance=void 0;var W=function(){function e(){Object(m.a)(this,e),this.getPictures=function(e){var t=ge().concat("api/public/gallery/pictures");return q(t,{filter:e})},this.getVideos=function(e){var t=ge().concat("api/public/gallery/videos");return q(t,{filter:e})}}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();W.instance=void 0;var H={services:{userService:P.getInstance(),categoriesService:T.getInstance(),lessonService:A.getInstance(),masterDataService:R.getInstance(),publicQuizService:B.getInstance(),quizService:Y.getInstance(),galleryService:W.getInstance()}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;return e},X=Object(h.c)({appState:g,userState:j,servicesState:V}),G={appState:v,userState:S,servicesState:H},K=a(30),J=function(e){return function(t){return function(a){if(!a.meta||"do_login"!==a.meta.type)return t(a);var n=a.meta.app;K.post(a.meta.url,{},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){var n=t.data,r="",i=!1;null!=n.code&&"00"==n.code&&(r=t.headers["access-token"],console.log("api_token: ",r),i=!0);var o=Object.assign({},a,{payload:{loginStatus:i,loginKey:r,loggedUser:n.user}});de(t),delete o.meta,e.dispatch(o)})).catch(console.log).finally((function(){n.endLoading()}))}}},Z=function(e){return function(t){return function(a){if(!a.meta||"get_logged_user"!==a.meta.type)return t(a);var n=oe();K.post(a.meta.url,a.payload,{headers:n}).then((function(t){var n=t.data;if(n){var r=Object.assign({},a,{payload:{data:n}});delete r.meta,e.dispatch(r)}else alert("Error performing request")})).catch(console.log).finally((function(e){a.meta.app.endLoading(),a.meta.app.refresh()}))}}},$=function(e){return function(t){return function(a){if(!a.meta||"do_logout"!==a.meta.type)return t(a);var n=a.meta.app;K.post(a.meta.url,a.payload,{headers:oe()}).then((function(t){var n=!1;"00"==t.data.code?n=!0:alert("Logout Failed");var r=Object.assign({},a,{payload:{loginStatus:!n}});delete r.meta,e.dispatch(r)})).catch(console.log).finally((function(e){return n.endLoading()}))}}},ee=function(e){return function(t){return function(a){if(!a.meta||"set_logged_user"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},te=function(e){return function(t){return function(a){if(!a.meta||"GET_MESSAGE"!==a.meta.type)return t(a);fetch(a.meta.url,{method:"post",body:JSON.stringify(a.payload),headers:oe()}).then((function(e){return e.json()})).then((function(t){console.debug("sendChatMessageMiddleware Response:",t);var n=Object.assign({},a,{payload:t});delete n.meta,e.dispatch(n)})).catch((function(e){return console.log(e)})).finally((function(e){return a.meta.app.endLoading()}))}}},ae=function(e){return function(t){return function(a){if(!a.meta||"store_message"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},ne=null,re=function(){return ne},ie=function(){return ne=Object(h.d)(X,G,Object(h.a)(J,$,Z,ee,ae,te))},oe=function(){return{"Content-Type":"application/json",requestId:ce(),Authorization:"Bearer "+ue()}},le=function(){return{"Content-Type":"application/json",requestId:ce()}},se="arabic-club-login-key",ce=function(){var e=re();return null==e?"":e.getState().userState.requestId},ue=function(){return fe(se)},de=function(e){if(e&&e.headers&&e.headers["access-token"]){var t=e.headers["access-token"];pe(se,t)}},me=function(e){pe(se,e)},pe=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},fe=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},he="${contextPath}"==document.getElementById("rootPath").value||""==document.getElementById("rootPath").value,ve=he?"/universal-good-shop/":document.getElementById("rootPath").value+"/",ge=function(){var e=he?"http://localhost:8080".concat(ve):ve;return e},be=function(){return function(){var e=re();return null==e?"":e.getState().userState.assetsPath}()+"images/"},Ee=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).username=void 0,e.displayName=void 0,e.editPassword=void 0,e.profileImage=void 0,e.role=void 0,e.requestId=void 0,e}return a}(b),ye=ge(),Ce=ye+"api/member/account/",Ne=function(e){return e.startLoading(),{type:"do_logout",payload:{},meta:{app:e,type:"do_logout",url:Ce.concat("logout")}}},we=a(5),Oe=function(e){return{applicationProfile:e.userState.applicationProfile,loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,requestId:e.userState.requestId,services:e.servicesState.services,mainApp:e.appState.mainApp}};a(73);function Se(e){return e.realtime?i.a.createElement("div",{className:"row container-fluid bg-light",style:{margin:0,position:"fixed",zIndex:100}},i.a.createElement("div",{className:"col-1"},i.a.createElement("span",{style:{marginBottom:"3px"},className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})),i.a.createElement("div",{className:"col-11 progress",style:{padding:0,marginTop:"7px",height:"10px"}},i.a.createElement("div",{className:"bg-primary",style:{width:e.progress+"%",transitionDuration:"50ms",margin:0}}))):i.a.createElement("button",{className:"btn btn-dark ",type:"button",disabled:!0},i.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),i.a.createElement("span",{className:" "},"Loading..."))}var je=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={timer:130,intervalId:0},n.update=function(){n.state.timer<0&&clearInterval(n.state.intervalId),console.log("tick"),n.setState({timer:n.state.timer-1}),n.state.timer<0&&n.props.endMessage&&n.props.endMessage()},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(1==this.props.withTimer){var e=setInterval(this.update,1,null);this.setState({intervalId:e})}}},{key:"render",value:function(){var e="message message-"+this.props.type;return 1==this.props.realtime?i.a.createElement(Se,{progress:this.props.progress,realtime:this.props.realtime}):i.a.createElement("div",{className:e},i.a.createElement(Se,{progress:this.props.progress,realtime:this.props.realtime}))}}]),a}(r.Component);function ke(e){return i.a.createElement("div",{className:"modal-backdrop",style:{backgroundColor:"rgba(100,100,100,0.7)"}})}function De(e){return i.a.createElement("div",{className:"modal-footer "+e.className},i.a.createElement("button",{ref:e.yesButtonRef,type:"button",onClick:e.onYes,className:"btn btn-outline-primary"},"Yes"),e.yesOnly?null:i.a.createElement("button",{ref:e.noButtonRef,type:"button",onClick:e.onNo,className:"btn btn-outline-secondary"},"No"))}function Ie(e){return i.a.createElement("div",{className:"modal-header "+e.className},i.a.createElement("h5",{className:"modal-title "+e.fontClassName,id:"exampleModalCenterTitle"},e.title),i.a.createElement("button",{onClick:e.onClose,type:"button",className:"close"},i.a.createElement("span",{"aria-hidden":"true",className:e.fontClassName},i.a.createElement("i",{className:"fas fa-times"}))))}var qe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).yesButtonRef=i.a.createRef(),n.noButtonRef=i.a.createRef(),n.onYes=function(e){n.props.onYes&&n.props.onYes(e)},n.onNo=function(e){n.props.onNo&&n.props.onNo(e)},n.onClose=function(e){n.props.onClose&&n.props.onClose(e)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=1==this.props.isError;!e&&this.yesButtonRef.current?this.yesButtonRef.current.focus():e&&this.noButtonRef.current?this.noButtonRef.current.focus():e&&this.yesButtonRef.current&&this.yesButtonRef.current.focus()}},{key:"render",value:function(){var e=this.props.title?this.props.title:"Info",t=1==this.props.yesOnly,a=1==this.props.isError?"bg-danger":"bg-info";return i.a.createElement(i.a.Fragment,null,i.a.createElement(ke,null),i.a.createElement("div",{className:"modal fade show",style:{display:"block"},id:"exampleModalCenter",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},i.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},i.a.createElement("div",{className:"modal-content"},i.a.createElement(Ie,{fontClassName:"text-light",className:a,title:e,onClose:this.onClose}),i.a.createElement("div",{className:"modal-body"}," ",this.props.children),i.a.createElement(De,{noButtonRef:this.noButtonRef,yesButtonRef:this.yesButtonRef,yesOnly:t,onYes:this.onYes,onNo:this.onNo})))))}}]),a}(r.Component),Pe=function(e){return document.getElementById(e)};var Te=function(e){return new Promise((function(t,a){try{var n=new FileReader;n.readAsDataURL(e.files[0]),console.debug("fileInput.files[0]: ",e.files[0]),n.onload=function(){t(new String(n.result).toString())},n.onerror=function(e){a(e)}}catch(r){a(r)}}))};var Ae,Le=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).name=void 0,e.appCode=void 0,e.shortDescription=void 0,e.about=void 0,e.welcomingMessage=void 0,e.address=void 0,e.contact=void 0,e.website=void 0,e.iconUrl=void 0,e.pageIcon=void 0,e.backgroundUrl=void 0,e.footerIconClass=void 0,e.color=void 0,e.fontColor=void 0,e}return a}(b),Re=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(m.a)(this,a),(r=t.call(this,e)).parentApp=void 0,r.authenticated=!0,r.state={updated:new Date},r.validateLoginStatus=function(){0!=r.authenticated&&r.isLoggedUserNull()&&r.backToLogin()},r.sendWebSocket=function(e,t){U(e,t)},r.setWsUpdateHandler=function(e){r.parentApp&&r.parentApp.setWsUpdateHandler(e)},r.resetWsUpdateHandler=function(){r.parentApp&&r.parentApp.resetWsUpdateHandler()},r.isAdmin=function(){var e=r.getLoggedUser();return!!e&&e.role==n.ROLE_ADMIN},r.showCommonErrorAlert=function(e){var t;console.error(e),t=e.response&&e.response.data?e.response.data.message:e,r.showError("Operation Failed: "+t)},r.getServices=function(){return r.props.services},r.authenticated=i,r.state=Object(f.a)({},r.state),r.parentApp=r.props.mainApp,r}return Object(s.a)(a,[{key:"getApplicationProfile",value:function(){return null==this.props.applicationProfile?new Le:this.props.applicationProfile}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"==t.type?t.checked:t.value;this.setState(Object(L.a)({},t.name,a)),console.debug("input changed: ",t.name,a)}},{key:"focusToActiveField",value:function(){if(null!=this.state.activeId&&null!=Pe(this.state.activeId)){var e=Pe(this.state.activeId);null!=e&&e.focus()}}},{key:"startLoading",value:function(e){this.parentApp.startLoading(e)}},{key:"endLoading",value:function(){this.parentApp.endLoading()}},{key:"doAjax",value:function(e,t,a,n){var r=this;this.startLoading(t);for(var i=arguments.length,o=new Array(i>4?i-4:0),l=4;l<i;l++)o[l-4]=arguments[l];e.apply(void 0,o).then((function(e){a&&a(e)})).catch((function(e){n?n(e):("string"==typeof e&&alert("Operation Failed: "+e),alert("resource not found"))})).finally((function(){r.endLoading()}))}},{key:"commonAjax",value:function(e,t,a){for(var n=arguments.length,r=new Array(n>3?n-3:0),i=3;i<n;i++)r[i-3]=arguments[i];this.doAjax.apply(this,[e,!1,t,a].concat(r))}},{key:"commonAjaxWithProgress",value:function(e,t,a){for(var n=arguments.length,r=new Array(n>3?n-3:0),i=3;i<n;i++)r[i-3]=arguments[i];this.doAjax.apply(this,[e,!0,t,a].concat(r))}},{key:"getLoggedUser",value:function(){var e=this.props.loggedUser;if(e)return e.editPassword="^_^",Object.assign(new Ee,e)}},{key:"isLoggedUserNull",value:function(){return 0==this.props.loginStatus||null==this.props.loggedUser}},{key:"isUserLoggedIn",value:function(){return 1==this.props.loginStatus&&null!=this.props.loggedUser}},{key:"showConfirmation",value:function(e){var t=this;return new Promise((function(a,n){t.parentApp.showAlert("Confirmation",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))}},{key:"showConfirmationDanger",value:function(e){var t=this;return new Promise((function(a,n){t.parentApp.showAlertError("Confirmation",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))}},{key:"showInfo",value:function(e){this.parentApp.showAlert("Info",e,!0,(function(){}))}},{key:"showError",value:function(e){this.parentApp.showAlertError("Error",e,!0,(function(){}))}},{key:"backToLogin",value:function(){this.authenticated&&null!=this.props.history&&this.props.history.push("/login")}},{key:"refresh",value:function(){this.setState({updated:new Date})}},{key:"componentDidMount",value:function(){this.validateLoginStatus()}},{key:"componentDidUpdate",value:function(){1==this.authenticated&&this.isLoggedUserNull()&&(console.debug(typeof this,"BACK TO LOGIN"),this.validateLoginStatus())}}]),a}(r.Component),ze=a(6),xe=(a(74),function e(){Object(m.a)(this,e),this.showNavLinks=!1}),Me=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state=new xe,n.buttonToggleNavRef=i.a.createRef(),n.toggleNavLinks=function(){n.setState({showNavLinks:!n.state.showNavLinks})},n.onLogout=function(e){var t=Object(c.a)(n);t.showConfirmation("Logout?").then((function(e){e&&t.props.performLogout(t.parentApp)}))},n.setMenu=function(e){n.state.showNavLinks&&n.buttonToggleNavRef.current&&n.buttonToggleNavRef.current.click(),n.props.setMenu(e)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state.showNavLinks,a=w(),n=this.getLoggedUser();return i.a.createElement("div",{className:"bg-dark container-fluid",style:{position:"fixed",zIndex:55,padding:0,margin:0}},i.a.createElement(Fe,{label:this.getApplicationProfile().name}),i.a.createElement("nav",{id:"navbar",className:"navbar navbar-expand-lg navbar-dark bg-dark",style:{width:"100%"}},i.a.createElement("a",{id:"navbar-brand",className:"navbar-brand",href:"#"},this.getApplicationProfile().name),i.a.createElement("button",{ref:this.buttonToggleNavRef,onClick:this.toggleNavLinks,className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarToggler","aria-controls":"navbarToggler","aria-expanded":"false","aria-label":"Toggle navigation"},i.a.createElement("i",{className:t?"fas fa-times":"fas fa-bars"})),i.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarToggler"},i.a.createElement("ul",{id:"navbar-top",className:"navbar-nav mr-auto mt-2 mt-lg-0"},a.map((function(t){if(null==t||t.authenticated&&!n)return null;if(t.userAuthorized&&0==t.userAuthorized(n))return null;var a=e.props.activeMenuCode==t.code;return i.a.createElement("li",{key:"header-menu-"+new String(t.code),className:"nav-item "+(a?"active nav-active":"nav-inactive")},i.a.createElement(ze.b,{onClick:function(){return e.setMenu(t)},className:"nav-link  ",to:t.url},i.a.createElement("span",null,t.name)))}))),i.a.createElement("form",{className:"form-inline my-2 my-lg-0"},i.a.createElement(_e,{setMenuNull:this.props.setMenuNull,onLogout:this.onLogout,user:n})))))}}]),a}(Re),Fe=function(e){return i.a.createElement("div",{id:"navbar-brand-top",style:{paddingLeft:"0.5rem"},className:"container-fluid"},i.a.createElement("a",{style:{fontSize:"15px"},className:"text-white navbar-brand",href:"#"},i.a.createElement("strong",null,e.label)))},_e=function(e){return e.user?i.a.createElement(r.Fragment,null,i.a.createElement(ze.b,{onClick:e.setMenuNull,style:{marginRight:"5px"},className:"btn btn-light btn-sm my-2 my-sm-0",to:"/settings/user-profile"},i.a.createElement("img",{width:"20",src:be()+e.user.profileImage,className:"rounded rounded-circle"}),"\xa0",e.user.displayName),i.a.createElement("a",{style:{marginRight:"5px"},className:"btn btn-danger btn-sm  my-2 my-sm-0",onClick:e.onLogout},i.a.createElement("i",{className:"fas fa-sign-out-alt"}),"\xa0Logout")):i.a.createElement(ze.b,{style:{marginRight:"5px"},onClick:e.setMenuNull,className:"btn btn-sm btn-info my-2 my-sm-0",to:"/login"}," ",i.a.createElement("i",{className:"fas fa-sign-in-alt"}),"\xa0Login")},Qe=Object(p.f)(Object(we.b)(Oe,(function(e){return{performLogout:function(t){return e(Ne(t))}}}))(Me)),Ue=(a(76),a(77),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){for(var e=new Array,t=0;t<=11;t++)e.push(i.a.createElement("div",{key:"spinner-item-"+t}));return i.a.createElement("div",{style:{width:"85px",height:"85px",display:"block"},className:"container-fluid text-center"},i.a.createElement("div",{style:{visibility:0==this.props.show?"hidden":"visible"},className:"lds-spinner"},e))}}]),a}(r.Component)),Be=function e(){Object(m.a)(this,e),this.loading=!1,this.username="",this.editPassword=""},Ye=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state=new Be,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.updateCredentialProperty=function(e){var t=e.target,a=t.getAttribute("name");null!=a&&n.setState(Object(L.a)({},a,t.value))},n}return Object(s.a)(a,[{key:"login",value:function(e){e.preventDefault(),this.props.performLogin(this.state.username,this.state.editPassword,this)}},{key:"componentDidMount",value:function(){document.title="Login",this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"componentDidUpdate",value:function(){console.debug("Login update"),console.debug("logged in : ",this.props.loginStatus),console.debug("logged user : ",this.getLoggedUser()),this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"LoginForm",className:"login-wrapper",style:{margin:0,padding:0}},i.a.createElement("div",{className:"text-center",style:{marginTop:"25px"}},i.a.createElement("svg",{className:"x-app-icon ",width:"200",height:"200"},i.a.createElement("circle",{className:"path-circle",fill:"white",cx:"100",cy:"100",r:"95",strokeWidth:3,stroke:"rgb(9,26,78)"}),i.a.createElement("path",{className:"path",d:"M 55 145 L 70 145 C 90 120, 110 115 140 102\r M 140 102 L 145 83 Q 125 85, 100 100 \r Q 80 98, 70 90 Q 68 85 72 80 Q 100 70, 125 73\r Q 86 35, 57 80 Q 48 110, 77 118\r Q 63 130 ,55 145\r ",strokeWidth:3,stroke:"rgb(9,26,78)",fill:"transparent"}))),i.a.createElement("form",{name:"login",onSubmit:function(t){e.login(t)},method:"POST",className:"form-signin text-center"},i.a.createElement(He,{value:this.state.username,onChange:this.updateCredentialProperty}),i.a.createElement("p",null),i.a.createElement(We,{value:this.state.editPassword,onChange:this.updateCredentialProperty}),i.a.createElement("p",null),this.state.loading?i.a.createElement(Ue,null):i.a.createElement("button",{className:"btn text-light",style:{backgroundColor:"rgb(9,26,78)"},type:"submit"},"Sign in"),i.a.createElement("input",{name:"transport_type",type:"hidden",value:"rest"}),i.a.createElement("p",null)))}}]),a}(Re),We=function(e){var t=e.value,a=e.onChange;return i.a.createElement(r.Fragment,null,i.a.createElement("label",{className:"sr-only"},"Password"),i.a.createElement("input",{style:{borderColor:"rgb(9,26,78)"},name:"editPassword",value:t,onChange:a,type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0}))},He=function(e){var t=e.value,a=e.onChange;return i.a.createElement(r.Fragment,null,i.a.createElement("label",{className:"sr-only"},"Username"),i.a.createElement("input",{style:{borderColor:"rgb(9,26,78)"},name:"username",value:t,onChange:a,type:"text",id:"username",className:"form-control",placeholder:"Username",required:!0,autoFocus:!0}))},Ve=Object(p.f)(Object(we.b)(Oe,(function(e){return{performLogin:function(t,a,n){return e(function(e,t,a){return a.startLoading(),{type:"do_login",payload:{},meta:{type:"do_login",url:ge().concat("login?username="+e+"&password="+t+"&transport_type=rest"),app:a}}}(t,a,n))}}}))(Ye)),Xe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(m.a)(this,a),(r=t.call(this,e,i)).title="",r.title=n,r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.authenticated&&this.validateLoginStatus(),document.title=this.title}}]),a}(Re),Ge=(a(78),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,"Dashboard",!0)}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this.getLoggedUser();return t?i.a.createElement("div",{id:"DashboardMain",className:"section-body container-fluid"},i.a.createElement("h2",null,"Dashboard"),i.a.createElement("div",{className:"alert alert-info"},"Welcome, ",i.a.createElement("strong",null,t.displayName,"  "),i.a.createElement("p",null),i.a.createElement("p",{className:"badge badge-dark"},null===(e=t.role)||void 0===e?void 0:e.toLowerCase().split("_")[1]))):null}}]),a}(Xe)),Ke=Object(p.f)(Object(we.b)(Oe)(Ge)),Je=a(12),Ze=a(9),$e=a(23),et=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.className)&&void 0!==e?e:"btn btn-outline-secondary";return i.a.createElement("a",Object.assign({style:this.props.style},this.props.attributes,{onClick:this.props.onClick,className:t}),this.props.iconClassName?i.a.createElement("span",{style:this.props.children?{marginRight:"5px"}:{}},i.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children)}}]),a}(r.Component),tt=function e(){Object(m.a)(this,e),this.show=!0},at=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=new tt,n.hideModal=function(){n.setState({show:!1})},n.showModal=function(){n.setState({show:!0})},n}return Object(s.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.title)&&void 0!==e?e:"Title";if(1==this.props.toggleable&&0==this.state.show)return i.a.createElement(et,{style:{marginBottom:"10px"},onClick:this.showModal,iconClassName:"fas fa-angle-down"},"Show ",t);var a=function(e){e.style,e.show,e.footerContent,e.toggleable;return Object($e.a)(e,["style","show","footerContent","toggleable"])}(this.props);return i.a.createElement("div",Object.assign({},a,{className:"modal-content ",style:Object(f.a)(Object(f.a)({},a.style),{},{marginBottom:"10px"})}),i.a.createElement("div",{className:"modal-header"},i.a.createElement("h5",{className:"modal-title"},t),this.props.toggleable?i.a.createElement("button",{type:"button",className:"btn btn-sm",onClick:this.hideModal,"aria-label":"Close"},i.a.createElement("span",{"aria-hidden":"true"},i.a.createElement("i",{className:"fas fa-times"}))):null),i.a.createElement("div",{className:"modal-body"},this.props.children),this.props.footerContent||1==this.props.showFooter?i.a.createElement("div",{className:"modal-footer"},this.props.footerContent):null)}}]),a}(r.Component),nt=function e(){Object(m.a)(this,e),this.limit=5,this.page=0,this.orderType=void 0,this.orderBy=void 0,this.contains=void 0,this.exacts=void 0,this.day=void 0,this.year=void 0,this.month=void 0,this.module=void 0,this.fieldsFilter=void 0,this.monthTo=void 0,this.yearTo=void 0,this.maxValue=void 0,this.availabilityCheck=void 0,this.useExistingFilterPage=!1};!function(e){e.FIELD_TYPE_TEXT="FIELD_TYPE_TEXT",e.FIELD_TYPE_IMAGE="FIELD_TYPE_IMAGE",e.FIELD_TYPE_CURRENCY="FIELD_TYPE_CURRENCY",e.FIELD_TYPE_NUMBER="FIELD_TYPE_NUMBER",e.FIELD_TYPE_HIDDEN="FIELD_TYPE_HIDDEN",e.FIELD_TYPE_COLOR="FIELD_TYPE_COLOR",e.FIELD_TYPE_CHECKBOX="FIELD_TYPE_CHECKBOX",e.FIELD_TYPE_FIXED_LIST="FIELD_TYPE_FIXED_LIST",e.FIELD_TYPE_DYNAMIC_LIST="FIELD_TYPE_DYNAMIC_LIST",e.FIELD_TYPE_TEXTAREA="FIELD_TYPE_TEXTAREA",e.FIELD_TYPE_PLAIN_LIST="FIELD_TYPE_PLAIN_LIST",e.FIELD_TYPE_DATE="FIELD_TYPE_DATE",e.FIELD_TYPE_TEXTEDITOR="FIELD_TYPE_TEXTEDITOR",e.FIELD_TYPE_DATETIME="FIELD_TYPE_DATETIME"}(Ae||(Ae={}));var rt=function(){function e(){Object(m.a)(this,e),this.groupNames=void 0,this.entityName=void 0,this.alias=void 0,this.fieldNames=void 0,this.idField=void 0,this.detailFieldName=void 0,this.formInputColumn=void 0,this.editable=!0,this.creatable=!0,this.elements=new Array,this.fieldNameList=void 0,this.withProgressWhenUpdated=!1}return Object(s.a)(e,null,[{key:"getRecordId",value:function(e,t){for(var a=t.elements,n=0;n<a.length;n++){var r=a[n];if(r.identity)return e[r.id]}return null}}]),e}();rt.getEntityElement=function(e,t){for(var a=0;a<e.elements.length;a++){var n=e.elements[a];if(n.id==t)return n}},rt.getHeaderLabels=function(e){var t=new Array;if(void 0==e.elements)return t;for(var a=e.elements,n=0;n<a.length;n++){var r=a[n],i={label:r.labelName,value:r.id,isDate:"date"==r.type,filterable:r.filterable};t.push(i)}return t},rt.hasTextEditorField=function(e){for(var t=0;t<e.length;t++)if(e[t].fieldType==Ae.FIELD_TYPE_TEXTEDITOR)return!0;return!1};a(79);var it=function(){function e(){Object(m.a)(this,e)}return Object(s.a)(e,null,[{key:"parseValues",value:function(e,t){for(var a=new Array,n=t.elements,r=0;r<n.length;r++){var o=n[r],l=o.id,s=e[l];if(null!=s){switch(o.fieldType){case Ae.FIELD_TYPE_DATE:s=new Date(s).toDateString();break;case Ae.FIELD_TYPE_DATETIME:s=new Date(s).toLocaleString();break;case Ae.FIELD_TYPE_IMAGE:var c=new String(s).split("~")[0];s=i.a.createElement("img",{src:be()+c,width:"50",height:"50"});break;case Ae.FIELD_TYPE_COLOR:s=i.a.createElement("strong",{style:{color:s}},s);break;case Ae.FIELD_TYPE_NUMBER:s=C(s);break;case Ae.FIELD_TYPE_TEXTEDITOR:s=i.a.createElement("div",{dangerouslySetInnerHTML:{__html:new String(s).length>100?new String(s).substring(0,100)+"...":s}});break;case Ae.FIELD_TYPE_CHECKBOX:s=1==s?i.a.createElement("i",null,"true"):i.a.createElement("i",null,"false");break;case Ae.FIELD_TYPE_FIXED_LIST:case Ae.FIELD_TYPE_DYNAMIC_LIST:default:var u;if(o.optionItemName&&""!=o.optionItemName)s=e[l][null!==(u=o.optionItemName)&&void 0!==u?u:"id"];else s=e[l]}a.push(s)}else a.push(s)}return a}}]),e}(),ot=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=lt(this.props.limit,this.props.totalData,this.props.activePage);if(0==t.length)return null;var a=t[t.length-1],n=this.props.activePage+1>=a?0:this.props.activePage+1,r=this.props.activePage-1<0?a-1:this.props.activePage-1;return i.a.createElement("div",null,i.a.createElement("nav",{"aria-label":"Page navigation example"},i.a.createElement("ul",{className:"pagination"},i.a.createElement("li",{className:"page-item"},i.a.createElement("a",{className:"page-link",onClick:function(t){return e.props.onClick(r)}},"Previous")),t.map((function(t,a){return i.a.createElement("li",{key:"NAV-"+y(),className:"page-item "+(t-1==e.props.activePage?"active":"")},i.a.createElement("a",{className:"page-link ",onClick:function(a){return e.props.onClick(t-1)}},t))})),i.a.createElement("li",{className:"page-item"},i.a.createElement("a",{className:"page-link",onClick:function(t){return e.props.onClick(n)}},"Next")))))}}]),a}(r.Component),lt=function(e,t,a){var n=[],r=Math.ceil(t/e),i=a-1,o=a+3;r>1&&n.push(1);for(var l=i;l<=o;l++)l>1&&l<=r&&n.push(l);return o<r&&n.push(r),n},st=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).prepopulateForm=function(){},n.getEntityElement=function(){return n.props.entityElement},n.getRequiredAttr=function(){return{required:1==n.getEntityElement().required}},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.prepopulateForm()}}]),a}(Re),ct=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={singlePreviewData:void 0,showInputFile:!1},n.ref=i.a.createRef(),n.changeSingleImageData=function(e){var t=Object(c.a)(n);Te(e.target).then((function(e){t.setState({singlePreviewData:e})}))},n.removeImage=function(e){var t=Object(c.a)(n);n.showConfirmationDanger("Remove image?").then((function(e){e&&t.doRemoveImage()}))},n.doRemoveImage=function(){n.ref.current&&(n.ref.current.value=null),n.setState({singlePreviewData:void 0,showInputFile:!1})},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.props.recordToEdit[n.getEntityElement().id];if(e){var t=be()+e;n.setState({singlePreviewData:t,showInputFile:!0})}}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement();return i.a.createElement(i.a.Fragment,null,this.state.showInputFile?i.a.createElement("input",{ref:this.ref,onChange:this.changeSingleImageData,type:"file",accept:"image/*",className:"form-control"}):i.a.createElement(r.Fragment,null,i.a.createElement("p",null),i.a.createElement(et,{onClick:function(t){return e.setState({showInputFile:!0})},iconClassName:"fas fa-plus",className:"btn btn-info btn-sm"},"Add Image"),i.a.createElement("input",{type:"hidden",name:t.id,value:"NULLED"})),i.a.createElement("input",{value:this.state.singlePreviewData,type:"hidden",name:t.id}),i.a.createElement(ut,{imageData:this.state.singlePreviewData}),i.a.createElement(et,{show:void 0!=this.state.singlePreviewData,onClick:this.removeImage,iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove"))}}]),a}(st),ut=function(e){return 0!=e.show&&e.imageData?i.a.createElement("img",{className:"image",style:{margin:"3px"},src:e.imageData,width:"50",height:"50"}):null},dt=Object(p.f)(Object(we.b)(Oe)(ct)),mt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={previewData:new Map,inputElements:[1]},n.ref=i.a.createRef(),n.setImageData=function(e,t){var a=Object(c.a)(n);Te(e.target).then((function(e){var n=a.state.previewData;n.set(t,e),a.setState({previewData:n})}))},n.addInputElement=function(e){var t=n.state.inputElements;0==t.length?t.push(1):t.push(t[t.length-1]+1),n.setState({inputElements:t})},n.removeInputElement=function(e){var t=Object(c.a)(n);n.showConfirmationDanger("Delete image?").then((function(a){a&&t.doRemoveInputElement(e)}))},n.doRemoveInputElement=function(e){for(var t=n.state.previewData,a=n.state.inputElements,r=0;r<a.length;r++){a[r]==e&&(a.splice(r,1),t.delete(e))}n.setState({inputElements:a,previewData:t})},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.props.recordToEdit[n.getEntityElement().id];if(e&&""!=new String(e).trim()){for(var t=n.state.previewData,a=new String(e).split("~"),r=new Array,i=0;i<a.length;i++){var o=a[i];t.set(i,o),r.push(i)}n.setState({previewData:t,inputElements:r})}}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement();return i.a.createElement(i.a.Fragment,null,this.state.inputElements.map((function(a){var n=e.state.previewData.get(a),o=void 0==n||""==new String(n).trim(),l=!o&&pt(n);return i.a.createElement(r.Fragment,{key:"IMG"+a+t.id},o?i.a.createElement("input",{onChange:function(t){return e.setImageData(t,a)},type:"file",accept:"image/*",name:t.id,className:"form-control"}):null,l?i.a.createElement("div",null,i.a.createElement("input",{value:n,type:"hidden",name:t.id}),i.a.createElement(ft,{imageData:n})):o?null:i.a.createElement("div",null,i.a.createElement("input",{value:n,type:"hidden",name:t.id,className:"form-control"}),i.a.createElement(ft,{imageData:be()+n}),i.a.createElement("p",{className:"badge badge-warning"},n)),i.a.createElement(et,{show:void 0!=e.state.previewData,onClick:function(t){return e.removeInputElement(a)},iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove ",a))})),i.a.createElement("p",null),i.a.createElement(et,{iconClassName:"fas fa-plus",onClick:this.addInputElement},"Add"))}}]),a}(st),pt=function(e){return e&&e.startsWith("data:image")},ft=function(e){return 0!=e.show&&e.imageData?i.a.createElement("img",{className:"image",style:{margin:"3px"},src:e.imageData,width:"50",height:"50"}):null},ht=Object(p.f)(Object(we.b)(Oe)(mt)),vt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state={inputList:[],singlePreviewData:void 0},n.ref=i.a.createRef(),n.inputListLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error("Not found");n.setState({inputList:e.entities}),n.prepopulateForm()},n.loadInputList=function(){var e=n.getEntityElement().entityReferenceClass;n.commonAjax(n.masterDataService.loadAllEntities,n.inputListLoaded,n.showCommonErrorAlert,e)},n.isNotReady=function(){return 0==n.state.inputList.length},n.validateInputType=function(){console.debug("validateInputType"),n.isNotReady()&&n.loadInputList()},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];if(t){var a;if(0!=n.state.inputList.length){var r=n.getEntityElement().optionValueName;r&&(a=t[r])&&(n.ref.current.value=a)}}}},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.validateInputType()}},{key:"componentDidMount",value:function(){this.validateInputType(),this.prepopulateForm()}},{key:"render",value:function(){var e=this.getEntityElement();if(this.isNotReady())return i.a.createElement("div",{className:"form-group"},"Loading...");var t=this.state.inputList;return i.a.createElement("select",{ref:this.ref,className:"form-control",name:e.id},t.map((function(t){var a=e.optionValueName,n=e.optionItemName;return n&&a?i.a.createElement("option",{key:"fid-"+y()+"-",value:t[a]},t[n]):null})))}}]),a}(st),gt=Object(p.f)(Object(we.b)(Oe)(vt)),bt=(a(80),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.className)&&void 0!==e?e:"btn btn-outline-secondary";return this.props.to?i.a.createElement(ze.b,Object.assign({},this.props.attributes,{to:this.props.to,style:this.props.style,onClick:this.props.onClick,className:t}),this.props.iconClassName?i.a.createElement("span",{style:{marginRight:"5px"}},i.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children):i.a.createElement("a",Object.assign({},this.props.attributes,{tyle:this.props.style,onClick:this.props.onClick,className:t}),this.props.iconClassName?i.a.createElement("span",{style:{marginRight:"5px"}},i.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children)}}]),a}(r.Component)),Et=function e(){Object(m.a)(this,e),this.editMode=!1,this.fieldValue="",this.updated=!1},yt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state=new Et,n.contentRef=i.a.createRef(),n.formatDoc=function(e,t){var a=n.contentRef.current;if(a){if(console.debug("commmand: ",e),n.validateMode()){var r=document.execCommand(e,!1,t);console.debug("EXECUTED: ",r," editable: ",a.contentEditable),a.focus()}}else console.debug("oDOc is missing")},n.validateMode=function(){return!n.state.editMode||(alert('Uncheck "Show HTML".'),n.contentRef.current&&n.contentRef.current.focus(),!1)},n.setValue=function(e){n.contentRef.current&&n.setState({fieldValue:n.contentRef.current.innerHTML,updated:!0})},n.setDocMode=function(e){var t=n.contentRef.current;if(t){var a;if(e){a=document.createTextNode(t.innerHTML),t.innerHTML="";var r=document.createElement("pre");t.contentEditable="false",r.id="sourceText",r.contentEditable="true",r.appendChild(a),t.appendChild(r)}else document.all?t.innerHTML=t.innerText:((a=document.createRange()).selectNodeContents(t.firstChild),t.innerHTML=a.toString()),t.contentEditable="true";t.focus()}},n.printDoc=function(){n.validateMode()},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.contentRef.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&(n.contentRef.current.innerHTML=t,n.setState({fieldValue:t,updated:!0}))}},n.setEditMode=function(e){n.setDocMode(e),n.setState({editMode:e})},n.paleteCommand=function(e){var t=e.target,a=t.dataset.command,r=t.dataset.value;"clean"==a?n.clean():n.formatDoc(a,r)},n.clean=function(){var e=Object(c.a)(n);n.showConfirmationDanger("Clean content?").then((function(t){t&&e.contentRef.current&&(e.contentRef.current.innerHTML="")}))},n.contentOnChange=function(e){n.setState({updated:!1})},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){console.debug("component updated")}},{key:"render",value:function(){var e=this,t=this.getEntityElement();return i.a.createElement("div",null,i.a.createElement("input",{type:"hidden",value:this.state.fieldValue,name:t.id}),i.a.createElement("div",{id:"toolBar1",className:"input-group"},i.a.createElement(Ot,{onChange:this.formatDoc}),i.a.createElement(St,{onChange:this.formatDoc}),i.a.createElement(Ct,{onChange:this.formatDoc}),i.a.createElement(wt,{onChange:this.formatDoc}),i.a.createElement(Nt,{onChange:this.formatDoc})),i.a.createElement("div",{id:"toolBar2"},i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"clean",className:"palete fas fa-broom"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},className:"palete fas fa-print "}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"undo",className:"palete fas fa-undo"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"redo",className:"palete fas fa-redo"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"removeFormat",className:"palete fas fa-times"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"bold",className:"palete fas fa-bold"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"italic",className:"palete fas fa-italic"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"underline",className:"palete fas fa-underline"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifyleft",className:"palete fas fa-align-left"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifycenter",className:"palete fas fa-align-center"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifyright",className:"palete fas fa-align-right"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"insertorderedlist",className:"palete fas fa-list-ol"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"insertonorderedlist",className:"palete fas fa-list-ul"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"formatblock","data-value":"blockquote",className:"palete fas fa-quote-left"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"outdent",className:"palete"},"+ Indentation"),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"indent",className:"palete"},"- Indentation"),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},className:"palete fas fa-link",onClick:function(t){var a=prompt("Write the URL here","http://");a&&""!=a&&"http://"!=a&&e.formatDoc("createlink",a)}}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"cut",className:"palete fas fa-cut"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"copy",className:"palete fas fa-copy"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"paste",className:"palete fas fa-paste"})),i.a.createElement("div",{onInput:this.contentOnChange,className:"container-fluid",ref:this.contentRef,id:"textBox",contentEditable:"true"},i.a.createElement("p",null,"Fill content")),i.a.createElement("p",null),i.a.createElement(bt,{show:0==this.state.updated,style:{marginRight:"5px"},iconClassName:"fas fa-exclamation-circle",className:"btn btn-warning btn-sm",onClick:this.setValue},"Update Content"),i.a.createElement(bt,{show:1==this.state.updated,style:{marginRight:"5px"},iconClassName:"fas fa-check",className:"btn btn-primary btn-sm"},"Content Updated"),i.a.createElement(bt,{className:"btn btn-secondary btn-sm",attributes:{onMouseDown:function(e){return e.preventDefault()}},onClick:function(t){return e.setEditMode(!1)},show:1==this.state.editMode},"Hide Html"),i.a.createElement(bt,{className:"btn btn-secondary btn-sm",attributes:{onMouseDown:function(e){return e.preventDefault()}},onClick:function(t){return e.setEditMode(!0)},show:0==this.state.editMode},"Show Html"))}}]),a}(st),Ct=function(e){return i.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("fontsize",a.value),a.value="-"}},i.a.createElement("option",{value:"-",className:"heading",selected:!0},"- size -"),i.a.createElement("option",{value:"1"},"Very small"),i.a.createElement("option",{value:"2"},"A bit small"),i.a.createElement("option",{value:"3"},"Normal"),i.a.createElement("option",{value:"4"},"Medium-large"),i.a.createElement("option",{value:"5"},"Big"),i.a.createElement("option",{value:"6"},"Very big"),i.a.createElement("option",{value:"7"},"Maximum"))},Nt=function(e){return i.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("backcolor",a.value),a.value="-"}},i.a.createElement("option",{value:"-",className:"heading",selected:!0},"- background -"),i.a.createElement("option",{value:"red"},"Red"),i.a.createElement("option",{value:"green"},"Green"),i.a.createElement("option",{value:"black"},"Black"))},wt=function(e){return i.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("forecolor",a.value),a.value="-"}},i.a.createElement("option",{className:"heading",value:"-",selected:!0},"- color -"),i.a.createElement("option",{value:"red"},"Red"),i.a.createElement("option",{value:"blue"},"Blue"),i.a.createElement("option",{value:"green"},"Green"),i.a.createElement("option",{value:"black"},"Black"))},Ot=function(e){return i.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("formatblock",a.value),a.value="-"}},i.a.createElement("option",{value:"-",selected:!0},"- formatting -"),i.a.createElement("option",{value:"h1"},"Title 1 <h1>"),i.a.createElement("option",{value:"h2"},"Title 2 <h2>"),i.a.createElement("option",{value:"h3"},"Title 3 <h3>"),i.a.createElement("option",{value:"h4"},"Title 4 <h4>"),i.a.createElement("option",{value:"h5"},"Title 5 <h5>"),i.a.createElement("option",{value:"h6"},"Subtitle <h6>"),i.a.createElement("option",{value:"p"},"Paragraph <p>"),i.a.createElement("option",{value:"pre"},"Preformatted <pre>"))},St=function(e){return i.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("fontname",a.value),a.value="-"}},i.a.createElement("option",{value:"-",className:"heading",selected:!0},"- font -"),i.a.createElement("option",{value:"Arial"},"Arial"),i.a.createElement("option",{value:"Arial Black"},"Arial Black"),i.a.createElement("option",{value:"Courier New"},"Courier New"),i.a.createElement("option",{value:"Times New Roman"},"Times New Roman"))},jt=Object(p.f)(Object(we.b)(Oe)(yt)),kt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={checked:!1},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&n.setState({checked:1==t})}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement(),a=this.state.checked;return i.a.createElement(r.Fragment,null,i.a.createElement("input",{type:"hidden",name:t.id,value:a?"true":"false"}),i.a.createElement("div",{className:"btn-group"},i.a.createElement("a",{className:a?"btn btn-dark":"btn btn-light",onClick:function(t){return e.setState({checked:!0})}},"Yes"),i.a.createElement("a",{className:a?"btn btn-light":"btn btn-dark",onClick:function(t){return e.setState({checked:!1})}},"No")))}}]),a}(st);var Dt=function(e){return e>=10?e.toString():"0"+e},It=function(e){var t,a=0,n=0,r=e;return r>=3600&&(a=r/3600,r%=3600),r>=60&&(n=r/60,r%=60),t=r,Dt(a)+":"+Dt(Math.floor(n))+":"+Dt(t)},qt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).ref=i.a.createRef(),n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement(),t=e.id,a=n.props.recordToEdit[t];if(void 0!=a){var r,i=void 0;switch(e.fieldType){case Ae.FIELD_TYPE_DATE:var o=new Date(a);if(!o)break;i=[(r=o).getFullYear(),Dt(r.getMonth()+1),Dt(r.getDate())].join("-");break;case Ae.FIELD_TYPE_NUMBER:i=new String(a);break;default:i=a}if(i)if(e.optionItemName&&""!=e.optionItemName){var l,s=i;n.ref.current.value=s[null!==(l=e.optionItemName)&&void 0!==l?l:"id"]}else n.ref.current.value=i}else console.debug(t," is undefined",n.props.recordToEdit,n.props.recordToEdit[t])}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=this.getRequiredAttr();if(1==e.identity||0==e.editable)return i.a.createElement("input",Object.assign({},t,{value:"Generated",ref:this.ref,className:"form-control",name:e.id,disabled:!0}));var a=i.a.createElement("p",null,e.fieldType);switch(e.fieldType){case Ae.FIELD_TYPE_PLAIN_LIST:a=i.a.createElement("select",Object.assign({},t,{ref:this.ref,className:"form-control",name:e.id}),e.plainListValues.map((function(t,a){return i.a.createElement("option",{key:"s-"+e.id+"-o-"+a,value:t},t)})));break;case Ae.FIELD_TYPE_TEXTAREA:a=i.a.createElement("textarea",Object.assign({},t,{ref:this.ref,className:"form-control",name:e.id}));break;default:a=i.a.createElement("input",Object.assign({type:e.type},t,{ref:this.ref,className:"form-control",name:e.id}))}return a}}]),a}(st),Pt=function e(){Object(m.a)(this,e),this.inputList=[],this.searchValue=""},Tt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state=new Pt,n.ref=i.a.createRef(),n.inputRef=i.a.createRef(),n.inputListLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error(n.getEntityElement().labelName+" Not found");n.setState({inputList:e.entities},(function(){n.inputRef.current&&n.inputRef.current.focus()}))},n.loadInputList=function(){var e,t=n.getEntityElement(),a=t.entityReferenceClass,r=t.optionItemName;if(r){var i={entity:a,filter:{limit:0,page:0,fieldsFilter:Object(L.a)({},r,null===(e=n.inputRef.current)||void 0===e?void 0:e.innerHTML)}};n.commonAjax(n.masterDataService.loadEntities,n.inputListLoaded,n.showCommonErrorAlert,i)}},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&n.setState({inputList:[t],searchValue:""},(function(){var e,a=n.getEntityElement().optionValueName;a&&(e=t[a])&&(n.ref.current.value=e)}))}},n.search=function(e){if(13==e.keyCode){if(n.inputRef.current){var t=n.inputRef.current;t.innerHTML=new String(t.innerText).trim()}return e.preventDefault(),n.loadInputList(),!1}},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=e.optionValueName,a=e.optionItemName,n=this.state.inputList;console.debug("options: ",n);var r=e.entityReferenceClass+" "+a;return i.a.createElement("div",null,i.a.createElement("div",{className:"input-group mb-3"},i.a.createElement("div",{className:"input-group-append"},i.a.createElement("span",{className:"input-group-text"},r)),i.a.createElement("div",{onKeyDown:this.search,ref:this.inputRef,contentEditable:!0,className:"form-control"}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement(bt,{onClick:this.loadInputList,className:"btn btn-secondary",children:"Search"}),i.a.createElement(bt,{show:void 0!=this.props.recordToEdit,onClick:this.prepopulateForm,iconClassName:"fas fa-sync-alt",className:"btn btn-secondary"}))),i.a.createElement("select",Object.assign({},this.getRequiredAttr(),{ref:this.ref,className:"form-control",name:e.id}),n.map((function(e){return a&&t?i.a.createElement("option",{key:"fid-"+y()+"-",value:e[t]},e[a]):null}))))}}]),a}(st),At=Object(p.f)(Object(we.b)(Oe)(Tt)),Lt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){if(0==this.props.show)return null;var e="vertical"==this.props.orientation?"vertical":"horizontal";return i.a.createElement("div",{className:"form-group "+this.props.className+" "+("vertical"==e?"":"row")},i.a.createElement("label",{className:"vertical"==e?"":"col-sm-3"},i.a.createElement("strong",null,this.props.label?this.props.label:null)),i.a.createElement("div",{className:"vertical"==e?"":"col-sm-9"},this.props.children))}}]),a}(r.Component),Rt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).getEntityElement=function(){return n.props.entityElement},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=i.a.createElement("p",null,e.fieldType);switch(e.fieldType){case Ae.FIELD_TYPE_DYNAMIC_LIST:t=i.a.createElement(At,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case Ae.FIELD_TYPE_FIXED_LIST:t=i.a.createElement(gt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case Ae.FIELD_TYPE_TEXTEDITOR:t=i.a.createElement(jt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case Ae.FIELD_TYPE_IMAGE:t=e.multiple?i.a.createElement(ht,{recordToEdit:this.props.recordToEdit,entityElement:e}):i.a.createElement(dt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case Ae.FIELD_TYPE_CHECKBOX:t=i.a.createElement(kt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case Ae.FIELD_TYPE_PLAIN_LIST:case Ae.FIELD_TYPE_TEXTAREA:default:t=i.a.createElement(qt,{recordToEdit:this.props.recordToEdit,entityElement:e})}var a=i.a.createElement("span",null,e.labelName,e.editable&&e.required?i.a.createElement("i",{className:"text-danger"},"*"):null);return i.a.createElement(Lt,{orientation:"vertical",label:a},t)}}]),a}(Re),zt=Object(p.f)(Object(we.b)(Oe)(Rt)),xt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.editMode=!1,n.recordToEdit=void 0,n.formRef=i.a.createRef(),n.onSubmit=function(e){if(e.preventDefault(),n.formRef.current){var t=n.formRef.current,a=Object(c.a)(n);n.showConfirmation("Save data?").then((function(e){e&&a.submit(t)}))}},n.submit=function(e){var t=new FormData(e),a={},r=new Array,i=[],o=!1;t.forEach((function(e,t){console.debug("Form data ",t),a[t]||(a[t]=new Array);var r=n.getEntityElement(t);if(!r)return!1;switch(r.fieldType){case Ae.FIELD_TYPE_CHECKBOX:a[t].push("true"==e);break;case Ae.FIELD_TYPE_DYNAMIC_LIST:case Ae.FIELD_TYPE_FIXED_LIST:var l=r.optionValueName;l&&a[t].push(Object(L.a)({},l,e));break;case Ae.FIELD_TYPE_IMAGE:console.debug(t," is image"),"NULLED"==e?(console.debug("NULLED VALUE ADDED: ",t),i.push(t)):(new String(e).startsWith("data:image")&&(o=!0),a[t].push(e));break;default:a[t].push(e)}return!0})),Promise.all(r).then((function(e){var t=n.generateRequestPayload(a,i);console.debug("Record object to save: ",t,"realtimeProgress: ",o),n.ajaxSubmit(t,o)}))},n.generateRequestPayload=function(e,t){var a=n.editMode&&n.recordToEdit?Object(f.a)(Object(f.a)({},n.recordToEdit),{},{nulledFields:t}):{nulledFields:new Array};for(var r in e){var i=e[r];console.debug(r," length: ",i.length),1==i.length?a[r]=i[0]:i.length>1&&(a[r]=i.join("~"))}return a.nulledFields=t,a},n.ajaxSubmit=function(e,t){1==n.getEntityProperty().withProgressWhenUpdated||t?n.commonAjaxWithProgress(n.masterDataService.save,n.recordSaved,n.showCommonErrorAlert,n.getEntityProperty().entityName,e,n.editMode):n.commonAjax(n.masterDataService.save,n.recordSaved,n.showCommonErrorAlert,n.getEntityProperty().entityName,e,n.editMode)},n.recordSaved=function(e){n.showInfo("Record saved")},n.masterDataService=n.getServices().masterDataService,e.recordToEdit&&(n.editMode=!0,n.recordToEdit=e.recordToEdit),n}return Object(s.a)(a,[{key:"getEntityProperty",value:function(){return this.props.entityProperty}},{key:"componentDidUpdate",value:function(){0!=this.getEntityProperty().editable&&0!=this.getEntityProperty().creatable||this.props.onClose()}},{key:"getEntityElement",value:function(e){return rt.getEntityElement(this.getEntityProperty(),e)}},{key:"render",value:function(){var e=this.getEntityProperty(),t=this.editMode?i.a.createElement("span",{className:"badge badge-warning"},"Edit Mode"):"";return i.a.createElement("div",{id:"MasterDataForm"},i.a.createElement(et,{style:{marginBottom:"5px"},onClick:this.props.onClose,iconClassName:"fas fa-angle-left"},"Back"),i.a.createElement("form",{ref:this.formRef,onSubmit:this.onSubmit,id:"record-form"},i.a.createElement(at,{title:i.a.createElement("span",null,e.alias," Record Form ",t),footerContent:i.a.createElement(Mt,null)},i.a.createElement(Ft,{app:this.parentApp,recordToEdit:this.recordToEdit,entityProperty:e}))))}}]),a}(Re),Mt=function(e){return i.a.createElement("div",{className:"btn-group"},i.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),i.a.createElement("input",{type:"reset",className:"btn btn-warning"}))},Ft=function(e){var t=e.entityProperty.elements,a=new Array,n=0,r=rt.hasTextEditorField(t);a.push(new Array);for(var o=0;o<t.length;o++){var l=t[o];!r&&o>0&&o%5==0&&(n++,a.push(new Array)),a[n].push(l)}return i.a.createElement("div",{className:"row"},a.map((function(t,a){return i.a.createElement("div",{key:"GROUPED_ELEMENT_"+a,className:r?"col-lg-12":"col-lg-6"},t.map((function(t){var a="form-input-for-"+e.entityProperty.entityName+"-"+t.id;return i.a.createElement(zt,{key:a,recordToEdit:e.recordToEdit,entityElement:t})})))})))},_t=Object(p.f)(Object(we.b)(Oe)(xt)),Qt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props;if(0==e.show)return null;var t="",a=e.entityProperty.entityName;return"quiz"!=a?"quizhistory"==a?i.a.createElement(et,{onClick:e.delete,className:"btn btn-danger btn-sm",iconClassName:"fas fa-times"}):null:(t="/quizmanagement/detail/"+e.record.id,i.a.createElement(bt,{className:"btn btn-dark btn-sm",iconClassName:"fas fa-edit",to:t,attributes:{target:"_blank"}}))}}]),a}(r.Component),Ut=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.delete=function(e){var t=Object(c.a)(n);n.showConfirmationDanger("Delete record?").then((function(e){e&&t.doDelete()}))},n.doDelete=function(){var e=n.props.record,t=n.props.entityProperty,a=rt.getRecordId(e,t);t.withProgressWhenUpdated?n.commonAjaxWithProgress(n.masterDataService.delete,n.recordDeleted,n.showCommonErrorAlert,t.entityName,a):n.commonAjax(n.masterDataService.delete,n.recordDeleted,n.showCommonErrorAlert,t.entityName,a)},n.getRecordById=function(){var e=n.props.record,t=n.props.entityProperty,a=rt.getRecordId(e,t);n.commonAjax(n.masterDataService.getById,n.recordLoaded,n.showCommonErrorAlert,t.entityName,a)},n.recordLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error("Record not found");n.props.showEditForm&&n.props.showEditForm(e)},n.recordDeleted=function(e){n.showInfo("Record deleted"),n.props.reload()},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.entityProperty;if(0==this.props.show)return null;var t=i.a.createElement(Qt,{delete:this.delete,record:this.props.record,entityProperty:e});return 0==e.editable?t:i.a.createElement("div",{className:"btn-group"},t,i.a.createElement(et,{onClick:this.getRecordById,iconClassName:"fas fa-edit",className:"btn btn-warning btn-sm"}),i.a.createElement(et,{onClick:this.delete,className:"btn btn-danger btn-sm",iconClassName:"fas fa-times"}))}}]),a}(Re),Bt=Object(p.f)(Object(we.b)(Oe,(function(e){return{}}))(Ut)),Yt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.headerProps,a=e.fieldsFilter;return i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"No"),t.map((function(t,n){var o,l,s,c,u=t.isDate,d=t.value;if(!t.filterable)return i.a.createElement("th",{key:"dth-"+n+"-"+d},i.a.createElement("p",null,t.label));var m="form-control input-filter";return i.a.createElement("th",{key:"dth-"+n+"-"+d},i.a.createElement("p",null,t.label),i.a.createElement("div",{style:{minWidth:"200px"},className:"input-group"},u?i.a.createElement(r.Fragment,null,i.a.createElement("input",{key:"filter-day-"+d,autoComplete:"off",value:null!==(o=a[d+"-day"])&&void 0!==o?o:"",onChange:e.filterOnChange,name:d+"-day",className:m,placeholder:"day"}),i.a.createElement("input",{key:"filter-month-"+d,autoComplete:"off",value:null!==(l=a[d+"-month"])&&void 0!==l?l:"",onChange:e.filterOnChange,name:d+"-month",className:m,placeholder:"month"}),i.a.createElement("input",{key:"filter-year-"+d,autoComplete:"off",value:null!==(s=a[d+"-year"])&&void 0!==s?s:"",onChange:e.filterOnChange,name:d+"-year",className:m,placeholder:"year"})):i.a.createElement("input",{key:"filter-common-"+d,autoComplete:"off",value:null!==(c=a[d])&&void 0!==c?c:"",onChange:e.filterOnChange,placeholder:t.label,className:m,name:d}),i.a.createElement("div",{className:"input-group-append btn-group"},i.a.createElement("button",{"data-ordertype":"asc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"btn btn-outline-secondary btn-sm"},i.a.createElement("i",{"data-ordertype":"asc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"fas fa-angle-up"})),i.a.createElement("button",{"data-ordertype":"desc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"btn btn-outline-secondary btn-sm"},i.a.createElement("i",{"data-ordertype":"desc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"fas fa-angle-down"})))))})),i.a.createElement("th",null,"Action")))}}]),a}(r.Component),Wt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e;return 0==this.props.show?null:i.a.createElement("div",{style:this.props.style,className:"alert alert-danger"},null!==(e=this.props.children)&&void 0!==e?e:"Error Occured")}}]),a}(r.Component),Ht=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a=this,n=this.props,r=this.props.active;return i.a.createElement("div",{className:"btn-group"},i.a.createElement(et,{className:"btn  btn-sm "+(r?"btn-dark":"btn-outline-dark"),onClick:function(e){return a.props.onClick(!0)}},null!==(e=n.yesLabel)&&void 0!==e?e:"Yes"),i.a.createElement(et,{className:"btn  btn-sm "+(0==r?"btn-dark":"btn-outline-dark"),onClick:function(e){return a.props.onClick(!1)}},null!==(t=n.noLabel)&&void 0!==t?t:"No"))}}]),a}(r.Component),Vt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.state=void 0,n.recordToEdit=void 0,n.entityProperty=void 0,n.headerProps=void 0,n.adjustFilter=function(e){var t=e.fieldsFilter;for(var a in t){var n=t[a];void 0!=n&&null!=n&&0!=new String(n).length||void 0!=e.fieldsFilter&&delete e.fieldsFilter[a]}return e},n.loadEntities=function(e){var t=Object.assign(new nt,n.state.filter),a=n.entityProperty.entityName;t.page=null!==e&&void 0!==e?e:t.page;var r={entity:a,filter:n.adjustFilter(t)};n.commonAjax(n.masterDataService.loadEntities,n.entitiesLoaded,n.showCommonErrorAlert,r)},n.entitiesLoaded=function(e){n.setState({recordData:e,filter:e.filter})},n.checkDefaultData=function(){n.state.loading||n.entityProperty.entityName==n.props.entityProperty.entityName&&void 0!=n.state.recordData||(n.entityProperty=n.props.entityProperty,n.headerProps=rt.getHeaderLabels(n.props.entityProperty),n.loadEntities(0))},n.getRecordNumber=function(e){var t,a;return(null!==(t=n.state.filter.page)&&void 0!==t?t:0)*(null!==(a=n.state.filter.limit)&&void 0!==a?a:5)+e+1},n.filterFormSubmit=function(e){var t=n.state.filter.useExistingFilterPage?n.state.filter.page:0;n.loadEntities(t)},n.filterOnChange=function(e){e.preventDefault();var t=e.target,a=t.name,r=t.value,i=n.state.filter;void 0==i.fieldsFilter&&(i.fieldsFilter={}),i.fieldsFilter[a]=r,n.setState({filter:i})},n.setExactSearch=function(e){var t=n.state.filter;t.exacts=e,n.setState({filter:t})},n.filterReset=function(e){var t=n.state.filter;t.fieldsFilter={},t.limit=5,n.setState({filter:t})},n.orderButtonOnClick=function(e){var t=e.target.dataset,a=n.state.filter;a.orderBy=t.orderby,a.orderType=t.ordertype,n.setState({filter:a}),n.loadEntities(0)},n.showEditForm=function(e){e.entities&&(n.recordToEdit=e.entities[0],n.setState({showForm:!0}))},n.showCreateForm=function(e){n.recordToEdit=void 0,n.setState({showForm:!0})},n.updateFilterPage=function(e){var t=n.state.filter;t.useExistingFilterPage=!0,t.page=parseInt(e)-1,n.setState({filter:t})},n.updateFilterLimit=function(e){var t=n.state.filter;t.limit=parseInt(e),n.setState({filter:t})},n.getFilter=function(){return n.state.filter},n.printRecord=function(){n.props.printRecord(n.state.filter)},n.masterDataService=n.getServices().masterDataService,n.entityProperty=n.props.entityProperty,n.headerProps=rt.getHeaderLabels(n.props.entityProperty),n.state={showForm:!1,loading:!1,filter:{limit:5,page:0,fieldsFilter:{}}},n}return Object(s.a)(a,[{key:"startLoading",value:function(){this.setState({loading:!0})}},{key:"endLoading",value:function(){this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.checkDefaultData()}},{key:"componentDidMount",value:function(){this.checkDefaultData()}},{key:"render",value:function(){var e,t,a,n,r=this;if(void 0==this.state.recordData)return i.a.createElement(Ue,null);var o=this.headerProps,l=1==this.state.filter.exacts,s=this.state.recordData.entities?this.state.recordData.entities:[];return void 0==o||void 0==s?i.a.createElement(Wt,null):1==this.state.showForm?i.a.createElement(_t,{recordToEdit:this.recordToEdit,entityProperty:this.entityProperty,onClose:function(e){r.setState({showForm:!1})}}):i.a.createElement("div",{id:"MasterDataList"},i.a.createElement("div",{className:"btn-group",style:{marginBottom:"5px"}},i.a.createElement(et,{show:1==this.entityProperty.creatable&&1==this.entityProperty.editable,onClick:this.showCreateForm,iconClassName:"fas fa-plus"},"Add Record"),i.a.createElement(et,{onClick:this.printRecord,iconClassName:"fas fa-file"},"Print Record")),i.a.createElement("form",{id:"filter-form",onSubmit:function(e){e.preventDefault()}},i.a.createElement(at,{title:"Filter",toggleable:!0},i.a.createElement("div",null,i.a.createElement("div",{className:"form-group row"},i.a.createElement("div",{className:"col-6"},i.a.createElement("input",{value:(null!==(e=this.state.filter.page)&&void 0!==e?e:0)+1,onChange:function(e){r.updateFilterPage(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"go to page"})),i.a.createElement("div",{className:"col-6"},i.a.createElement("input",{value:this.state.filter.limit,onChange:function(e){return r.updateFilterLimit(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"record per page"})),i.a.createElement("div",{className:"col-12"},i.a.createElement("p",null)),i.a.createElement("div",{className:"col-3"},i.a.createElement(Ht,{active:l,yesLabel:"exact",noLabel:"not exact",onClick:function(e){return r.setExactSearch(e)}})),i.a.createElement("div",{className:"col-3"},i.a.createElement(Gt,{onSubmit:this.filterFormSubmit,onReset:this.filterReset}))))),i.a.createElement(ot,{limit:null!==(t=this.state.filter.limit)&&void 0!==t?t:5,totalData:null!==(a=this.state.recordData.totalData)&&void 0!==a?a:0,activePage:null!==(n=this.state.filter.page)&&void 0!==n?n:0,onClick:this.loadEntities}),i.a.createElement(at,{title:"Data List"},this.state.loading?i.a.createElement(Xt,{loading:this.state.loading}):null,i.a.createElement("div",{className:"container-fluid",style:{overflow:"scroll"}},i.a.createElement("table",{className:"table"},i.a.createElement(Yt,{fieldsFilter:this.state.filter.fieldsFilter,orderButtonOnClick:this.orderButtonOnClick,filterOnChange:this.filterOnChange,headerProps:o}),i.a.createElement("tbody",null,s.map((function(e,t){var a=r.getRecordNumber(t),n=it.parseValues(e,r.props.entityProperty);return i.a.createElement("tr",{key:"tr-result-"+t},i.a.createElement("td",null,a),n.map((function(e){try{return i.a.createElement("td",{key:"td-u-"+y()},e)}catch(t){return i.a.createElement("td",{key:"td-u-"+y()},"-")}})),i.a.createElement("td",null,i.a.createElement(Bt,{showEditForm:r.showEditForm,record:e,entityProperty:r.entityProperty,reload:function(){return r.loadEntities(void 0)}})))}))))))))}}]),a}(Re),Xt=function(e){var t=e.loading;return i.a.createElement("div",{style:{width:"100%",height:"100%",paddingTop:"2rem",backgroundColor:"rgb(240,240,240,0.5)",marginLeft:"-1rem",marginTop:"-1rem",position:"absolute"}},i.a.createElement(Ue,{show:t}))},Gt=function(e){return i.a.createElement("div",{className:"btn-group"},i.a.createElement("button",{onClick:e.onSubmit,className:"btn btn-dark btn-sm"},i.a.createElement("span",{className:"icon"},i.a.createElement("i",{className:"fas fa-play-circle"})),"Apply Filter"),i.a.createElement("button",{onClick:e.onReset,type:"reset",className:"btn btn-dark btn-sm"},i.a.createElement("span",{className:"icon"},i.a.createElement("i",{className:"fas fa-sync-alt"})),"Reset"))},Kt=Object(p.f)(Object(we.b)(Oe)(Vt)),Jt=function e(){Object(m.a)(this,e),this.entityProperty=void 0},Zt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.code="",n.loadingEntityProperty=!1,n.entityProperty=void 0,n.state=new Jt,n.entityPropertyLoaded=function(e){n.loadingEntityProperty=!1,void 0!=e.entityProperty&&(n.masterDataService.setEntityProperty(n.props.code,e.entityProperty),n.setState({entityProperty:e.entityProperty}),n.setTitle(e.entityProperty))},n.setTitle=function(e){document.title=new String(null===e||void 0===e?void 0:e.alias).toString()},n.printRecord=function(e){var t=n.state.entityProperty;t&&n.showConfirmation("Print record? ").then((function(a){if(a){var r={entity:t.entityName,filter:e};n.commonAjaxWithProgress(n.masterDataService.generateReport,n.reportCreated,n.showCommonErrorAlert,r)}}))},n.reportCreated=function(e){n.showConfirmation("Save File "+e.name+" ?").then((function(t){t&&Object.assign(document.createElement("a"),{target:"_blank",download:e.name,style:{display:"none"},href:e.dataUrl}).click()}))},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){void 0!=this.props.code&&this.code!=this.props.code&&(this.code=this.props.code,this.loadEntityProperty()),console.debug("updated this.props.code: ",this.props.code)}},{key:"componentDidMount",value:function(){void 0!=this.props.code&&this.code!=this.props.code&&(this.code=this.props.code,this.loadEntityProperty())}},{key:"startLoading",value:function(e){1==e&&Object(Je.a)(Object(Ze.a)(a.prototype),"startLoading",this).call(this,e)}},{key:"loadEntityProperty",value:function(){var e=this;if(void 0!=this.code||1!=this.loadingEntityProperty){var t=this.masterDataService.getEntityProperty(this.code);if(void 0!=t)return this.loadingEntityProperty=!1,this.setState({entityProperty:t}),void this.setTitle(t);this.loadingEntityProperty=!0,this.setState({entityProperty:void 0}),this.commonAjax(this.masterDataService.loadEntityProperty,this.entityPropertyLoaded,(function(t){e.loadingEntityProperty=!1,e.showCommonErrorAlert(t)}),this.code)}}},{key:"render",value:function(){if(void 0==this.state.entityProperty)return i.a.createElement("div",{className:"row container-fluid section-body",style:{paddingTop:"20px"}},i.a.createElement("div",{className:"col-4 text-right"},i.a.createElement("div",{className:"spinner-border",role:"status"})),i.a.createElement("div",{className:"col-8"},i.a.createElement("h4",null,"Loading configuration")));this.state.entityProperty;return i.a.createElement("div",{id:"MasterDataManagement",className:"container-fluid section-body"},i.a.createElement("h2",null,this.state.entityProperty.alias),i.a.createElement(Kt,{printRecord:this.printRecord,entityProperty:this.state.entityProperty}))}}]),a}(Re),$t=Object(p.f)(Object(we.b)(Oe)(Zt)),ea=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e,"Master Data",!0)).masterDataService=void 0,r.state={code:void 0},r.managementPropertiesLoaded=function(e){r.masterDataService.managementProperties=e.generalList?e.generalList:[],r.setSidebarMenus(),r.refresh()},r.setSidebarMenus=function(){for(var e=[],t=r.masterDataService.managementProperties,a=0;a<t.length;a++){var i=t[a];e.push({role:[n.ROLE_ADMIN],name:i.label,url:i.entityName,code:i.entityName,menuClass:i.iconClassName})}console.debug("this.props.setSidebarMenus: ",r.props.setSidebarMenus),r.props.setSidebarMenus&&r.props.setSidebarMenus(e)},r.loadManagamenetPages=function(){if(r.masterDataService.managementProperties.length>0)return r.setSidebarMenus(),void r.refresh();r.commonAjax(r.masterDataService.loadManagementProperties,r.managementPropertiesLoaded,r.showCommonErrorAlert)},r.getCode=function(){return r.props.match.params.code},r.masterDataService=r.getServices().masterDataService,console.debug("PROPS: ",r.props),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(Je.a)(Object(Ze.a)(a.prototype),"componentDidMount",this).call(this),this.loadManagamenetPages()}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.setSidebarMenus(),this.state.code!=this.getCode()&&this.setState({code:this.getCode()})}},{key:"render",value:function(){if(void 0!=this.getCode()&&null!=this.getCode()&&""!=this.getCode())return i.a.createElement($t,{code:this.getCode()});if(0==this.masterDataService.managementProperties.length)return i.a.createElement("div",{className:"container-fluid  section-body"},i.a.createElement(Ue,null));var e=this.masterDataService.managementProperties;return i.a.createElement("div",{className:"container-fluid section-body"},i.a.createElement("h2",null,"Master Data Page"),i.a.createElement("div",{className:"row"},e.map((function(e){return i.a.createElement("div",{key:"mngmnt-page-item-"+e.entityName,className:"col-md-2 text-center",style:{marginBottom:"10px"}},i.a.createElement("h2",null,i.a.createElement(ze.b,{className:"btn btn-warning btn-lg",to:"/management/"+e.entityName},i.a.createElement("i",{className:e.iconClassName}))),i.a.createElement("p",null,e.label))}))))}}]),a}(Xe),ta=Object(p.f)(Object(we.b)(Oe)(ea)),aa=(a(81),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,!1)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Home"}},{key:"render",value:function(){var e=this.getApplicationProfile(),t=be()+e.backgroundUrl;return i.a.createElement("div",{style:{backgroundColor:e.color},className:"text-center container-fluid home-wrapper"},i.a.createElement("div",{className:" bg",style:{backgroundImage:'url("'+t+'")'}},"   "),i.a.createElement("p",null),i.a.createElement(ze.b,{to:"/login",className:"btn btn-dark btn-lg"},"Login to continue"),i.a.createElement("p",null))}}]),a}(Re)),na=Object(p.f)(Object(we.b)(Oe)(aa)),ra=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,"Settings",!0)}return Object(s.a)(a,[{key:"render",value:function(){var e;return i.a.createElement("div",{id:"SettingsMain",className:"section-body container-fluid"},i.a.createElement("h2",null,"Settings"),i.a.createElement("div",{className:"alert alert-info"},"Welcome, ",i.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName)))}}]),a}(Xe),ia=Object(p.f)(Object(we.b)(Oe,(function(e){return{}}))(ra)),oa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){return i.a.createElement("div",Object.assign({},this.props.attributes,{className:"card "+this.props.className}),this.props.title?i.a.createElement("div",{className:"card-header"},this.props.title):null,i.a.createElement("div",{className:"card-body"},this.props.children),void 0!=this.props.footerContent?i.a.createElement("div",{className:"card-footer"},this.props.footerContent):null)}}]),a}(r.Component),la=function(e){var t=e.edit,a=e.name,n=e.toggleInput,r=e.value,o=e.updateProperty,l=Object($e.a)(e,["edit","name","toggleInput","value","updateProperty"]);return 1==t?i.a.createElement(sa,{updateProperty:o,name:a,toggleInput:n,value:r,type:l.type}):i.a.createElement(ca,{name:a,toggleInput:n,value:r,type:l.type})},sa=function(e){var t=e.name,a=e.toggleInput,n=e.value,r=e.updateProperty,o=e.type;return i.a.createElement("div",{className:"row"},i.a.createElement("p",{className:"col-md-10"},i.a.createElement("input",{type:null!==o&&void 0!==o?o:"text",name:t,onChange:r,value:n,className:"form-control"})),i.a.createElement("div",{className:"col-md-2"},i.a.createElement(et,{attributes:{"data-name":t,"data-enabled":"false"},onClick:a,className:"btn btn-secondary btn-sm"},"cancel")))},ca=function(e){var t=e.name,a=e.toggleInput,n=e.value,r=e.type;return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-10"},i.a.createElement("p",{style:{backgroundColor:"color"==r?n:"#fff"}},"color"==r?"Sample Color":n),"color"==r?i.a.createElement("p",null,n):null),i.a.createElement("div",{className:"col-md-2"},i.a.createElement(et,{attributes:{"data-name":t,"data-enabled":"true"},onClick:a,className:" btn btn-info btn-sm"},"edit")))},ua=function(e){var t=e.name,a=e.edit,n=e.toggleInput,o=e.updateProperty;return a?i.a.createElement(r.Fragment,null,i.a.createElement("div",null,i.a.createElement(et,{attributes:{"data-name":t,"data-enabled":"false"},onClick:n,className:" btn btn-secondary btn-sm"},"cancel")),i.a.createElement("input",{onChange:o,className:"form control",accept:"image/*",type:"file",name:t})):i.a.createElement("div",null,i.a.createElement(et,{attributes:{"data-name":t,"data-enabled":"true"},onClick:n,className:" btn btn-info btn-sm"},"edit image"))},da=function e(){var t=this;Object(m.a)(this,e),this.user=void 0,this.editFields={username:!1,displayName:!1,editPassword:!1,profileImage:!1},this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},ma=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).userService=void 0,n.state=new da,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.user;a&&(a[t.name]=t.value,n.setState({user:a}))}},n.updateProfleImage=function(e){var t=e.target;if(null!=t){var a=Object(c.a)(n);(t.files?t.files[0].name:void 0)&&Te(t).then((function(e){a.setProfileImage(e)})).catch(console.error)}},n.setProfileImage=function(e){var t=n.state.user;t&&(t.profileImage=e,n.setState({user:t}))},n.toggleInput=function(e){var t=e.target,a=n.state.user,r=n.getLoggedUser();if(null!=t&&a&&r){var i=t.getAttribute("data-name");if(null!=i){var o="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[i]=o,o||(a[i]=r[i]),n.setState({user:a,editFields:l})}}},n.saveRecord=function(e){if(e.preventDefault(),0!=n.state.fieldChanged()){var t=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&t.doSaveRecord()}))}},n.doSaveRecord=function(){var e=n.getUserEditedData();e&&(e.profileImage?n.commonAjaxWithProgress(n.userService.updateProfile,n.profileSaved,n.showCommonErrorAlert,e):n.commonAjax(n.userService.updateProfile,n.profileSaved,n.showCommonErrorAlert,e))},n.getUserEditedData=function(){var e,t=n.state.user,a=n.state.editFields;if(t){var r=new Ee;for(var i in a){a[i]&&"profileImage"!=i&&(r[i]=t[i])}return a.profileImage&&(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))&&(r.profileImage=t.profileImage),r}},n.profileSaved=function(e){n.showInfo("Success"),n.props.setLoggedUser(e.user);var t=n.state.editFields;for(var a in t)t[a]=!1;n.setState({editFields:t})},n.userService=n.getServices().userService,n.state.user=Object.assign(new Ee,n.getLoggedUser()),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),document.title="User Profile"}},{key:"render",value:function(){var e,t=this.state.user;if(!t)return null;var a=this.state.editFields;return i.a.createElement("div",{id:"UserProfile",className:"section-body container-fluid"},i.a.createElement("h2",null,"User Profile"),i.a.createElement(oa,{title:"Profile Data"},i.a.createElement("form",{onSubmit:this.saveRecord},i.a.createElement("div",{className:"container-fluid text-center",style:{marginBottom:"10px"}},i.a.createElement("img",{style:{marginBottom:"10px"},width:"100",height:"100",className:"rounded-circle border border-primary",src:(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))?t.profileImage:be()+t.profileImage}),i.a.createElement(ua,{name:"profileImage",edit:a.profileImage,updateProperty:this.updateProfleImage,toggleInput:this.toggleInput})),i.a.createElement(Lt,{label:"User Name"},i.a.createElement(la,{edit:a.username,updateProperty:this.updateProfileProperty,name:"username",toggleInput:this.toggleInput,value:t.username})),i.a.createElement(Lt,{label:"Name"},i.a.createElement(la,{edit:a.displayName,updateProperty:this.updateProfileProperty,name:"displayName",toggleInput:this.toggleInput,value:t.displayName})),i.a.createElement(Lt,{label:"Password"},i.a.createElement(la,{edit:a.editPassword,updateProperty:this.updateProfileProperty,name:"editPassword",toggleInput:this.toggleInput,value:t.editPassword})),i.a.createElement(Lt,null,this.state.fieldChanged()?i.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save"}):null))))}}]),a}(Re),pa=Object(p.f)(Object(we.b)(Oe,(function(e){return{setLoggedUser:function(t){return e(function(e){return{type:"set_logged_user",payload:{user:Object.assign(new Ee,e)},meta:{type:"set_logged_user"}}}(t))}}}))(ma)),fa=function e(){Object(m.a)(this,e),this.name=!1,this.pageIcon=!1,this.welcomingMessage=!1,this.contact=!1,this.shortDescription=!1,this.backgroundUrl=!1,this.address=!1,this.about=!1,this.color=!1,this.fontColor=!1},ha=function e(){var t=this;Object(m.a)(this,e),this.applicationProfile=void 0,this.editFields=new fa,this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},va=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.state=new ha,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.applicationProfile;a&&(a[t.name]=t.value,n.setState({applicationProfile:a}))}},n.updateImageField=function(e){var t=e.target;if(null!=t){var a=e.target.getAttribute("name");if(null!=a){var r=Object(c.a)(n);(t.files?t.files[0].name:void 0)&&Te(t).then((function(e){r.setAppProfileField(a,e)})).catch(console.error)}}},n.setAppProfileField=function(e,t){var a=n.state.applicationProfile;a&&(a[e]=t,n.setState({applicationProfile:a}))},n.toggleInput=function(e){var t=e.target,a=n.state.applicationProfile,r=n.getApplicationProfile();if(null!=t&&a&&r){var i=t.getAttribute("data-name");if(null!=i){var o="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[i]=o,o||(a[i]=r[i]),n.setState({applicationProfile:a,editFields:l})}}},n.saveRecord=function(e){if(e.preventDefault(),0!=n.state.fieldChanged()){var t=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&t.doSaveRecord()}))}},n.doSaveRecord=function(){var e=n.getApplicationEditedData();e&&(e.backgroundUrl||e.pageIcon?n.commonAjaxWithProgress(n.masterDataService.updateApplicationProfile,n.profileSaved,n.showCommonErrorAlert,e):n.commonAjax(n.masterDataService.updateApplicationProfile,n.profileSaved,n.showCommonErrorAlert,e))},n.getApplicationEditedData=function(){var e,t,a=n.state.applicationProfile,r=n.state.editFields;if(a){var i=new Le;for(var o in r){r[o]&&"backgroundUrl"!=o&&"pageIcon"!=o&&(i[o]=a[o])}return r.backgroundUrl&&(null===(e=a.backgroundUrl)||void 0===e?void 0:e.startsWith("data:image"))&&(i.backgroundUrl=a.backgroundUrl),r.pageIcon&&(null===(t=a.pageIcon)||void 0===t?void 0:t.startsWith("data:image"))&&(i.pageIcon=a.pageIcon),i}},n.profileSaved=function(e){n.showInfo("Success"),n.props.setApplicationProfile(e.applicationProfile);var t=n.state.editFields;for(var a in t)t[a]=!1;n.setState({editFields:t})},n.masterDataService=n.getServices().masterDataService,n.state.applicationProfile=Object.assign(new Le,n.getApplicationProfile()),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),document.title="ApplicationProfileModel Profile"}},{key:"render",value:function(){var e,t,a=this.state.applicationProfile;if(!a)return null;var n=this.state.editFields,r=null!==(e=a.backgroundUrl)&&void 0!==e?e:"",o=null!==(t=a.pageIcon)&&void 0!==t?t:"";return i.a.createElement("div",{id:"ApplicationProfileModel",className:"section-body container-fluid"},i.a.createElement("h2",null,"Application Profile"),i.a.createElement(oa,{title:"Profile Data"},i.a.createElement("form",{onSubmit:this.saveRecord},i.a.createElement("div",{className:"container-fluid text-center",style:{marginBottom:"10px"}},i.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:r.startsWith("data:image")?r:be()+r}),i.a.createElement(ua,{name:"backgroundUrl",edit:n.backgroundUrl,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),i.a.createElement(Lt,{label:"Name"},i.a.createElement(la,{edit:n.name,updateProperty:this.updateProfileProperty,name:"name",toggleInput:this.toggleInput,value:a.name})),i.a.createElement(Lt,{label:"Welcoming Message"},i.a.createElement(la,{edit:n.welcomingMessage,updateProperty:this.updateProfileProperty,name:"welcomingMessage",toggleInput:this.toggleInput,value:a.welcomingMessage})),i.a.createElement(Lt,{label:"Short Description"},i.a.createElement(la,{edit:n.shortDescription,updateProperty:this.updateProfileProperty,name:"shortDescription",toggleInput:this.toggleInput,value:a.shortDescription})),i.a.createElement(Lt,{label:"Address"},i.a.createElement(la,{edit:n.address,updateProperty:this.updateProfileProperty,name:"address",toggleInput:this.toggleInput,value:a.address})),i.a.createElement(Lt,{label:"About"},i.a.createElement(la,{edit:n.about,updateProperty:this.updateProfileProperty,name:"about",toggleInput:this.toggleInput,value:a.about})),i.a.createElement(Lt,{label:"Contact"},i.a.createElement(la,{edit:n.contact,updateProperty:this.updateProfileProperty,name:"contact",toggleInput:this.toggleInput,value:a.contact})),i.a.createElement(Lt,{label:"Background Color"},i.a.createElement(la,{type:"color",edit:n.color,updateProperty:this.updateProfileProperty,name:"color",toggleInput:this.toggleInput,value:a.color})),i.a.createElement(Lt,{label:"Font Color"},i.a.createElement(la,{type:"color",edit:n.fontColor,updateProperty:this.updateProfileProperty,name:"fontColor",toggleInput:this.toggleInput,value:a.fontColor})),i.a.createElement(Lt,{label:"Page Icon"},i.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:o.startsWith("data:image")?o:be()+o}),i.a.createElement(ua,{name:"pageIcon",edit:n.pageIcon,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),i.a.createElement(Lt,null,this.state.fieldChanged()?i.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save"}):null))))}}]),a}(Re),ga=Object(p.f)(Object(we.b)(Oe,(function(e){return{setApplicationProfile:function(t){return e(function(e){return{type:"SET_APPLICATION_PROFILE",payload:{applicationProfile:e},meta:{type:"SET_APPLICATION_PROFILE"}}}(t))}}}))(va)),ba=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,!1)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="About Us"}},{key:"render",value:function(){var e=this.getApplicationProfile();return i.a.createElement("div",{className:"container-fluid",style:{marginTop:"20px"}},i.a.createElement("h2",null,"About Us"),i.a.createElement(oa,{title:"Application"},i.a.createElement(Lt,{label:"Name"},e.name),i.a.createElement(Lt,null,i.a.createElement("i",null,e.shortDescription)),i.a.createElement(Lt,{label:"Contact"},e.contact),i.a.createElement(Lt,{label:"Address"},e.address)),i.a.createElement("p",null),i.a.createElement(oa,{title:"Development Mode"}),i.a.createElement("p",null))}}]),a}(Re),Ea=Object(p.f)(Object(we.b)(Oe)(ba)),ya=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).render=function(){return i.a.createElement("div",{className:"div-auto-scroll"},e.props.children)},e}return a}(r.Component),Ca=function e(){Object(m.a)(this,e),this.fieldsFilter={}},Na=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=new Ca,n.updateFilter=function(e){var t=n.state.fieldsFilter,a=e.target;t[a.name]=a.value,n.setState({fieldsFilter:t})},n.resetFilter=function(e){n.setState({fieldsFilter:{}})},n}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props;return i.a.createElement(oa,null,i.a.createElement("form",{className:"row",onSubmit:function(e){e.preventDefault(),t.props.onFilter&&t.props.onFilter(t.state.fieldsFilter)}},i.a.createElement(Lt,{className:"col-6",label:"Title"},i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{onChange:this.updateFilter,name:"title",value:null!==(e=this.state.fieldsFilter.title)&&void 0!==e?e:"",type:"text",placeholder:"Search Title",className:"form-control"}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Search"),i.a.createElement("button",{onClick:this.resetFilter,type:"reset",className:"btn btn-warning"},i.a.createElement("i",{className:"fas fa-redo"})))))),i.a.createElement(ya,null,i.a.createElement("table",{style:{},className:"table table-striped"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"No"),i.a.createElement("th",null,"Title"),i.a.createElement("th",null,"Question"),i.a.createElement("th",null,"Duration"),i.a.createElement("th",null,"Status"),i.a.createElement("th",null,"Action"))),i.a.createElement("tbody",null,a.loading?i.a.createElement("tr",null,i.a.createElement("td",{colSpan:6},i.a.createElement(Ue,null))):a.quizList.map((function(e,t){return e=Object.assign(new z,e),i.a.createElement("tr",{key:"quiz-public-list-"+t},i.a.createElement("td",null,t+a.startingNumber+1),i.a.createElement("td",null,e.title,e.questionsTimered?i.a.createElement("i",{className:"fas fa-stopwatch"}):null),i.a.createElement("td",null,e.getQuestionCount()),i.a.createElement("td",null,It(e.duration)),i.a.createElement("td",null,e.active?"Active":"Not active","-",e.repeatable?"Repeatable":"Not repeatable"),i.a.createElement("td",null,e.available?i.a.createElement("a",{onClick:function(t){return a.quizOnClick(e)},className:"btn btn-dark"},i.a.createElement("i",{className:"fas fa-folder-open"})):"Not available"))}))))))}}]),a}(r.Component),wa=function e(){Object(m.a)(this,e),this.quizList=new Array,this.loading=!1,this.filter=new nt,this.totalData=0},Oa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,"Quiz Management",!0)).quizService=void 0,n.state=new wa,n.startLoading=function(e){n.setState({loading:!0})},n.endLoading=function(){n.setState({loading:!1})},n.dataLoaded=function(e){var t;n.setState({quizList:null!==(t=e.entities)&&void 0!==t?t:[],totalData:e.totalData})},n.loadRecords=function(){if(!n.state.loading){var e=n.state.filter;e.availabilityCheck=!1,n.commonAjax(n.quizService.getQuizList,n.dataLoaded,n.showCommonErrorAlert,e)}},n.loadRecordsAtPage=function(e){if(!n.state.loading){var t=n.state.filter;t.page=e,n.setState({filter:t}),n.loadRecords()}},n.loadRecordsWithFilter=function(e){var t=n.state.filter;t.page=0,t.fieldsFilter=e,n.setState({filter:t}),n.loadRecords()},n.editQuiz=function(e){n.showConfirmation("See Detail Quiz: "+e.title+"?").then((function(t){t&&n.props.history.push({pathname:"/quizmanagement/detail/"+e.id})}))},n.quizService=n.getServices().publicQuizService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(Je.a)(Object(Ze.a)(a.prototype),"componentDidMount",this).call(this),this.loadRecords()}},{key:"render",value:function(){var e,t,a,n,r,o=this.state.filter;return i.a.createElement("div",{id:"QuizManagement",className:"container-fluid section-body"},i.a.createElement("h2",null,"Quiz Management"),i.a.createElement("div",{className:"alert alert-info"},"Welcome, ",i.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName)),i.a.createElement(ot,{activePage:null!==(t=o.page)&&void 0!==t?t:0,limit:null!==(a=o.limit)&&void 0!==a?a:5,totalData:this.state.totalData,onClick:this.loadRecordsAtPage}),i.a.createElement(Na,{onFilter:this.loadRecordsWithFilter,loading:this.state.loading,quizOnClick:this.editQuiz,startingNumber:(null!==(n=o.limit)&&void 0!==n?n:0)*(null!==(r=o.page)&&void 0!==r?r:0),quizList:this.state.quizList}))}}]),a}(Xe),Sa=Object(p.f)(Object(we.b)(Oe)(Oa)),ja=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).answerCode=void 0,e.correctChoice=void 0,e.statement=void 0,e.quiz=void 0,e.image=void 0,e.choices=void 0,e.duration=5,e.number=1,e.entered=!1,e}return a}(b);ja.public_choices=["A","B","C","D"],ja.publicQuizQuestion=function(){var e=new ja;e.answerCode="A";for(var t=[],a=0;a<ja.public_choices.length;a++){var n=ja.public_choices[a];t.push({answerCode:n,statement:"Answer "+n})}return e.choices=t,e};var ka=function(e){return i.a.createElement("div",null,i.a.createElement("div",{className:"input-group "+(e.answerCode==e.choice.answerCode?"border border-primary":"")},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{onClick:function(t){var a;e.setAnswer(null!==(a=e.choice.answerCode)&&void 0!==a?a:"",e.questionIndex)},className:"clickable input-group-text "+(e.answerCode==e.choice.answerCode?"bg-primary text-white":"")},i.a.createElement("b",null,e.choice.answerCode))),i.a.createElement("input",{name:"statement",onChange:e.updateField,className:"form-control","data-questionindex":e.questionIndex,"data-index":e.index,value:e.choice.statement,required:!0})),i.a.createElement("input",{type:"file",name:"image",accept:"image/*",onChange:e.updateField,"data-questionindex":e.questionIndex,"data-index":e.index,className:"form-control"}),i.a.createElement(qa,{name:e.choice.image,index:e.index,remove:e.removeImage}),e.choice.id?i.a.createElement("label",null,"Record Id: ",e.choice.id):null)},Da=function(e){var t,a=e.index,n=null!==(t=e.question.choices)&&void 0!==t?t:[];return i.a.createElement("div",{className:"alert alert-info",key:"quiz-quest-form-"+a},i.a.createElement(Lt,{label:"Question #"+(a+1)},i.a.createElement("input",{required:!0,onChange:e.updateField,value:e.question.statement,className:"form-control",name:"statement","data-index":a})),i.a.createElement(Lt,{show:e.questionsTimered,label:"Duration"},i.a.createElement("input",{min:5,type:"number",required:!0,onChange:e.updateField,value:e.question.duration,className:"form-control",name:"duration","data-index":a})),i.a.createElement(Lt,{label:"Image"},i.a.createElement("input",{type:"file",accept:"image/*",onChange:e.updateField,name:"image",className:"form-control","data-index":a}),i.a.createElement(qa,{name:e.question.image,index:a,remove:e.removeImage})),i.a.createElement(Lt,{label:"Choices"},e.showChoices?n.map((function(t,n){var r;return i.a.createElement(ka,{answerCode:null!==(r=e.question.answerCode)&&void 0!==r?r:"A",key:"qst-choice-"+n+"-"+a,updateField:e.updateChoiceField,setAnswer:e.setAnswer,removeImage:function(t){e.removeChoiceImage(t,a)},questionIndex:a,index:n,choice:t})})):i.a.createElement("label",null,"Hidden")),i.a.createElement(Lt,{label:"Answer"},i.a.createElement("select",{required:!0,className:"form-control",value:e.question.answerCode,onChange:function(t){e.setAnswer(t.target.value,a)},name:"answerCode","data-index":a},ja.public_choices.map((function(e,t){return i.a.createElement("option",{key:"opt-ch-ans-"+t+a,value:e},e)})))),e.question.id?i.a.createElement(Lt,{label:"Record ID"},e.question.id):null,i.a.createElement(Lt,null,i.a.createElement(et,{iconClassName:"fas fa-times",className:"btn btn-danger",onClick:function(t){e.remove(e.index)}})))},Ia=function(e){var t=e.quiz;return i.a.createElement(r.Fragment,null,i.a.createElement(Lt,{label:"Title"},i.a.createElement("input",{required:!0,onChange:e.updateField,className:"form-control",name:"title",value:t.title})),i.a.createElement(Lt,{label:"Description"},i.a.createElement("textarea",{required:!0,onChange:e.updateField,className:"form-control",name:"description",value:t.description})),i.a.createElement(Lt,{label:"Duration (Second)"},i.a.createElement("input",{type:"number",min:5,required:!0,onChange:e.updateField,className:"form-control",name:"duration",value:t.duration})),i.a.createElement(Lt,{label:"Active"},i.a.createElement(Ht,{active:1==t.active,onClick:function(t){return e.updateQuizBooleanField("active",t)}})),i.a.createElement(Lt,{label:"Repeatable"},i.a.createElement(Ht,{active:1==t.repeatable,onClick:function(t){return e.updateQuizBooleanField("repeatable",t)}})),i.a.createElement(Lt,{label:"Show All Question"},i.a.createElement(Ht,{active:1==t.showAllQuestion,onClick:function(t){return e.updateQuizBooleanField("showAllQuestion",t)}})),i.a.createElement(Lt,{label:"Question With Timer"},i.a.createElement(Ht,{active:1==t.questionsTimered,onClick:function(t){return e.updateQuizBooleanField("questionsTimered",t)}})),i.a.createElement(Lt,{label:"Image"},i.a.createElement("input",{type:"file",onChange:e.updateField,className:"form-control",name:"image"}),void 0!=t.image&&""!=t.image.trim()?t.image.startsWith("data:image")?i.a.createElement("img",{width:"100",height:"100",src:t.image}):i.a.createElement("img",{width:"100",height:"100",src:be()+t.image}):null),t.id?i.a.createElement(Lt,{label:"Record ID"},t.id):null)},qa=function(e){if(!e.name)return null;var t=e.name.includes("data:image")?e.name:be()+e.name;return i.a.createElement("div",null,i.a.createElement("img",{width:"100",src:t}),i.a.createElement("a",{style:{marginLeft:"5px"},onClick:function(t){return e.remove(e.index)},className:"btn btn-danger btn-sm"},i.a.createElement("i",{className:"fas fa-times"})))},Pa=function e(){Object(m.a)(this,e),this.quiz=new z,this.saved=!1,this.showChoices=!0},Ta=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).quizService=void 0,n.state=new Pa,n.validateQuizFromProps=function(){if(n.props.location.state){var e=n.props.location.state.quiz;e&&n.setState({quiz:Object.assign(new z,e)})}},n.reset=function(){n.showConfirmationDanger("Reset Quiz?").then((function(e){e&&n.setState({quiz:new z})}))},n.updateQuizBooleanField=function(e,t){var a=n.state.quiz;a[e]=t,n.setState({quiz:a})},n.updateQuizField=function(e){var t=e.target.name,a=e.target.value,r=n.state.quiz;"file"==e.target.type&&Te(e.target).then((function(e){r[t]=e,n.setState({quiz:r})}));r[t]=a,n.setState({quiz:r})},n.addQuestion=function(e){var t=n.state.quiz;void 0==t.questions&&(t.questions=[]);var a=ja.publicQuizQuestion();a.statement="Question "+(t.questions.length+1),t.questions.push(a),n.setState({quiz:t})},n.setAnswer=function(e,t){var a=n.state.quiz;void 0!=a.questions&&(a.questions[t].answerCode=e,n.setState({quiz:a}))},n.updateQuestionField=function(e){var t,a=e.target;if(a){var r=parseInt(null!==(t=a.dataset.index)&&void 0!==t?t:"0"),i=n.state.quiz;void 0!=i.questions&&("image"==a.name?Te(a).then((function(e){i.questions&&e.startsWith("data:image")&&(i.questions[r][a.name]=e,n.setState({quiz:i}))})):(i.questions[r][a.name]=a.value,n.setState({quiz:i})))}},n.updateChoiceField=function(e){var t,a,r,i=e.target;if(i){var o=parseInt(null!==(t=i.dataset.questionindex)&&void 0!==t?t:"0"),l=parseInt(null!==(a=i.dataset.index)&&void 0!==a?a:"0"),s=n.state.quiz,c=null!==(r=s.questions)&&void 0!==r?r:[],u=c[o];0!=c.length&&u.choices&&("image"==i.name?Te(i).then((function(e){u.choices&&e.startsWith("data:image")&&(u.choices[l][i.name]=e,n.setState({quiz:s}))})):(u.choices[l][i.name]=i.value,n.setState({quiz:s})))}},n.removeQuestion=function(e){var t=n.state.quiz;void 0!=t.questions&&(t.questions.splice(e,1),n.showConfirmationDanger("Remove Question?").then((function(e){e&&n.setState({quiz:t})})))},n.removeQuestionImage=function(e){var t=n.state.quiz;t.questions&&(t.questions[e]&&(t.questions[e].nulledFields=["image"],t.questions[e].image=void 0),n.showConfirmationDanger("Remove Question Image?").then((function(e){e&&n.setState({quiz:t})})))},n.removeChoiceImage=function(e,t){var a,r=n.state.quiz,i=null!==(a=r.questions)&&void 0!==a?a:[],o=i[t];0!=i.length&&o.choices&&o.choices[e]&&(o.choices[e].image=void 0,o.choices[e].nulledFields=["image"],n.showConfirmationDanger("Remove Choice Image?").then((function(e){e&&n.setState({quiz:r})})))},n.removeAllQuestion=function(e){var t=n.state.quiz;n.showConfirmationDanger("Remove All Question?").then((function(e){t.questions=[],e&&n.setState({quiz:t})}))},n.submitQuiz=function(e){e.preventDefault(),console.debug("QUIZ: ",n.state.quiz),n.showConfirmation(n.state.quiz.id?"Update Quiz?":"Create Quiz?").then((function(e){e&&n.doSubmitQuiz()}))},n.doSubmitQuiz=function(){n.commonAjaxWithProgress(n.quizService.submit,n.dataSaved,n.showCommonErrorAlert,n.state.quiz)},n.dataSaved=function(e){var t;(n.showInfo("Success"),e.quiz)&&n.props.history.push("/quizmanagement/detail/"+(null===(t=e.quiz)||void 0===t?void 0:t.id))},n.showChoices=function(){n.setState({showChoices:!0})},n.hideChoices=function(){n.setState({showChoices:!1})},n.quizService=n.getServices().quizService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),this.validateQuizFromProps(),document.title="Quiz Form"}},{key:"render",value:function(){var e,t=this,a=this.state.quiz,n=null!==(e=a.questions)&&void 0!==e?e:[];return i.a.createElement("div",{id:"QuizManagementForm",className:"container-fluid section-body"},i.a.createElement("h2",null,"Quiz Form"),i.a.createElement("form",{onSubmit:this.submitQuiz},i.a.createElement(oa,{title:"Quiz Form"}," ",i.a.createElement(Ia,{quiz:a,updateQuizBooleanField:this.updateQuizBooleanField,updateField:this.updateQuizField})),i.a.createElement("div",{className:"btn-group",style:{marginBottom:"5px",marginTop:"5px"}},i.a.createElement(et,{className:"btn btn-secondary",iconClassName:"fas fa-plus",onClick:this.addQuestion},"Question"),i.a.createElement(et,{className:"btn btn-danger",iconClassName:"fas fa-times",onClick:this.removeAllQuestion},"Remove All Question"),i.a.createElement(et,{className:"btn btn-warning",onClick:this.reset},"Reset")),i.a.createElement(oa,{title:"Quiz Questions :"+n.length,footerContent:a.questions&&a.questions.length>0?i.a.createElement("input",{type:"submit",className:"btn btn-success",value:a.id?"Update":"Create"}):null},i.a.createElement(et,{show:1==this.state.showChoices,onClick:this.hideChoices,iconClassName:"fas fa-angle-up"},"Hide Choices"),i.a.createElement(et,{show:0==this.state.showChoices,onClick:this.showChoices,iconClassName:"fas fa-angle-down"},"Show Choices"),i.a.createElement("p",null),n.map((function(e,n){return i.a.createElement(Da,{key:"quest-form-"+n,questionsTimered:a.questionsTimered,showChoices:t.state.showChoices,setAnswer:t.setAnswer,question:e,index:n,updateField:t.updateQuestionField,updateChoiceField:t.updateChoiceField,remove:t.removeQuestion,removeImage:t.removeQuestionImage,removeChoiceImage:t.removeChoiceImage})}))),i.a.createElement("p",null)))}}]),a}(Re),Aa=Object(p.f)(Object(we.b)(Oe)(Ta)),La=function e(){Object(m.a)(this,e),this.quiz=void 0,this.loading=!1},Ra=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r,i;return Object(m.a)(this,a),(i=t.call(this,e,!0)).quizService=void 0,i.state=new La,i.startLoading=function(e){Object(Je.a)((n=Object(c.a)(i),Object(Ze.a)(a.prototype)),"startLoading",n).call(n,e),i.setState({loading:!0})},i.endLoading=function(){Object(Je.a)((r=Object(c.a)(i),Object(Ze.a)(a.prototype)),"endLoading",r).call(r),i.setState({loading:!1})},i.loadQuiz=function(){i.commonAjaxWithProgress(i.quizService.getQuiz,i.dataLoaded,i.showCommonErrorAlert,parseInt(i.getId()))},i.dataLoaded=function(e){i.setState({quiz:e.quiz})},i.getId=function(){return i.props.match.params.id},i.editRecord=function(e){var t=Object(c.a)(i);i.showConfirmation("Edit Quiz?").then((function(e){e&&t.props.history.push({pathname:"/quizmanagement/form",state:{quiz:t.state.quiz}})}))},i.deleteRecord=function(e){var t=Object(c.a)(i);i.showConfirmationDanger("Delete Quiz?").then((function(e){e&&t.doDeleteQuiz()}))},i.doDeleteQuiz=function(){i.state.quiz&&i.commonAjaxWithProgress(i.quizService.deleteQuiz,i.dataDeleted,i.showCommonErrorAlert,i.state.quiz.id)},i.dataDeleted=function(e){i.showInfo("Record Deleted"),i.setState({quiz:void 0})},i.quizService=i.getServices().quizService,i}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),this.loadQuiz(),document.title="Quiz Detail"}},{key:"render",value:function(){var e;if(!this.state.quiz)return i.a.createElement("div",{id:"QuizDetail",className:"container-fluid"},i.a.createElement("h2",null,"Quiz Detail"),this.state.loading?i.a.createElement(Ue,null):i.a.createElement(Wt,{children:"No Data"}));var t=Object.assign(new z,this.state.quiz),a=null!==(e=t.questions)&&void 0!==e?e:[],n=t.questionsTimered;return i.a.createElement("div",{id:"QuizDetail",className:"section-body container-fluid"},i.a.createElement("h2",null,"Quiz Detail"),i.a.createElement("div",null,i.a.createElement("div",{className:"alert alert-info"},i.a.createElement(Lt,{label:"Title"},t.title),i.a.createElement(Lt,{label:"Description"},t.description),i.a.createElement(Lt,{label:"Duration "},It(t.duration)),i.a.createElement(Lt,{label:"Active"},t.active?"YES":"NO"),i.a.createElement(Lt,{label:"Repeatable"},t.repeatable?"YES":"NO"),i.a.createElement(Lt,{label:"Show All Question"},t.showAllQuestion?"YES":"NO"),i.a.createElement(Lt,{label:"Qestions Timered"},t.questionsTimered?"YES":"NO"),i.a.createElement(Lt,null,i.a.createElement(et,{style:{marginRight:"5px"},iconClassName:"fas fa-edit",className:"btn btn-warning",onClick:this.editRecord},"Edit"),i.a.createElement(et,{className:"btn btn-danger",iconClassName:"fas fa-times",onClick:this.deleteRecord},"Delete")),i.a.createElement(Lt,{label:"Image"},t.image?i.a.createElement("img",{height:"100",width:"100",src:be()+t.image}):"No Image")),a.map((function(e,t){return i.a.createElement(za,{questionTimered:n,number:t+1,key:"qdl-"+t,question:e})}))))}}]),a}(Re),za=function(e){var t,a=e.question,n=null!==(t=a.choices)&&void 0!==t?t:[];return i.a.createElement(oa,{attributes:{style:{marginBottom:"5px"}}},i.a.createElement("h4",null,e.number,". ",a.statement),i.a.createElement(Lt,{show:e.questionTimered},i.a.createElement("i",{className:"fas fa-clock"}),"\xa0",It(a.duration)),a.image?i.a.createElement("img",{src:be()+a.image,height:"100"}):null,n.map((function(e,t){var n=e.answerCode==a.answerCode;return i.a.createElement("div",{key:"qdc-"+a.id+t},i.a.createElement("b",{className:n?"border rounded border-success text-success":"text-dark"},e.answerCode),i.a.createElement("span",{style:{marginLeft:"5px"}},e.statement),i.a.createElement("p",null),e.image?i.a.createElement("img",{src:be()+e.image,height:"100"}):null)})))},xa=Object(p.f)(Object(we.b)(Oe)(Ra)),Ma=(a(41),function e(){Object(m.a)(this,e),this.quizList=new Array,this.loading=!1,this.filter=new nt,this.totalData=0}),Fa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r,i;return Object(m.a)(this,a),(i=t.call(this,e,"Take Quiz",!0)).publicQuizService=void 0,i.state=new Ma,i.startLoading=function(e){i.setState({loading:!0}),Object(Je.a)((n=Object(c.a)(i),Object(Ze.a)(a.prototype)),"startLoading",n).call(n,e)},i.endLoading=function(){i.setState({loading:!1}),Object(Je.a)((r=Object(c.a)(i),Object(Ze.a)(a.prototype)),"endLoading",r).call(r)},i.dataLoaded=function(e){var t;i.setState({quizList:null!==(t=e.entities)&&void 0!==t?t:[],totalData:e.totalData})},i.loadRecords=function(){if(!i.state.loading){var e=i.state.filter;e.availabilityCheck=!0,i.commonAjaxWithProgress(i.publicQuizService.getQuizList,i.dataLoaded,i.showCommonErrorAlert,e)}},i.loadRecordsWithFilter=function(e){if(!i.state.loading){var t=i.state.filter;t.page=0,t.fieldsFilter=e,i.setState({filter:t}),i.loadRecords()}},i.loadRecordsAtPage=function(e){if(!i.state.loading){var t=i.state.filter;t.page=e,i.setState({filter:t}),i.loadRecords()}},i.takeQuiz=function(e){i.showConfirmation("Take Quiz: "+e.title+"?").then((function(t){t&&i.props.history.push({pathname:"/quiz/challenge/"+e.id})}))},i.publicQuizService=i.getServices().publicQuizService,i}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(Je.a)(Object(Ze.a)(a.prototype),"componentDidMount",this).call(this),this.loadRecords()}},{key:"render",value:function(){var e,t,a,n,r=this.state.filter,o=(null!==(e=r.limit)&&void 0!==e?e:0)*(null!==(t=r.page)&&void 0!==t?t:0);return i.a.createElement("div",{id:"PublicQuizMain",style:{marginTop:"20px"},className:"quiz-wrapper container-fluid"},i.a.createElement("h2",null,"Take Quiz"),i.a.createElement("div",{className:"alert alert-info"},"Challenge your self"),i.a.createElement(ot,{activePage:null!==(a=r.page)&&void 0!==a?a:0,limit:null!==(n=r.limit)&&void 0!==n?n:5,totalData:this.state.totalData,onClick:this.loadRecordsAtPage}),i.a.createElement(Na,{loading:this.state.loading,onFilter:this.loadRecordsWithFilter,quizOnClick:this.takeQuiz,startingNumber:o,quizList:this.state.quizList}))}}]),a}(Xe),_a=Object(p.f)(Object(we.b)(Oe)(Fa)),Qa=function e(){Object(m.a)(this,e)},Ua=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).tick=0,n.state=new Qa,n.timeout=void 0,n.progressRef=i.a.createRef(),n.timerStringRef=i.a.createRef(),n.stop=!1,n.updateTick=function(){n.resetTimeout();var e=n.props.duration,t=n.tick;t>=e?n.updateTickWithCallback(t,n.props.onTimeout):(t+=.1,n.updateTickWithCallback(t,n.updateTimerLoop))},n.updateTickWithCallback=function(e,t){n.tick=e;var a=100-100*n.tick/n.props.duration+"%";if(n.progressRef.current&&(n.progressRef.current.style.width=a),n.timerStringRef.current){var r=It(n.props.duration-Math.ceil(n.tick));n.timerStringRef.current.innerHTML="<strong>"+r+"</strong>"}t()},n.stopTimer=function(){console.debug("STOP TIMER"),n.stop=!0},n.resetTick=function(){n.updateTickWithCallback(0,n.updateTimerLoop)},n.resetTimeout=function(){n.timeout&&clearTimeout(n.timeout)},n.updateTimerLoop=function(){1!=n.stop?n.timeout=setTimeout(n.updateTick,100):console.debug("WILL update timer but it has been stopped..")},n}return Object(s.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"container-fluid text-center"},i.a.createElement("p",null,i.a.createElement("i",{className:"fas fa-stopwatch"}),"\xa0",i.a.createElement("span",{ref:this.timerStringRef})),i.a.createElement("div",{className:"progress",style:{height:"5px"}},i.a.createElement("div",{ref:this.progressRef,style:{transitionDuration:"500ms",width:"0%"},className:"bg-dark"})),i.a.createElement("p",null))}}]),a}(r.Component),Ba=function e(){Object(m.a)(this,e),this.questionIndex=0,this.showAllQuestion=!0},Ya=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).questionTimerRef=i.a.createRef(),n.state=new Ba,n.updateQuestionIndex=function(e){console.debug("updateQuestionIndex: ",e),n.setQuestionIndex(e)},n.getCurrentQuestion=function(){return n.props.quiz.questions&&n.props.quiz.questions.length>n.state.questionIndex?n.props.quiz.questions[n.state.questionIndex]:(n.setState({questionIndex:0}),n.props.quiz.questions[0])},n.toggleQuestionView=function(e){n.setState({showAllQuestion:e,questionIndex:0})},n.nextQuestion=function(){if(n.props.quiz.questions.length-1!=n.state.questionIndex){var e=n.state.questionIndex+1;n.setQuestionIndex(e)}else n.props.onTimeout()},n.setQuestionIndex=function(e){n.setState({questionIndex:e},(function(){n.resetTimer();try{n.props.setChoice(n.props.quiz.questions[e].answerCode,e)}catch(t){}}))},n.updateTimer=function(){n.questionTimerRef.current&&n.questionTimerRef.current.updateTimerLoop()},n.resetTimer=function(){n.questionTimerRef.current&&n.questionTimerRef.current.resetTick()},n.setChoice=function(e,t){if(n.props.setChoice(e,t),n.props.questionTimered)if(n.props.quiz.questions.length>t+1){var a=t+1;n.setQuestionIndex(a)}else n.onSubmit();else if(!n.props.quiz.showAllQuestion)if(n.props.quiz.questions.length>t+1){var r=t+1;n.setQuestionIndex(r)}else n.onSubmit()},n.onSubmit=function(){n.questionTimerRef.current&&n.questionTimerRef.current.stopTimer(),n.props.submit()},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.updateTimer()}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.quiz,o=null!==(e=n.questions)&&void 0!==e?e:[],l=0==n.showAllQuestion?n.showAllQuestion:this.state.showAllQuestion;return i.a.createElement("div",null,i.a.createElement("h1",null,i.a.createElement("i",{className:"fas fa-feather-alt"}),"\xa0",n.title),l?o.map((function(e,a){return i.a.createElement(Ha,{setChoice:t.setChoice,index:a,question:e,key:"pqqs-"+a})})):i.a.createElement(r.Fragment,null,a.questionTimered?i.a.createElement(Ua,{display:"progress",onTimeout:this.nextQuestion,ref:this.questionTimerRef,duration:this.getCurrentQuestion().duration}):null,i.a.createElement(Wa,{enabled:0==n.questionsTimered,updateQuestionIndex:this.updateQuestionIndex,questionCount:a.quiz.questions.length,index:this.state.questionIndex}),i.a.createElement(Ha,{setChoice:this.setChoice,index:this.state.questionIndex,question:this.getCurrentQuestion()}),i.a.createElement(Wa,{enabled:0==n.questionsTimered,updateQuestionIndex:this.updateQuestionIndex,questionCount:a.quiz.questions.length,index:this.state.questionIndex})),i.a.createElement(at,{title:"Option"},i.a.createElement(et,{onClick:this.onSubmit,className:"btn btn-primary"},"Submit")))}}]),a}(r.Component),Wa=function(e){var t=e.enabled;return i.a.createElement("div",null,i.a.createElement("p",null),i.a.createElement("div",{className:"row container-fluid"},i.a.createElement("div",{className:"col-5 text-center"},i.a.createElement(bt,{className:"btn btn-secondary",children:"Previous",onClick:function(t){return e.updateQuestionIndex(e.index-1)},show:t&&e.index>0,iconClassName:"fas fa-angle-left"})),i.a.createElement("div",{className:"col-2 text-center"},i.a.createElement("p",null,"Question: ",e.index+1," of ",e.questionCount)),i.a.createElement("div",{className:"col-5 text-center"},i.a.createElement(bt,{className:"btn btn-secondary",children:"Next",onClick:function(t){return e.updateQuestionIndex(e.index+1)},show:t&&e.index<e.questionCount-1,iconClassName:"fas fa-angle-right"}))),i.a.createElement("p",null))},Ha=function(e){var t,a=e.question,n=null!==(t=a.choices)&&void 0!==t?t:[];return i.a.createElement(oa,{className:"bg-light",attributes:{style:{marginBottom:"5px"}}},i.a.createElement("div",{className:"row"},i.a.createElement("h2",{className:"col-1 text-dark"},e.index+1),i.a.createElement("div",{className:"col-11"},i.a.createElement("h4",{className:"text-dark"},a.statement),a.image?i.a.createElement("img",{height:"150",src:be()+a.image}):null,i.a.createElement("hr",null),n.map((function(t,n){return i.a.createElement(Va,{correctChoice:a.correctChoice,answered:t.answerCode==a.answerCode,setChoice:function(t){return e.setChoice(t,e.index)},key:"pqci-"+n+"-of-"+e.index,choice:t,index:n})})))))},Va=function(e){var t=e.choice,a=e.answered?"btn btn-secondary":"btn btn-outline-secondary";return void 0!=e.correctChoice&&(t.answerCode==e.correctChoice?a=e.answered?"btn btn-primary":"btn btn-success":e.answered&&(a="btn btn-danger")),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1 text-left"},i.a.createElement("a",{onClick:function(a){e.setChoice(t.answerCode)},className:a}," ",i.a.createElement("strong",null,t.answerCode))),i.a.createElement("div",{className:"col-11 "},i.a.createElement("p",null,t.statement),t.image?i.a.createElement("img",{height:"150",src:be()+t.image}):null))},Xa=function e(){Object(m.a)(this,e),this.tick=0},Ga=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=new Xa,n.timeout=void 0,n.updateTick=function(){n.resetTimeout();var e=n.props.duration,t=n.state.tick;t>=e?n.setState({tick:0},n.props.onTimeout):(t++,n.setState({tick:t},n.updateTimerLoop))},n.resetTick=function(){n.setState({tick:0},n.updateTimerLoop)},n.resetTimeout=function(){n.timeout&&clearTimeout(n.timeout)},n.updateTimerLoop=function(){n.timeout=setTimeout(n.updateTick,1e3)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props;return i.a.createElement(Ka,{latestUpdate:this.props.latestUpdate,duration:e.duration,tick:this.state.tick})}}]),a}(r.Component),Ka=function(e){var t,a=e.duration-e.tick,n=a%2==0?"fas fa-hourglass-end":"fas fa-hourglass-start";return t=a<=15?"bg-danger text-warning":"bg-warning ",i.a.createElement("div",{className:t,style:{fontSize:"1.7em",right:"10px",padding:"10px",position:"fixed",zIndex:1e3}},i.a.createElement("span",{style:{marginRight:"10px"}},i.a.createElement("i",{className:n})),i.a.createElement("span",null,i.a.createElement("b",null,It(a))),e.latestUpdate?i.a.createElement("p",{style:{fontSize:"0.5em"}},"Last Update: ",e.latestUpdate.toLocaleString()):null)},Ja=function(e){return i.a.createElement(Wt,{style:{marginTop:"20px"}},i.a.createElement("h3",null,"Error While Submitting Answer"),i.a.createElement(bt,{onClick:e.retrySubmit,iconClassName:"fas fa-redo"},"Retry"))},Za=function(e){return i.a.createElement("div",{style:{marginTop:"20px"},className:"container-fluid"},i.a.createElement(Wt,null,i.a.createElement("i",{style:{marginRight:"5px"},className:"fas fa-exclamation-circle"})," Timeout"))},$a=function(e){var t=e.quiz;return i.a.createElement("div",{style:{marginTop:"20px",paddingTop:"20px"},className:"text-center quiz-wrapper container-fluid"},i.a.createElement("img",{height:"250",src:t.image?be()+t.image:"/logo192.png",className:"rounded-circle"}),i.a.createElement("h3",null,i.a.createElement("strong",null,t.title)),i.a.createElement("p",null,"Duration: ",It(t.duration)),i.a.createElement("p",null,"Question: ",t.getQuestionCount()),i.a.createElement("p",null),i.a.createElement(bt,{className:"btn btn-dark",onClick:e.start,iconClassName:"fas fa-play"},"Start"))},en=function(e){var t=e.quizResult;return i.a.createElement(at,{title:"Result"},i.a.createElement("h2",{className:"text-center"},"Your Score ",i.a.createElement("strong",{className:"text-primary"},t.score.toFixed(2))),i.a.createElement("h4",{className:"text-center text-success"},"Correct Answer ",t.correctAnswer),i.a.createElement("h4",{className:"text-center text-danger"},"Wrong Answer ",t.wrongAnswer),i.a.createElement("div",{className:"text-center"},e.quiz.repeatable?i.a.createElement(et,{onClick:function(){window.location.reload()},iconClassName:"fas fa-redo"},"Reload Try Again"):i.a.createElement("h4",null,"Thanks for Participating")))},tn=function(e,t){var a=setTimeout((function(){e(),clearTimeout(a)}),t)},an=function e(){Object(m.a)(this,e),this.quiz=void 0,this.loading=!1,this.quizResult=void 0,this.timeout=!1,this.running=!1,this.errorSubmit=!1,this.latestUpdate=void 0},nn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r,o;return Object(m.a)(this,a),(o=t.call(this,e,!0)).quizTemp=void 0,o.publicQuizService=void 0,o.state=new an,o.timerRef=i.a.createRef(),o.quizBodyRef=i.a.createRef(),o.startLoading=function(e){Object(Je.a)((n=Object(c.a)(o),Object(Ze.a)(a.prototype)),"startLoading",n).call(n,e),o.setState({loading:!0})},o.endLoading=function(){Object(Je.a)((r=Object(c.a)(o),Object(Ze.a)(a.prototype)),"endLoading",r).call(r),o.setState({loading:!1})},o.setWsUpdateHandlerOnQuestionChange=function(){o.setWsUpdateHandler((function(e){"QUIZ_ANSWER_UPDATE"==e.type&&e.date&&o.setState({latestUpdate:new Date(e.date)})}))},o.start=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=o.state.quiz;t&&(e&&(t.startedDate=new Date),o.setState({running:!0,quiz:t},(function(){o.beginTimer(),o.sendStartUpdate()})))},o.beginTimer=function(){tn((function(){o.timerRef.current?o.timerRef.current.updateTimerLoop():console.debug("TIME NOT READY")}),500)},o.setFailedTimeout=function(){o.doSubmitAnswer(),o.setState({quiz:void 0,timeout:!0})},o.dataLoaded=function(e){var t=e.quizHistory;if(t&&e.quiz){var a=e.quiz,n=o.synchronizeLatestHistory(a,t);n&&o.setState({quiz:n,quizResult:void 0},(function(){var e;o.start(!1),o.updateQuestionIndex(null!==(e=n.maxQuestionNumber)&&void 0!==e?e:1)}))}else o.setState({quiz:Object.assign(new z,e.quiz),quizResult:void 0})},o.synchronizeLatestHistory=function(e,t){var a,n;e.duration=null!==(a=t.remainingDuration)&&void 0!==a?a:e.duration,e.startedDate=t.started;var r=null!==(n=t.maxQuestionNumber)&&void 0!==n?n:1;if(t.updated&&e.questionsTimered){var i=r-1,l=Math.ceil(((new Date).getTime()-new Date(t.updated).getTime())/1e3),s=e.questions[i].duration,c=s-l;if(console.debug("actual duration: ",s,"-  ",l," = ",c),c>0)e.questions[i].duration=c,console.debug("SET question number ",r," remaining second: ",c);else{if(r>=e.questions.length)return void o.setFailedTimeout();r++}}return e.maxQuestionNumber=r,Object.assign(new z,e)},o.updateQuestionIndex=function(e){var t=o.state.quiz;if(t&&!(t.questions.length<e))var a=setTimeout((function(){o.quizBodyRef.current?o.quizBodyRef.current.updateQuestionIndex(e-1):console.debug("Question Index Not Updated"),clearTimeout(a)}),500)},o.loadQuiz=function(){o.commonAjaxWithProgress(o.publicQuizService.getQuiz,o.dataLoaded,o.showCommonErrorAlert,o.props.match.params.id)},o.goBack=function(e){o.showConfirmation("Leave Page?").then((function(e){e&&o.props.history.push("/quiz")}))},o.setChoice=function(e,t){var a=o.state.quiz;if(a&&!o.state.quizResult&&a&&0!=a.questions.length)try{a.questions[t].answerCode=e,a.questions[t].entered=!0,o.setState({quiz:Object.assign(new z,a)},(function(){return o.sendUpdateQuizHistory(Object.assign(new z,a))}))}catch(n){}},o.sendUpdateQuizHistory=function(e){o.publicQuizService.sendUpdateAnswer(e,o.props.requestId)},o.sendStartUpdate=function(){o.state.quiz&&o.publicQuizService.sendUpdateStart(o.state.quiz,o.props.requestId)},o.quizSubmitted=function(e){var t;o.setState({errorSubmit:!1,timeout:!1,quizResult:e.quizResult,quiz:Object.assign(new z,null===(t=e.quizResult)||void 0===t?void 0:t.submittedQuiz)})},o.resetQuiz=function(){var e=o.state.quiz;e&&(e.resetCorrectChoices(),o.setState({quizResult:void 0,tick:0,quiz:Object.assign(new z,e),running:!1}))},o.submitAnwser=function(){var e=o.state.quiz;e&&!o.state.quizResult&&(e.questionsTimered?o.doSubmitAnswer():Object.assign(new z,e).allQuestionHasBeenAnswered()?o.showConfirmation("Submit answers?").then((function(e){e&&o.doSubmitAnswer()})):o.showConfirmationDanger("Answers are not complete. Continue to submit answers?").then((function(e){e&&o.doSubmitAnswer()})))},o.doSubmitAnswer=function(){var e=o.state.quiz;e&&(e.submittedDate=new Date,o.commonAjaxWithProgress(o.publicQuizService.submitAnswers,o.quizSubmitted,(function(){return o.quizNotSubmitted(Object.assign(new z,e))}),e),o.setState({quiz:void 0}))},o.quizNotSubmitted=function(e){o.quizTemp=e,o.showCommonErrorAlert("Error submitting quiz"),o.setState({errorSubmit:!0})},o.retrySubmit=function(){0!=o.state.errorSubmit&&(o.setState({quiz:o.quizTemp},o.doSubmitAnswer),o.quizTemp=void 0)},o.publicQuizService=o.getServices().publicQuizService,o}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Quiz Challenge",this.loadQuiz(),this.setWsUpdateHandlerOnQuestionChange()}},{key:"componentWillUnmount",value:function(){this.setWsUpdateHandler(void 0)}},{key:"render",value:function(){var e;if(this.state.errorSubmit)return i.a.createElement(Ja,{retrySubmit:this.retrySubmit});var t={marginTop:"20px"},a=Object.assign(new z,this.state.quiz);if(!this.state.loading&&0==a.getQuestionCount())return i.a.createElement(Wt,{style:t,children:"Quiz in currently unavailable"});if(this.state.timeout)return i.a.createElement(Za,null);if(this.state.loading)return i.a.createElement("div",{style:t,className:"quiz-wrapper container-fluid"},i.a.createElement(Ue,null));if(a&&!this.state.running)return i.a.createElement($a,{quiz:a,start:this.start});a.showAllQuestion=a.showAllQuestion||void 0!=this.state.quizResult;var n=1==(null===a||void 0===a?void 0:a.questionsTimered)&&void 0==this.state.quizResult;return i.a.createElement("div",{style:t,className:"quiz-wrapper container-fluid"},!this.state.quizResult&&a&&0==a.questionsTimered?i.a.createElement(Ga,{latestUpdate:this.state.latestUpdate,ref:this.timerRef,onTimeout:this.setFailedTimeout,duration:null!==(e=a.duration)&&void 0!==e?e:0}):null,i.a.createElement(et,{className:"btn btn-outline-dark btn-sm",onClick:this.goBack,iconClassName:"fas fa-angle-left"},"Back"),i.a.createElement("p",null),this.state.quizResult?i.a.createElement(en,{quiz:a,quizResult:this.state.quizResult}):null,a?i.a.createElement(Ya,{result:this.state.quizResult,ref:this.quizBodyRef,questionTimered:n,onTimeout:this.setFailedTimeout,submit:this.submitAnwser,setChoice:this.setChoice,quiz:a}):i.a.createElement(Wt,null,"No Data"))}}]),a}(Re),rn=Object(p.f)(Object(we.b)(Oe)(nn)),on=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).user=void 0,e.started=void 0,e.ended=void 0,e.quizDuration=void 0,e.userDuration=void 0,e.quiz=void 0,e.quizRepeatable=void 0,e.score=void 0,e.created=void 0,e.updated=void 0,e.remainingDuration=void 0,e.maxQuestionNumber=void 0,e.requestId=void 0,e.token=void 0,e}return a}(b),ln=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e,t;return 0==this.props.show?null:i.a.createElement("div",{style:this.props.style,className:"alert alert-warning "+(null!==(e=this.props.className)&&void 0!==e?e:"")},null!==(t=this.props.children)&&void 0!==t?t:"Error Occured")}}]),a}(r.Component),sn=function e(){Object(m.a)(this,e),this.histories=new Array,this.loading=!1,this.filter=new nt,this.totalData=0},cn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).publicQuizService=void 0,n.state=new sn,n.startLoading=function(){n.setState({loading:!0})},n.endLoading=function(){n.setState({loading:!1})},n.dataLoaded=function(e){var t;n.setState({histories:null!==(t=e.entities)&&void 0!==t?t:[],totalData:e.totalData})},n.loadRecords=function(){n.state.loading||n.commonAjax(n.publicQuizService.getHistories,n.dataLoaded,n.showCommonErrorAlert,n.state.filter)},n.loadRecordsAtPage=function(e){var t=n.state.filter;t.page=e,n.setState({filter:t}),n.loadRecords()},n.publicQuizService=n.getServices().publicQuizService,document.title="Quiz History",n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(Je.a)(Object(Ze.a)(a.prototype),"componentDidMount",this).call(this),this.loadRecords()}},{key:"render",value:function(){var e,t,a,n,r,o=this.getLoggedUser();if(!o)return null;var l=this.state.filter,s=(null!==(e=l.limit)&&void 0!==e?e:0)*(null!==(t=l.page)&&void 0!==t?t:0);return i.a.createElement("div",{id:"QuizHistoryPage",className:"section-body container-fluid"},i.a.createElement("h2",null,"Quiz History"),i.a.createElement("div",{className:"alert alert-info"},"Welcome, ",i.a.createElement("strong",null,o.displayName,"  "),i.a.createElement("p",null),i.a.createElement("p",{className:"badge badge-dark"},null===(a=o.role)||void 0===a?void 0:a.toLowerCase().split("_")[1])),i.a.createElement(ot,{activePage:null!==(n=l.page)&&void 0!==n?n:0,limit:null!==(r=l.limit)&&void 0!==r?r:5,totalData:this.state.totalData,onClick:this.loadRecordsAtPage}),this.state.loading?i.a.createElement(oa,null,i.a.createElement(Ue,null)):i.a.createElement(un,{loadRecords:this.loadRecords,startingNumber:s,histories:this.state.histories}),i.a.createElement("p",null))}}]),a}(Re),un=function(e){return 0==e.histories.length?i.a.createElement(oa,null,i.a.createElement(ln,null,"No Data"),i.a.createElement(bt,{iconClassName:"fas fa-sync-alt",className:"btn btn-dark",onClick:e.loadRecords},"Reload")):i.a.createElement(oa,null,i.a.createElement(ya,null,i.a.createElement("table",{className:"table table-striped"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"No"),i.a.createElement("th",null,"Quiz"),i.a.createElement("th",null,"Quiz Duration"),i.a.createElement("th",null,"Start"),i.a.createElement("th",null,"End"),i.a.createElement("th",null,"User Duration"),i.a.createElement("th",null,"Score"),i.a.createElement("th",null,"Action"))),i.a.createElement("tbody",null,e.histories.map((function(t,a){var n,r,o,l;return t=Object.assign(new on,t),i.a.createElement("tr",{key:"quiz-public-list-"+a},i.a.createElement("td",null,a+e.startingNumber+1),i.a.createElement("td",null,null===(n=t.quiz)||void 0===n?void 0:n.title),i.a.createElement("td",null,t.quizDuration),i.a.createElement("td",null,t.started?new Date(t.started).toLocaleString():"-"),i.a.createElement("td",null,t.ended?new Date(t.ended).toLocaleString():"-","  "),i.a.createElement("td",null,t.userDuration," "),i.a.createElement("td",null,null===(r=t.score)||void 0===r?void 0:r.toFixed(2)," "),i.a.createElement("td",null,(null===(o=t.quiz)||void 0===o?void 0:o.repeatable)?i.a.createElement(bt,{attributes:{target:"_blank"},to:"/quiz/challenge/"+(null===(l=t.quiz)||void 0===l?void 0:l.id),iconClassName:"fas fa-redo"}):"Not Repeatable"))}))))),i.a.createElement("p",null),i.a.createElement(bt,{iconClassName:"fas fa-sync-alt",className:"btn btn-dark",onClick:e.loadRecords},"Reload"))},dn=Object(p.f)(Object(we.b)(Oe)(cn)),mn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).ref=i.a.createRef(),n.setSidebarMenus=function(e){n.props.setSidebarMenus(e)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(r.Fragment,null,i.a.createElement(p.c,null,i.a.createElement(p.a,{exact:!0,path:"/login",render:function(e){return i.a.createElement(Ve,null)}}),i.a.createElement(p.a,{exact:!0,path:"/home",render:function(e){return i.a.createElement(na,null)}}),i.a.createElement(p.a,{exact:!0,path:"/",render:function(e){return i.a.createElement(na,null)}}),i.a.createElement(p.a,{exact:!0,path:"/about",render:function(e){return i.a.createElement(Ea,null)}}),i.a.createElement(p.a,{exact:!0,path:"/management",render:function(t){return i.a.createElement(ta,{setSidebarMenus:e.setSidebarMenus})}}),i.a.createElement(p.a,{exact:!0,path:"/management/:code",render:function(t){return i.a.createElement(ta,{setSidebarMenus:e.setSidebarMenus})}})),i.a.createElement(fn,null),i.a.createElement(hn,null),i.a.createElement(vn,null),i.a.createElement(pn,null))}},{key:"componentDidMount",value:function(){}}]),a}(Re),pn=function(e){return i.a.createElement(p.c,null,i.a.createElement(p.a,{exact:!0,path:"/dashboard",render:function(e){return i.a.createElement(Ke,null)}}),i.a.createElement(p.a,{exact:!0,path:"/dashboard/quizhistory",render:function(e){return i.a.createElement(dn,null)}}))},fn=function(e){return i.a.createElement(p.c,null,i.a.createElement(p.a,{exact:!0,path:"/settings",render:function(e){return i.a.createElement(ia,null)}}),i.a.createElement(p.a,{exact:!0,path:"/settings/user-profile",render:function(e){return i.a.createElement(pa,null)}}),i.a.createElement(p.a,{exact:!0,path:"/settings/app-profile",render:function(e){return i.a.createElement(ga,null)}}))},hn=function(e){return i.a.createElement(p.c,null,i.a.createElement(p.a,{exact:!0,path:"/quiz",render:function(e){return i.a.createElement(_a,null)}}),i.a.createElement(p.a,{exact:!0,path:"/quiz/challenge/:id",render:function(e){return i.a.createElement(rn,null)}}))},vn=function(e){return i.a.createElement(p.c,null,i.a.createElement(p.a,{exact:!0,path:"/quizmanagement",render:function(e){return i.a.createElement(Sa,null)}}),i.a.createElement(p.a,{exact:!0,path:"/quizmanagement/form",render:function(e){return i.a.createElement(Aa,null)}}),i.a.createElement(p.a,{exact:!0,path:"/quizmanagement/detail/:id",render:function(e){return i.a.createElement(xa,null)}}))},gn=Object(p.f)(Object(we.b)(Oe,(function(e){return{}}))(mn)),bn=(a(82),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).isSidebarActive=function(e){var t=n.props.parentMenu;if(null==t)return!1;var a=n.props.location.pathname;return t.url+"/"+e.url==a},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(e){var t=e.srcElement.body.scrollTop;Math.min(0,t/3-60)}},{key:"render",value:function(){var e=this,t=this.props.parentMenu;if(null==t)return null;var a=null==this.props.sidebarMenus?[]:this.props.sidebarMenus,n=this.getLoggedUser();return i.a.createElement("ul",{id:"sidebar",className:"sidebar-nav bg-light"},i.a.createElement(En,{show:null!=t,brand:t}),a.map((function(a){if(a.userAuthorized&&!a.userAuthorized(n))return null;var r=e.isSidebarActive(a)?"menu-active":"regular-menu";return i.a.createElement("li",{className:"sidebar-item "+r,key:"SIDEBAR_"+a.code},i.a.createElement(ze.b,{to:t.url+"/"+a.url},i.a.createElement("span",{className:"sidebar-icon"},i.a.createElement("i",{className:N.getIconClassName(a)})),i.a.createElement("span",{className:"menu-label"},a.name)))})))}}]),a}(Re)),En=function(e){return 0==e.show?null:i.a.createElement(r.Fragment,null,i.a.createElement("li",{id:"sidebar-brand",className:"sidebar-brand",style:{marginBottom:"20px"}},i.a.createElement("div",{style:{textAlign:"center",paddingTop:"10px",paddingBottom:"10px"}},i.a.createElement("h3",{className:"text-dark"},i.a.createElement("i",{className:N.getIconClassName(e.brand)})),i.a.createElement(ze.b,{to:e.brand.url,style:{textDecoration:"none"}},i.a.createElement("h4",{className:"text-dark"},e.brand.name)))),i.a.createElement("li",{className:"sidebar-item-brand "},i.a.createElement(ze.b,{to:e.brand.url},i.a.createElement("span",{className:"sidebar-icon"},i.a.createElement("i",{className:N.getIconClassName(e.brand)})))))},yn=Object(p.f)(Object(we.b)(Oe,(function(e){return{performLogout:function(t){return e(Ne(t))}}}))(bn)),Cn=(a(83),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state={showSidebar:!1,activeMenuCode:null,menu:void 0,sidebarMenus:[]},n.currentPathName="",n.setMenuNull=function(){console.warn("SET MENU NULL"),n.setState({menu:void 0,showSidebar:!1,activeMenuCode:null,sidebarMenus:null})},n.setMenu=function(e){null!=e&&(console.debug("SET MENU: ",e.code),n.setState({menu:e,sidebarMenus:null,showSidebar:e.showSidebar,activeMenuCode:e.code}))},n.setSidebarMenus=function(e){n.setState({sidebarMenus:e})},n.setCurrentMenu=function(){var e=function(e){var t=e.split("/"),a=t[0];return""==a.trim()&&(a=t[1]),a}(n.props.location.pathname);if(e!=n.currentPathName){n.currentPathName=e;var t=function(e){var t=w();try{for(var a=0;a<t.length;a++){var n=t[a];if(n.url=="/"+e)return n}return null}catch(r){return null}}(e);null==t?n.setMenuNull():n.setMenu(t)}},n.getSubMenus=function(){var e,t;return n.state.menu&&null!=n.state.menu.subMenus&&(null===(e=n.state.menu.subMenus)||void 0===e?void 0:e.length)>0?null===(t=n.state.menu)||void 0===t?void 0:t.subMenus:n.state.sidebarMenus?n.state.sidebarMenus:null},n.state=Object(f.a)({},n.state),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setCurrentMenu()}},{key:"componentDidUpdate",value:function(){this.setCurrentMenu()}},{key:"render",value:function(){var e=1==this.state.showSidebar;return i.a.createElement("div",{id:"main-layout"},i.a.createElement(Qe,{setMenuNull:this.setMenuNull,activeMenuCode:this.state.activeMenuCode,setMenu:this.setMenu}),i.a.createElement("div",{id:"page-content",className:"container-fluid",style:{margin:0,padding:0,minHeight:"95vh"}},i.a.createElement("div",{className:"container-fluid",style:{zIndex:1,position:"absolute",paddingTop:"55px"},id:e?"app-content":"content"},i.a.createElement(gn,{setSidebarMenus:this.setSidebarMenus})),1==e?i.a.createElement(yn,{sidebarMenus:this.getSubMenus(),parentMenu:this.state.menu}):null))}}]),a}(Re)),Nn=Object(p.f)(Object(we.b)(Oe,(function(e){return{performLogout:function(t){return e(Ne(t))}}}))(Cn)),wn=function e(){Object(m.a)(this,e),this.loading=!1,this.loadingPercentage=0,this.requestId=void 0,this.mainAppUpdated=new Date,this.showAlert=!1,this.realtime=!1,this.appIdStatus="Loading App Id",this.errorAuthenticatingApp=!1},On=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).wsConnected=!1,n.loadings=0,n.alertTitle="Info",n.alertBody=null,n.alertIsYesOnly=!0,n.alertIsError=!1,n.alertOnYesCallback=function(e){},n.alertOnCancelCallback=function(e){},n.wsUpdateHandler=void 0,n.clientRef=i.a.createRef(),n.userService=void 0,n.alertCallback={title:"Info",message:"Info",yesOnly:!1,onOk:function(){},onNo:function(){}},n.refresh=function(){n.setState({mainAppUpdated:new Date})},n.requestAppId=function(){n.setState({appIdStatus:"Authenticating application",errorAuthenticatingApp:!1}),n.userService.requestApplicationId((function(e){n.props.setRequestId(e,Object(c.a)(n)),n.refresh(),n.setState({errorAuthenticatingApp:!1})}),n.retryRequestAppId)},n.retryRequestAppId=function(){n.setState({appIdStatus:"Authenticating application (Retrying)",errorAuthenticatingApp:!1}),n.userService.requestApplicationIdNoAuth((function(e){n.props.setRequestId(e,Object(c.a)(n)),n.setState({errorAuthenticatingApp:!1})}),(function(){return n.setState({errorAuthenticatingApp:!0})}))},n.smoothEndLoading=function(){tn((function(){n.setState({loading:!1,loadingPercentage:0})}),100)},n.handleProgress=function(e){var t,a=null!==(t=e.percentage)&&void 0!==t?t:0,r=Math.floor(a);(a<0||a>100)&&n.endLoading(),n.setState({loadingPercentage:r})},n.initWebsocket=function(){var e;e=ge()+"realtime-app",F=e,function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(null!=t)for(var n=0;n<t.length;n++)Q.push(t[n])}({subscribeUrl:"/wsResp/progress/"+n.props.requestId,callback:n.handleProgress},{subscribeUrl:"/wsResp/"+n.props.requestId+"/update",callback:function(e){return n.handleWsUpdate(e)}}),function(){var e=new window.SockJS(F);(x=window.Stomp.over(e)).connect({},(function(e){M=!0,console.log("Websocket CONNECTED: ",F,"frame :",e,x.ws._transport.ws.url),console.debug("subscriptionCallbacks :",Q.length);for(var t=function(e){var t=Q[e];t&&x.subscribe(t.subscribeUrl,(function(e){var a=JSON.parse(e.body);t.callback(a)}))},a=0;a<Q.length;a++)t(a);for(var n=0;n<_.length;n++){(0,_[n])(e)}}))}(),n.wsConnected=!0},n.handleWsUpdate=function(e){n.wsUpdateHandler&&n.wsUpdateHandler(e)},n.setWsUpdateHandler=function(e){n.wsUpdateHandler=e},n.resetWsUpdateHandler=function(){n.setWsUpdateHandler(void 0)},n.state=new wn,n.userService=n.props.services.userService,n.props.setMainApp(Object(c.a)(n)),n}return Object(s.a)(a,[{key:"incrementLoadings",value:function(){this.loadings++}},{key:"decrementLoadings",value:function(){this.loadings--,this.loadings<0&&(this.loadings=0)}},{key:"startLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.incrementLoadings(),this.setState({loading:!0,realtime:e})}},{key:"endLoading",value:function(){this.decrementLoadings(),0==this.loadings&&(this.state.realtime?this.setState({loadingPercentage:100},this.smoothEndLoading):this.setState({loading:!1,loadingPercentage:0}))}},{key:"showAlert",value:function(e,t,a,n,r){this.alertTitle=e,this.alertBody=t,this.alertIsYesOnly=a;var i=this;this.alertOnYesCallback=function(e){i.dismissAlert(),n(e)},a||(this.alertOnCancelCallback=function(e){i.dismissAlert(),null!=r&&r(e)}),this.setState({showAlert:!0})}},{key:"dismissAlert",value:function(){this.alertIsError=!1,this.setState({showAlert:!1})}},{key:"showAlertError",value:function(e,t,a,n,r){this.alertIsError=!0,this.showAlert(e,t,a,n,r)}},{key:"componentDidUpdate",value:function(){this.props.applicationProfile&&function(e){if(e.pageIcon){var t=document.querySelector('link[rel="shortcut icon"]')||document.querySelector('link[rel="icon"]');t||((t=document.createElement("link")).id="favicon",t.setAttribute("rel","shortcut icon"),document.head.appendChild(t)),t.setAttribute("href",be()+e.pageIcon)}}(this.props.applicationProfile),this.props.requestId&&!this.wsConnected&&this.initWebsocket()}},{key:"componentDidMount",value:function(){this.requestAppId(),this.setState({loadingPercentage:0})}},{key:"render",value:function(){var e=this;return this.props.requestId?i.a.createElement(r.Fragment,null,i.a.createElement(Sn,{realtime:this.state.realtime,loading:this.state.loading,loadingPercentage:this.state.loadingPercentage}),this.state.showAlert?i.a.createElement(qe,{title:this.alertTitle,isError:this.alertIsError,onClose:function(t){return e.setState({showAlert:!1})},yesOnly:this.alertIsYesOnly,onYes:this.alertOnYesCallback,onNo:this.alertOnCancelCallback},this.alertBody):null,i.a.createElement(Nn,null)):i.a.createElement("div",{className:"text-center",style:{paddingTop:"10%"}},i.a.createElement("h2",null,this.state.appIdStatus),this.state.errorAuthenticatingApp?i.a.createElement(bt,{iconClassName:"fas fa-redo",onClick:this.retryRequestAppId,children:"Retry"}):i.a.createElement(Ue,null))}}]),a}(r.Component);function Sn(e){return 1==e.loading?i.a.createElement(je,{realtime:e.realtime,progress:e.loadingPercentage,text:"Please wait...",type:"loading"}):null}var jn=Object(p.f)(Object(we.b)(Oe,(function(e){return{setMainApp:function(t){return e({type:"SET_MAIN_APP",payload:t,meta:{type:"SET_MAIN_APP"}})},setRequestId:function(t,a){return e(function(e,t){var a={type:"SET_REQUEST_ID",payload:Object(f.a)({loginStatus:e.loggedIn,referer:t},e),meta:{type:"SET_REQUEST_ID"}};return console.debug("setRequestId: ",a),a}(t,a))}}}))(On)),kn=function(e){var t=ie();return i.a.createElement(we.a,{store:t},i.a.createElement(ze.a,null,i.a.createElement(jn,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(kn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[44,1,2]]]);
//# sourceMappingURL=main.59fb1210.chunk.js.map