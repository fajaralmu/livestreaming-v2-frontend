{"version":3,"sources":["models/AuthorityType.ts","redux/appReducer.js","redux/types.js","models/BaseModel.ts","utils/StringUtil.ts","models/settings/Menu.ts","constant/Menus.ts","redux/userReducer.js","models/AttachmentInfo.ts","services/Promises.ts","services/UserService.ts","services/MasterDataService.ts","models/ChatMessageModel.ts","services/PublicConferenceService.ts","utils/EventUtil.ts","services/WebSocketService.ts","redux/servicesReducer.ts","services/Services.ts","redux/reducers.js","middlewares/UserMiddleware.ts","middlewares/RealtimeChatMiddleware.js","redux/configureStore.js","middlewares/Common.ts","constant/Url.js","models/UserModel.ts","redux/actionCreators.ts","constant/stores.js","component/loader/Loader.js","component/alert/Alert.tsx","utils/ComponentUtil.ts","models/FieldType.ts","models/ApplicationProfileModel.ts","component/BaseComponent.tsx","component/navigation/Header.tsx","component/BasePage.tsx","component/layout/BaseMainMenus.tsx","component/container/Card.tsx","component/pages/dashboard/main/DashboardMain.tsx","component/navigation/AnchorButton.tsx","component/container/Modal.tsx","models/Filter.ts","models/settings/EntityProperty.ts","utils/EntityValues.tsx","component/navigation/NavigationButtons.tsx","component/pages/masterdata/form/fields/BaseField.tsx","component/pages/masterdata/form/fields/FormInputImage.tsx","component/pages/masterdata/form/fields/FormInputImageMultiple.tsx","component/pages/masterdata/form/fields/FormInputDropDown.tsx","component/navigation/AnchorWithIcon.tsx","component/pages/masterdata/form/fields/FormInputTextEditor.tsx","component/pages/masterdata/form/fields/FormInputCheckBox.tsx","utils/DateUtil.ts","constant/MediaShare.ts","component/pages/masterdata/form/fields/FormInputCoomon.tsx","component/pages/masterdata/form/fields/FormInputDropDownDynamic.tsx","component/form/FormGroup.tsx","component/pages/masterdata/form/FormInputField.tsx","component/pages/masterdata/form/MasterDataForm.tsx","component/pages/masterdata/ExternalEditForm.tsx","component/pages/masterdata/EditDeleteAction.tsx","component/pages/masterdata/DataTableHeader.tsx","component/alert/SimpleError.tsx","component/loader/Spinner.tsx","component/navigation/ToggleButton.tsx","component/pages/masterdata/MasterDataList.tsx","component/pages/masterdata/MasterDataManagement.tsx","component/pages/masterdata/MasterDataMain.tsx","component/pages/home/HomeMain.tsx","component/pages/settings/SettingsMain.tsx","component/pages/settings/settingHelper.tsx","component/pages/settings/UserProfile.tsx","component/pages/settings/EditApplicationProfile.tsx","component/pages/home/AboutUs.tsx","component/pages/login/Register.tsx","models/ApplicationConfiguration.ts","component/pages/conference/room/ConferenceRoomSteaming.tsx","models/ConferenceRoomModel.ts","component/alert/SimpleWarning.tsx","utils/CollectionUtil.tsx","component/pages/conference/main/RoomInfoForm.tsx","component/pages/conference/main/ConferenceMain.tsx","component/pages/conference/room/ConferenceRoom.tsx","component/pages/login/AppIcon.tsx","component/pages/login/Login.tsx","component/pages/conference/room/chat/ChatForm.tsx","component/pages/conference/room/chat/ChatMessagePanel.tsx","models/conference/PeerConnection.ts","component/pages/conference/room/helper/HandshakeLog.tsx","component/pages/conference/room/MemberVideoStream.tsx","component/pages/conference/room/helper/roomHelper.tsx","component/layout/ApplicationContent.tsx","component/navigation/SideBar.tsx","component/layout/MainLayout.tsx","App.tsx","Root.tsx","serviceWorker.js","index.js"],"names":["AuthorityType","initState","mainApp","undefined","reducer","state","action","type","payload","BaseModel","id","createdDate","modifiedDate","deleted","nulledFields","index","uniqueId","string","String","Date","getUTCMilliseconds","toString","beautifyNominal","val","isDecimal","includes","isNegative","startsWith","replace","rawVal","parseInt","split","nominal","Math","abs","result","length","zeroIndex","i","Menu","code","name","description","url","pathVariables","iconUrl","color","fontColor","role","active","menuClass","authenticated","showSidebar","subMenus","userAuthorized","user","element","console","debug","defaultMenuIconClassName","getIconClassName","menu","getMenus","menuSet","_menus","Object","assign","subMenu","push","ROLE_ADMIN","ROLE_USER","loginKey","loginStatus","loginFailed","menus","menuData","loggedUser","loginAttempt","requestId","applicationProfile","assetsPath","masterHealthCenter","referer","refresh","setLoginKeyCookie","data","AttachmentInfo","Blob","dataUrl","axios","require","commonAjaxPostCalls","endpoint","request","Promise","resolve","reject","post","headers","commonAuthorizedHeader","then","axiosResponse","updateAccessToken","response","rawAxiosResponse","catch","e","error","commonAjaxPublicPostCalls","commonHeader","UserService","updateProfile","contextPath","concat","saveUser","requestApplicationId","callbackSuccess","callbackError","alert","requestApplicationIdNoAuth","this","instance","MasterDataService","managementProperties","entityPropertyMap","Map","updateApplicationProfile","profile","set","get","req","responseType","fileName","rawSplit","extension","blob","window","URL","createObjectURL","attachmentInfo","commonAjaxPostCallsWithBlob","entity","filter","limit","page","exacts","fieldsFilter","model","editMode","ChatMessageModel","destinationType","destination","body","date","roomCode","PublicConferenceService","getRoom","updateRoomInfo","room","conferenceRoom","generateRoom","getRoomByCode","enterRoom","leaveRoom","removeRoomMember","setActiveStatus","sendChatMessage","message","chatMessage","cleanMediaStreamResources","stream","getTracks","forEach","stop","kind","doItLater","callback","intervalMs","timeout","setTimeout","clearTimeout","WebSocketService","stompClient","wsConnected","websocketUrl","onConnectCallbacks","Array","subscriptionCallbacks","isWsConnected","setWebSocketUrl","sendToWebsocket","requestObject","info","send","JSON","stringify","removeOnConnecCallbacks","removeOnConnecCallback","splice","onConnectCallbackExist","addOnWsConnectCallbacks","c","warn","performWebsocketConnection","win","socket","SockJS","disconnect","Stomp","over","connect","frame","subscribe","subscribeUrl","respObject","parse","removeWebsocketCallback","registerWebSocketCallbacks","callBackObjects","subscriptionCallbackExist","services","userService","getInstance","masterDataService","publicConferenceService","websocketService","rootReducer","combineReducers","appState","appReducer","userState","userReducer","servicesState","servicesReducers","initialState","performLoginMiddleware","store","next","meta","app","responseJson","loginSuccess","log","newAction","common","dispatch","finally","endLoading","getLoggedUserMiddleware","param","performLogoutMiddleware","logoutSuccess","setLoggedUserMiddleware","getMessagesMiddleware","fetch","method","json","err","storeChatMessageLocallyMiddleware","getStore","configureStore","createStore","applyMiddleware","userMiddleware","realtimeChatMiddleware","getRequestId","getLoginKey","LOGIN_KEY","getState","getCookie","accessToken","setCookie","cookieValue","cname","cvalue","exdays","d","setTime","getTime","expires","toUTCString","document","cookie","ca","decodeURIComponent","charAt","substring","indexOf","devMode","getElementById","value","rootValue","baseImageUrl","getAssetsPath","UserModel","username","displayName","editPassword","profileImage","mainRole","getCode","trim","usedHost","apiAccount","performLogout","startLoading","mapCommonUserStateToProps","LoaderContent","props","realtime","className","style","margin","position","zIndex","marginBottom","aria-hidden","padding","marginTop","height","width","progress","transitionDuration","disabled","Loader","timer","intervalId","update","clearInterval","setState","endMessage","withTimer","setInterval","Component","State","backColor","Backdrop","backgroundColor","bgColor","Footer","ref","yesButtonRef","onClick","onYes","yesOnly","noButtonRef","onNo","Header","fontClassName","title","onClose","Alert","close","React","createRef","isError","current","focus","headerClassName","display","children","byId","toBase64v2","fileInput","reader","FileReader","readAsDataURL","files","onload","onerror","FieldType","ApplicationProfileModel","appCode","shortDescription","about","welcomingMessage","address","contact","website","pageIcon","backgroundUrl","footerIconClass","FooterIconClassValue","BaseComponent","parentApp","updated","validateLoginStatus","isLoggedUserNull","backToLogin","scrollTop","opt","top","behavior","scrollTo","sendWebSocket","setWsUpdateHandler","handler","addWebsocketSubscriptionCallback","connectWs","removeWSSubscriptionCallback","resetWsUpdateHandler","handleInputChange","event","target","checked","isAdmin","getLoggedUser","showConfirmation","showAlert","showConfirmationDanger","showAlertError","showInfo","showError","showCommonErrorAlert","getServices","activeId","withProgress","successCallback","errorCallback","params","doAjax","User","history","IState","showNavLinks","buttonToggleNavRef","toggleNavLinks","onLogout","ok","setMenu","click","appProfile","getApplicationProfile","href","btnRef","map","isActive","activeMenuCode","key","setMenuNull","NavbarToggleButton","data-toggle","data-target","aria-controls","aria-expanded","aria-label","MenuItem","to","HeaderTop","paddingLeft","fontSize","UserIcon","marginRight","src","withRouter","BasePage","authentiacted","additionalText","Fragment","BaseMainMenus","Card","attributes","footerContent","DashboardMain","toLowerCase","AnchorButton","show","btnClassName","iconClassName","Modal","hideModal","showModal","toggleable","showFooter","Filter","orderType","orderBy","contains","day","year","month","availabilityCheck","dayTo","monthTo","yearTo","maxValue","useExistingFilterPage","EntityProperty","groupNames","entityName","alias","fieldNames","idField","detailFieldName","formInputColumn","editable","creatable","elements","fieldNameList","withProgressWhenUpdated","record","prop","identity","getEntityElement","getHeaderLabels","header","label","labelName","isDate","filterable","hasTextEditorField","fieldType","FIELD_TYPE_TEXTEDITOR","EntityValues","object","elemnents","elementid","FIELD_TYPE_DATE","toDateString","FIELD_TYPE_DATETIME","toLocaleString","FIELD_TYPE_IMAGE","imgLink","FIELD_TYPE_COLOR","FIELD_TYPE_NUMBER","dangerouslySetInnerHTML","__html","FIELD_TYPE_CHECKBOX","FIELD_TYPE_FIXED_LIST","FIELD_TYPE_DYNAMIC_LIST","optionItemName","NavigationButtons","buttonIndexes","generateButtonValues","totalData","activePage","lastIndex","nextPage","previusPage","currentPage","displayed_buttons","buttonCount","ceil","min","max","BaseField","prepopulateForm","entityElement","getRequiredAttr","required","FormInputImage","singlePreviewData","showInputFile","changeSingleImageData","removeImage","doRemoveImage","recordToEdit","defaultValue","fullUrl","onChange","accept","imageData","ImagePreview","FormInputImageMultiple","previewData","inputElements","setImageData","addInputElement","removeInputElement","removedIndex","doRemoveInputElement","delete","imageNames","imageName","isNull","isBase64","isBase64Image","FormInputDropDown","inputList","inputListLoaded","entities","Error","loadInputList","entityReferenceClass","commonAjax","loadAllEntities","isNotReady","validateInputType","fieldName","recordValue","defaultInputValue","optionValueName","options","option","optionItemValue","AnchorWithIcon","tyle","fieldValue","FormInputTextEditor","contentRef","formatDoc","sCmd","sValue","oDoc","validateMode","executed","execCommand","contentEditable","setValue","innerHTML","setDocMode","bToSource","oContent","createTextNode","oPre","createElement","appendChild","all","innerText","createRange","selectNodeContents","firstChild","printDoc","setEditMode","mode","paleteCommand","anchor","commmand","dataset","clean","contentOnChange","onMouseDown","preventDefault","data-command","data-value","sLnk","prompt","onInput","FontSizeOption","t","selected","BackgroundColorOption","FontColorOption","FormattingList","FontList","FormInputCheckbox","MediaShare","twoDigits","FormInputCommon","dateObj","getFullYear","getMonth","getDate","join","valueAsObj","requiredAttr","input","FIELD_TYPE_PLAIN_LIST","plainListValues","FIELD_TYPE_TEXTAREA","searchValue","FormInputDropDownDynamic","inputRef","searchKey","loadEntities","search","keyCode","div","placeholder","onKeyDown","FormGroup","orientation","FormInputField","multiple","formLabel","MasterDataForm","formRef","onSubmit","form","submit","formData","FormData","promises","hasImageField","valueAttr","objectPayload","generateRequestPayload","ajaxSubmit","rawObject","realtimeProgress","getEntityProperty","commonAjaxWithProgress","save","recordSaved","entityProperty","editModeStr","SubmitReset","InputFields","groupedElements","counter","hasTextEditor","ei","ExternalEditForm","link","EditDeleteAction","doDelete","recordId","getRecordId","recordDeleted","getRecordById","getById","recordLoaded","showEditForm","reload","additionalButton","DataTableHeader","headerProps","headerProp","headerName","filterClass","minWidth","autoComplete","filterOnChange","data-ordertype","orderButtonOnClick","data-orderby","SimpleError","Spinner","innerDivs","visibility","ToggleButton","yesLabel","noLabel","MasterDataList","adjustFilter","entitiesLoaded","recordData","checkDefaultData","loading","getRecordNumber","filterFormSubmit","setExactSearch","filterReset","showForm","showCreateForm","updateFilterPage","updateFilterLimit","getFilter","printRecord","exactsSearch","resultList","onReset","overflow","number","values","parseValues","Loading","paddingTop","marginLeft","SubmitResetButton","MasterDataManagement","loadingEntityProperty","entityPropertyLoaded","setEntityProperty","setTitle","entityProp","property","generateReport","reportCreated","attachment","download","loadEntityProperty","raltime","existingEntityProperty","MasterDataMain","managementPropertiesLoaded","generalList","setSidebarMenus","sidebarMenus","loadManagamenetPages","loadManagementProperties","match","properties","HomeMain","imageUrl","backgroundImage","SettingsMain","EditField","edit","toggleInput","updateProperty","PropertyInput","PropertyLabel","EditImage","editFields","fieldChanged","UserProfile","updateProfileProperty","updateProfleImage","setProfileImage","actualLoggedUser","propertyName","getAttribute","enabled","saveRecord","doSaveRecord","getUserEditedData","profileSaved","editedUser","setLoggedUser","EditFields","EditApplicationProfile","updateImageField","setAppProfileField","actualAppProfile","getApplicationEditedData","editedApplication","setApplicationProfile","bgUrl","AboutUs","editPasswordRepeat","success","Register","userSaved","passwordMatch","fieldComplete","isUserLoggedIn","textAlign","register","PasswordField","borderColor","CommonField","autoFocus","AppliactionConfiguration","videoWidth","videoHeight","StreamType","ConferenceRoomModel","getMediaStreamConfig","mediaShare","videoConstraint","ideal","config","video","VIDEO_AUDIO","audio","started","members","chats","addMember","removeMember","memberToRemove","member","addMessage","clone","SimpleWarning","tableHead","RoomInfoForm","service","recordSavedCallback","updateRoomProps","ConferenceMain","createRoom","activeStatusChanged","pathname","doRemoveMember","memberRemoved","m","r","RoomInfo","MemberList","ConferenceRoom","hasCodeOnURI","AppIcon","viewBox","xmlns","stroke","fill","strokeWidth","Login","updateCredentialProperty","performLogin","login","UsernameField","password","ChatFormState","showChat","chatBody","unreadCount","ChatForm","sendMessage","updateChatBody","SubmitButton","ChatMessagePanel","chatCount","readCount","roomChatCount","getMessages","toggleChat","ChatList","lastChatRef","scrollToLastChat","scrollIntoView","chat","toLocaleDateString","PeerConnection","memberCode","comp","created","component","initialize","ontrack","ev","track","streams","addLog","vid","videoRef","profileImageRef","srcObject","addEventListener","play","onicecandidate","candidate","sendHandshake","onsignalingstatechange","signalingState","ondatachannel","onicecandidateerror","onconnectionstatechange","connectionState","senderInfo","getSenders","sender","origin","createAnswer","answer","setLocalDescription","errorSessionDescription","trackAdded","createOffer","offer","RTCPeerConnection","logs","HandshakeLog","clearLog","setLogEnabled","getMappedLog","mappedLogs","existLogCount","count","mappedLog","listStyleType","videoVisible","showLog","enableLog","MemberVideoStream","peerConnection","logRef","tracks","trackExist","addStream","getConnection","addTrack","newInstance","getMember","componentDidMount","performCreateOffer","requestDial","handleOffer","mediaStream","setRemoteDescription","performCreateAnswer","handleCandidate","addIceCandidate","RTCIceCandidate","handleAnswer","toggleLog","isCurrentUser","redial","wordWrap","controls","msg","eventId","realtimeHandshake","webRtcObject","memberRefs","dialPeerByCode","InfoMediaStreamMessage","ErrorMediaStreamMessage","retry","muted","logEnabled","redialAll","streamType","CAMERA","errorMessage","mediaStreamReady","mediaStreamConfig","ConferenceRoomSteaming","videoStream","videoStreamError","peerToDials","offersToHandle","wsService","handshakeHandler","eventName","handleDial","getMemberRef","memberRef","resetWsCallbacks","cleanMediaResources","notifyUserEnterRoom","initMediaStream","wsSubscriptionCallback","webRtcHandshake","nofityUserEnter","handshakeObject","handleWebRtcHandshake","handleStream","conferenceUpdate","addNewRoomMember","dialPeer","backToRoomMain","addChatMessage","peer","reAddMemberAndDial","updateRoomState","getRoomCodeFromProps","location","navigator","mediaDevices","getUserMedia","updateVideoSrc","checkDialWaiting","checkOffersWaiting","size","clear","doLeaveRoom","startStream","retryMediaStream","StartStream","ApplicationContent","exact","path","render","Conference","LoginRoute","Dashboard","Settings","MemberQuiz","SideBar","isSidebarActive","parentMenu","pathName","handleScroll","removeEventListener","srcElement","brand","menuClassName","Brand","paddingBottom","textDecoration","MainLayout","currentPathName","setCurrentMenu","pathRaw","firstPath","extractMenuPath","getMenuByMenuPath","getSubMenus","menuState","loadingPercentage","mainAppUpdated","loadingAppStatus","errorAuthenticatingApp","App","loadings","alertTitle","alertBody","alertIsYesOnly","alertIsError","alertOnYesCallback","alertOnCancelCallback","wsUpdateHandler","clientRef","alertCallback","onOk","requestAppId","setRequestId","retryRequestAppId","smoothEndLoading","handleProgress","percentageFloat","percentage","floor","initWebsocket","handleWsUpdate","setMainApp","incrementLoadings","decrementLoadings","yesCallback","noCallback","dismissAlert","querySelector","setAttribute","head","updateFavicon","text","LoadingScreen","ret","loggedIn","actions","Root","Boolean","hostname","ReactDOM","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6818458d.chunk.js","sourcesContent":["export enum AuthorityType {\r\n    ROLE_ADMIN, ROLE_USER\r\n}","import * as types from './types'\r\n\r\nexport const initState = { \r\n    mainApp: undefined\r\n\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case types.SET_MAIN_APP:\r\n              \r\n            return { ...state, mainApp: action.payload }; \r\n       \r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","/**\r\n * \r\n */\r\n \r\nexport const REMOVE_SHOP_ENTITY= \"remove_shop_entity\"; \r\nexport const FETCH_PRODUCT_CATEGORIES_ALL = \"all_product_categories\";\r\nexport const DO_LOGIN = \"do_login\";\r\nexport const DO_LOGOUT = \"do_logout\";    \r\nexport const SET_REQUEST_ID = \"SET_REQUEST_ID\"; \r\nexport const STORE_MESSAGE = \"store_message\";\r\nexport const GET_ENTITY_PROPERTY = \"get_entity_config\";\r\nexport const GET_MANAGEMENT_MENUS = \"GET_MANAGEMENT_MENUS\";\r\nexport const GET_MESSAGE = \"GET_MESSAGE\";\r\nexport const SET_MAIN_APP = \"SET_MAIN_APP\"; \r\nexport const GET_ENTITY_BY_ID = \"get_entity_by_id\";\r\nexport const UPDATE_ENTITY = \"update_entity\"; \r\nexport const REFRESH_LOGIN = \"refresh_login\";\r\nexport const GET_LOGGED_USER = \"get_logged_user\";\r\nexport const SET_LOGGED_USER = \"set_logged_user\";\r\nexport const SET_APPLICATION_PROFILE = \"SET_APPLICATION_PROFILE\";","\nexport default class BaseModel{\n\tid?:number;\n\tcreatedDate?:Date;\n\tmodifiedDate?:Date;\n\tdeleted?:Date;\n\tnulledFields?:any[];\n\n}\n","let index = 1;\r\nexport const uniqueId = function () {\r\n\tlet string = new String(new Date().getUTCMilliseconds()).toString();\r\n\tindex++;\r\n\treturn index + \"-\" + string;\r\n}\r\n\r\nexport function beautifyNominal(val:any) {\r\n\tif (val == \"\" || val == null) return \"0\";\r\n\tconst isDecimal:boolean = new String(val).includes(\".\");\r\n\tconst isNegative:boolean = new String(val).startsWith(\"-\");\r\n\tif (isNegative) {\r\n\t\tval = new String(val).replace(\"-\",\"\");\r\n\t}\r\n\tconst rawVal = isDecimal? parseInt( new String(val).split(\".\")[0]) : parseInt(val);\r\n\tlet nominal = Math.abs(rawVal).toString();\r\n\tlet result = \"\";\r\n\tif (nominal.length > 3) { \r\n\t\tlet zeroIndex: number = 0;\r\n\t\tfor (let i = nominal.length - 1; i > 0; i--) {\r\n\t\t\tzeroIndex++; \r\n\t\t\tresult = nominal[i] + result;\r\n\t\t\tif (zeroIndex == 3 ) {\r\n\t\t\t\tresult = \".\" + result;\r\n\t\t\t\tzeroIndex = 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tresult = nominal[0] + result;\r\n\t} else {\r\n\t\tresult = val;\r\n\t}\r\n\tif (rawVal < 0) {\r\n\t\treturn rawVal;\r\n\t}\r\n\tif (isDecimal) {\r\n\t\tresult+= \",\"+ new String(val).split(\".\")[1];\r\n\t}\r\n\tif (isNegative) {\r\n\t\tresult = \"-\"+result;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport const getMaxSales = (list) => {\r\n\tlet result = 0;\r\n\tfor (let i = 0; i < list.length; i++) {\r\n\t\tconst element = list[i];\r\n\t\tif (element.sales > result)\r\n\t\t\tresult = element.sales;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport const isNonNullArray = function (array) {\r\n\treturn array != null && array.length > 0;\r\n}\r\n\r\nexport const isNonNullArrayWithIndex = function (array, i) {\r\n\treturn array != null && array.length > 0 && array[i] != null;\r\n}\r\n\r\nconst months = [\r\n\t\"January\", \"Ferbuary\", \"March\", \"April\", \"May\", \"June\",\r\n\t\"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n]\r\n\r\nexport const monthYearString = function (m, y) {\r\n\tif (m == null || y == null) {\r\n\t\treturn \"-\";\r\n\t}\r\n\treturn months[m - 1] + \" \" + y;\r\n}\r\n\r\nexport const base64StringFileSize = (base64String:string) : number => {\r\n\tif (base64String.includes(\",\")) {\r\n\t\tbase64String = base64String.split(\",\")[1];\r\n\t}\r\n\tvar stringLength = base64String.length;\r\n\r\n\tvar sizeInBytes = 4 * Math.ceil((stringLength / 3))*0.5624896334383812;\r\n\tvar sizeInKb=sizeInBytes/1000;\r\n\treturn sizeInBytes;\r\n}\r\n\r\nexport const fileExtension = (fileName:string) :string => {\r\n\tif (fileName.includes(\".\") == false) {\r\n\t\treturn \"*\";\r\n\t}\r\n\r\n\tconst splitted = fileName.split(\".\");\r\n\treturn splitted[splitted.length - 1];\r\n}","import BaseModel from '../BaseModel'; \nimport { uniqueId } from '../../utils/StringUtil';\nimport { AuthorityType } from '../AuthorityType';\nimport User from '../UserModel';\n\nexport default class Menu extends BaseModel{\n\tstatic defaultMenuIconClassName:string = \"fas fa-folder\";\n\n\tcode:string = uniqueId();\n\tname?:string;\n\tdescription?:string;\n\turl?:string;\n\tpathVariables?:string; \n\ticonUrl?:string;\n\tcolor?:string;\n\tfontColor?:string;\n\trole:AuthorityType[] = [];\n\n\t//\n\tactive?:boolean = false;\n\tmenuClass?:string = \"fas fa-folder\";\n\tauthenticated?:boolean = false;\n\tshowSidebar?:boolean  = false;\n\tsubMenus?:Menu[] = undefined;\n\n\tstatic getIconClassName = (menu:Menu) => {\n\t\tif (undefined == menu.menuClass) {\n\t\t\treturn Menu.defaultMenuIconClassName;\n\t\t}\n\t\treturn menu.menuClass;\n\t}\n\n\tuserAuthorized? = (user?:User) : boolean => {\n\t\t\n\t\tif (this.role.length == 0) return true;\n\t\tif (!user) return false;\n\t\tfor (let i = 0; i < this.role.length; i++) {\n\t\t\tconst element = this.role[i];\n\t\t\tif (user.role.toString() == AuthorityType[element].toString()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\tconsole.debug(\"NOT AUTHORIZED\", this.role, user.role);\n\t\treturn false;\n\t}\n}\n","\r\nimport { AuthorityType } from '../models/AuthorityType';\r\nimport Menu from '../models/settings/Menu';\r\n\r\nexport const HOME = \"home\";\r\nexport const ABOUT = \"about\";\r\nexport const ACCOUNT = \"account\";\r\nexport const LOGIN = \"login\";\r\nexport const LOGOUT = \"logout\";\r\nexport const DASHBOARD = \"dashboard\";\r\nexport const MENU_SETTING = \"settings\";\r\nexport const MENU_MASTER_DATA = \"management\";\r\nexport const CONFERENCE = \"CONFERENCE\";\r\nexport const CHATROOM = \"chatroom\";\r\n\r\nexport const getMenus = () => {\r\n    let menuSet: Menu[] = [];\r\n    for (let i = 0; i < _menus.length; i++) {\r\n        const element: Menu = _menus[i];\r\n        const menu: Menu = Object.assign(new Menu, element);\r\n        const subMenus: Menu[] = [];\r\n        if (element.subMenus) {\r\n            for (let i = 0; i < element.subMenus.length; i++) {\r\n                const subMenu = element.subMenus[i];\r\n                subMenus.push(Object.assign(new Menu, subMenu));\r\n            }\r\n            menu.subMenus = subMenus;\r\n        }\r\n        menuSet.push(menu);\r\n    }\r\n\r\n    return menuSet;\r\n}\r\nexport const extractMenuPath = (pathName: string) => {\r\n    const pathRaw = pathName.split('/');\r\n\r\n    let firstPath = pathRaw[0];\r\n    if (firstPath.trim() == \"\") {\r\n        firstPath = pathRaw[1];\r\n    }\r\n    return firstPath;\r\n}\r\nexport const getMenuByMenuPath = (pathName: string): Menu | null => {\r\n    const menus = getMenus();\r\n    try {\r\n        for (let i = 0; i < menus.length; i++) {\r\n            const menu: Menu = menus[i];\r\n            if (menu.url == \"/\" + pathName) {\r\n                return menu;\r\n            }\r\n        }\r\n        return null;\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst _menus: Menu[] = [\r\n    {\r\n        code: HOME,\r\n        name: \"Home\",\r\n        url: \"/home\",\r\n        menuClass: \"fa fa-home\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: false,\r\n        role: []\r\n    },\r\n\r\n    {\r\n        code: DASHBOARD,\r\n        name: \"Dashboard\",\r\n        url: \"/dashboard\",\r\n        menuClass: \"fas fa-tachometer-alt\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        role: [AuthorityType.ROLE_ADMIN, AuthorityType.ROLE_USER],\r\n        subMenus: []\r\n    }, {\r\n        code: CONFERENCE,\r\n        name: \"Conference\",\r\n        url: \"/conference\",\r\n        menuClass: \"fas fa-video\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        role: [AuthorityType.ROLE_ADMIN, AuthorityType.ROLE_USER],\r\n        subMenus: [\r\n            {\r\n                code: 'conf_main',\r\n                name: 'My Conference',\r\n                url: 'main',\r\n                menuClass: 'fas fa-list-alt',\r\n                role: [AuthorityType.ROLE_ADMIN, AuthorityType.ROLE_USER],\r\n            },\r\n            {\r\n                code: 'conf_content',\r\n                name: 'Room',\r\n                url: 'room',\r\n                menuClass: 'fas fa-user-friends',\r\n                role: [AuthorityType.ROLE_ADMIN, AuthorityType.ROLE_USER],\r\n            },\r\n        ]\r\n    },\r\n\r\n    {\r\n        code: MENU_MASTER_DATA,\r\n        name: \"Master Data\",\r\n        url: \"/management\",\r\n        menuClass: \"fa fa-database\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        role: [AuthorityType.ROLE_ADMIN],\r\n    },\r\n    {\r\n        code: MENU_SETTING,\r\n        name: \"Setting\",\r\n        url: \"/settings\",\r\n        menuClass: \"fas fa-cogs\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        role: [AuthorityType.ROLE_ADMIN, AuthorityType.ROLE_USER],\r\n        subMenus: [\r\n            {\r\n                code: 'user_profile',\r\n                name: 'Profile',\r\n                menuClass: 'fas fa-user-cog',\r\n                url: 'user-profile',\r\n                role: [AuthorityType.ROLE_ADMIN, AuthorityType.ROLE_USER],\r\n            },\r\n            {\r\n                code: 'app_profile',\r\n                name: 'Application Setting',\r\n                menuClass: 'fas fa-cog',\r\n                url: 'app-profile',\r\n                role: [AuthorityType.ROLE_ADMIN],\r\n            },\r\n\r\n        ]\r\n    },\r\n];\r\n","import * as types from './types'\r\nimport * as menuData from '../constant/Menus' \r\nimport { setLoginKeyCookie } from './../middlewares/Common';\r\n\r\nexport const initState = {\r\n    loginKey: null,\r\n    loginStatus: false,\r\n    loginFailed: false,\r\n    menus: menuData.getMenus(),\r\n    loggedUser: null,\r\n    loginAttempt: false,\r\n    requestId: null,\r\n    applicationProfile: {},\r\n    assetsPath: \"\"\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n    \r\n    let result = {};\r\n    switch (action.type) { \r\n        case types.SET_REQUEST_ID:\r\n            \r\n            console.debug(\"USER REDUCER:REQUEST_ID\", action.payload.requestId);\r\n            result = {\r\n                ...state, requestId: action.payload.requestId,\r\n                masterHealthCenter: action.payload.masterHealthCenter??{},\r\n                applicationProfile: action.payload.applicationProfile ?? {},\r\n                assetsPath: action.payload.applicationProfile.assetsPath\r\n            };\r\n            \r\n            if (action.payload.loginStatus == true) {\r\n                result.loggedUser = action.payload.user;\r\n                result.loginStatus = true;\r\n            } else {\r\n                result.loginStatus = false;\r\n                result.loggedUser = null;\r\n            }\r\n            console.debug(\"result\");\r\n            console.debug(\"action.payload.requestId: \",action.payload.requestId); \r\n            console.debug(\"REQUEST_ID result.loginStatus:\", result.loginStatus)\r\n             action.payload.referer.refresh();\r\n\r\n            return result;\r\n        case types.DO_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginAttempt: true,\r\n                loginStatus: action.payload.loginStatus,\r\n                loginKey: action.payload.loginKey,\r\n                loginFailed: action.payload.loginStatus == false,\r\n                loggedUser: action.payload.loggedUser\r\n            };\r\n            return result;\r\n        case types.DO_LOGOUT:\r\n            result = {\r\n                ...state,\r\n                loginStatus: false,\r\n                loggedUser: null\r\n            };\r\n            setLoginKeyCookie(null);\r\n            return result;\r\n        case types.REFRESH_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginStatus: action.payload.loginStatus,\r\n                loggedUser: action.payload.loggedUser,\r\n                requestId: action.payload.requestId,\r\n            };\r\n            return result;\r\n        case types.GET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.data\r\n            };\r\n            return result;\r\n        case types.SET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.user\r\n            };\r\n            return result;\r\n        case types.SET_APPLICATION_PROFILE:\r\n            result = {\r\n                ...state, applicationProfile: action.payload.applicationProfile\r\n            };\r\n            return result;\r\n        default:\r\n            return { ...state };\r\n\r\n    }\r\n}\r\n\r\nexport default reducer;","\r\nexport default class AttachmentInfo {\r\n    name:string = \"\";\r\n    data:Blob = new Blob();\r\n    dataUrl:string = \"\";\r\n}","\r\nimport { commonAuthorizedHeader, commonHeader } from '../middlewares/Common';\r\nimport WebResponse from '../models/WebResponse';\r\nimport { updateAccessToken } from './../middlewares/Common';\r\nimport AttachmentInfo from './../models/AttachmentInfo';\r\n\r\nconst axios = require('axios');\r\n\r\nexport const rejectedPromise = (message: any) => {\r\n    return new Promise((res, rej) => {\r\n        rej(message);\r\n    });\r\n}\r\n\r\nexport const emptyPromise = (defaultResponse: any) => new Promise(function (res, rej) {\r\n    res(defaultResponse);\r\n});\r\n/**\r\n * with Authorization Header\r\n * @param endpoint \r\n * @param payload \r\n */\r\nexport const commonAjaxPostCalls = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<WebResponse>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            headers: commonAuthorizedHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                updateAccessToken(axiosResponse);\r\n                const response: WebResponse = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                if (response.code == \"00\") {\r\n\r\n                    resolve(response);\r\n                }\r\n                else { reject(response); }\r\n            })\r\n            .catch((e: any) => { \r\n                \r\n                console.error(e); \r\n                reject(e); \r\n            });\r\n    })\r\n}\r\n\r\n\r\nexport const commonAjaxPublicPostCalls = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<WebResponse>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            headers: commonHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                \r\n                const response: WebResponse = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                if (response.code == \"00\") {\r\n                    resolve(response);\r\n                }\r\n                else { reject(response); }\r\n            })\r\n            .catch((e: any) => { \r\n                \r\n                console.error(e); \r\n                reject(e); \r\n            });\r\n    })\r\n}\r\n\r\n\r\nexport const commonAjaxPostCallsWithBlob = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<AttachmentInfo>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            responseType: 'blob' ,\r\n            headers: commonAuthorizedHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                updateAccessToken(axiosResponse);\r\n                \r\n                const response: any = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                console.debug(\"axiosResponse.headers: \", axiosResponse.headers);\r\n                let contentDisposition = axiosResponse.headers[\"content-disposition\"];\r\n                let fileName = contentDisposition.split(\"filename=\")[1];\r\n                let rawSplit = fileName.split(\".\");\r\n                let extension = rawSplit[rawSplit.length - 1];\r\n                let blob = new Blob([response], { type: extension });\r\n                let url = window.URL.createObjectURL(blob);\r\n                // let a = document.createElement(\"a\");\r\n\r\n                // document.body.appendChild(a);\r\n\r\n                // a.href = url;\r\n                // a.style.display = 'none';\r\n                // a.download = fileName;\r\n                // a.click();\r\n\r\n                // window.URL.revokeObjectURL(url);\r\n                const attachmentInfo:AttachmentInfo = new AttachmentInfo();\r\n                attachmentInfo.name = fileName;\r\n                attachmentInfo.data = blob;\r\n                attachmentInfo.dataUrl = url;\r\n                resolve(attachmentInfo);\r\n                \r\n            })\r\n            .catch((e: any) => { console.error(e); reject(e); });\r\n    })\r\n}","\r\nimport User from '../models/UserModel';\r\nimport WebRequest from './../models/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls, commonAjaxPublicPostCalls } from './Promises';\r\nimport WebResponse from './../models/WebResponse';\r\nimport { updateAccessToken } from './../middlewares/Common';\r\nexport default class UserService {\r\n    \r\n    private static instance?: UserService;\r\n\r\n    static getInstance(): UserService {\r\n        if (this.instance == null) {\r\n            this.instance = new UserService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    updateProfile = (user: User) => {\r\n\r\n        const request: WebRequest = {\r\n            user: user\r\n        }\r\n\r\n        const endpoint = contextPath().concat(\"api/member/account/updateprofile\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    saveUser = (user: User) => {\r\n\r\n        const request: WebRequest = {\r\n            user: user\r\n        } \r\n        const endpoint = contextPath().concat(\"api/public/register\")\r\n        return commonAjaxPublicPostCalls(endpoint, request);\r\n    }\r\n\r\n    requestApplicationId = (callbackSuccess: (response: WebResponse) => any, callbackError: ()=>any) => {\r\n        const url = contextPath() + \"api/public/requestid\";\r\n        commonAjaxPostCalls(url, {}).then(data => {\r\n            if (data.code != \"00\") {\r\n                alert(\"Error requesting app ID\");\r\n                return;\r\n            }\r\n            const response = data.rawAxiosResponse;\r\n            updateAccessToken(response);\r\n            console.debug(\"response header:\", response.headers['access-token']);\r\n            callbackSuccess(data);\r\n        }).catch(e => {\r\n            console.error(\"ERROR requestApplicationId: \", e);\r\n            callbackError();\r\n        })\r\n\r\n    }\r\n    requestApplicationIdNoAuth = (callbackSuccess: (response:WebResponse)=>any, callbackError: ()=>any) => {\r\n        const url =   contextPath() + \"api/public/requestid\";\r\n        commonAjaxPublicPostCalls(url, {}).then(data => {\r\n          if (data.code != \"00\") {\r\n              alert(\"Error requesting app ID\");\r\n              return;\r\n          } \r\n          callbackSuccess(data);\r\n      }).catch(e=>{\r\n          console.error(\"ERROR requestApplicationIdNoAuth: \", e);\r\n        //   alert(\"Error, please reload OR try again\");\r\n            callbackError();\r\n      })\r\n          \r\n      }\r\n\r\n}","\r\nimport Filter from './../models/Filter';\r\nimport WebRequest from './../models/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls, commonAjaxPostCallsWithBlob } from './Promises';\r\nimport BaseModel from './../models/BaseModel';\r\nimport ManagementProperty from '../models/ManagementProperty';\r\nimport EntityProperty from '../models/settings/EntityProperty';\r\nimport ApplicationProfileModel from './../models/ApplicationProfileModel';\r\n\r\nexport default class MasterDataService {\r\n    managementProperties: ManagementProperty[] = [];\r\n    private entityPropertyMap: Map<string, EntityProperty> = new Map();\r\n    private static instance?: MasterDataService;\r\n\r\n    static getInstance(): MasterDataService {\r\n        if (this.instance == null) {\r\n            this.instance = new MasterDataService();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    setEntityProperty(code: string, data?: EntityProperty) {\r\n        if (!data) {\r\n            return;\r\n        }\r\n        this.entityPropertyMap.set(code, data);\r\n    }\r\n    getEntityProperty(code?: string): EntityProperty | undefined {\r\n        if (code == undefined) {\r\n            return undefined;\r\n        }\r\n        return this.entityPropertyMap.get(code);\r\n    }\r\n\r\n    loadManagementProperties(req?: any) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/managementpages\");\r\n        return commonAjaxPostCalls(endpoint, {});\r\n\r\n    }\r\n    generateReport(request: WebRequest) {\r\n        const endpoint: string = contextPath().concat(\"api/app/report/records\");\r\n        return commonAjaxPostCallsWithBlob(endpoint, request);\r\n\r\n    }\r\n    loadEntityProperty(code: string) {\r\n        console.debug(\"Load entity prop: \", code);\r\n        const request: WebRequest = {\r\n            entity: code\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/configv2\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadEntities(request: WebRequest) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadAllEntities(code: string) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                limit: 0, page: 0\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    getById(code: string, id: number) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                exacts: true,\r\n                limit: 1,\r\n                page: 0,\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getBy(code: string, fieldsFilter: {}, limit = 1) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                exacts: true,\r\n                limit: limit,\r\n                page: 0,\r\n                fieldsFilter: fieldsFilter\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    delete(code: string, id: number) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/delete\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    save(code: string, model: BaseModel, editMode: boolean) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            [code]: model\r\n        }\r\n        let endpoint: string;\r\n        if (editMode) {\r\n            endpoint = contextPath().concat(\"api/app/entity/update\");\r\n        } else {\r\n            endpoint = contextPath().concat(\"api/app/entity/add\");\r\n        }\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    updateApplicationProfile = (applicationProfile: ApplicationProfileModel) => {\r\n        const request: WebRequest = {\r\n            profile: applicationProfile\r\n        }\r\n        const endpoint = contextPath().concat(\"api/app/setting/updateprofile\");\r\n        return commonAjaxPostCalls(endpoint, request)\r\n    }\r\n}","import UserModel from './UserModel';\nimport BaseModel from './BaseModel';\n\nexport default class ChatMessageModel extends BaseModel{\n\tdestinationType?:string;\n\tdestination?:string;\n\tbody?:string;\n\tdate?:Date;\n\tuser?:UserModel;\n\troomCode?:string;\n\n}\n","\r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport ChatMessageModel from './../models/ChatMessageModel';\r\nimport WebRequest from './../models/WebRequest';\r\nimport ConferenceRoomModel from './../models/ConferenceRoomModel';\r\nexport default class PublicConferenceService {\r\n     \r\n    nofityUserEnter(roomCode: string) {\r\n        console.debug(\"nofityUserEnter: \", roomCode);\r\n        const endpoint = contextPath().concat(\"api/member/conference/notifyuserenterroom/\" + roomCode)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n\r\n    private static instance?: PublicConferenceService;\r\n\r\n    static getInstance(): PublicConferenceService {\r\n        if (this.instance == null) {\r\n            this.instance = new PublicConferenceService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    getRoom = () => {\r\n        const endpoint = contextPath().concat(\"api/member/conference/getuserroom\")\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    updateRoomInfo = (room:ConferenceRoomModel) => {\r\n        const endpoint = contextPath().concat(\"api/member/conference/updateroominfo\")\r\n        return commonAjaxPostCalls(endpoint, {conferenceRoom:room});\r\n    }\r\n    generateRoom = () => {\r\n        const endpoint = contextPath().concat(\"api/member/conference/generateroom\")\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    getRoomByCode = (code: string) => {\r\n        const endpoint = contextPath().concat(\"api/member/conference/getroom/\" + code)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    enterRoom = (code: string) => {\r\n        const endpoint = contextPath().concat(\"api/member/conference/enterroom/\" + code)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    leaveRoom = (code: string) => {\r\n        const endpoint = contextPath().concat(\"api/member/conference/leaveroom/\" + code)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    removeRoomMember = (code: string) => {\r\n        const endpoint = contextPath().concat(\"api/member/conference/removeroommember/\" + code)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    setActiveStatus = (active: boolean) => {\r\n        const endpoint = contextPath().concat(\"api/member/conference/updateactivestatus/\" + (active == true ? \"true\" : \"false\"))\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    sendChatMessage = (body: string, roomCode: string) => {\r\n        const endpoint = contextPath().concat(\"api/member/conference/sendchat/\");\r\n        const message = new ChatMessageModel();\r\n        message.body = body;\r\n        message.roomCode = roomCode;\r\n        const request: WebRequest = {\r\n            chatMessage: message\r\n        }\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    cleanMediaStreamResources = (stream?: MediaStream) => {\r\n\r\n        if (!stream) return;\r\n        console.debug(\"this.videoStream.getTracks(): \", stream.getTracks());\r\n        stream.getTracks().forEach(stream => {\r\n            stream.stop();\r\n            console.debug(\"Clean track : \", stream.kind);\r\n        })\r\n\r\n    }\r\n\r\n\r\n}","\r\nimport ApplicationProfileModel from './../models/ApplicationProfileModel';\r\nimport { baseImageUrl } from './../constant/Url';\r\nexport const doItLater = (callback:()=>any, intervalMs:number) => {\r\n    const timeout = setTimeout(()=>{\r\n       callback();\r\n        clearTimeout(timeout);\r\n      }, intervalMs)\r\n}\r\n\r\n\r\nexport const  updateFavicon = (profile: ApplicationProfileModel) => {\r\n    if (profile.pageIcon) {\r\n      let link = document.querySelector('link[rel=\"shortcut icon\"]') ||\r\n        document.querySelector('link[rel=\"icon\"]');\r\n      if (!link) {\r\n        link = document.createElement('link');\r\n        link.id = 'favicon';\r\n        link.setAttribute(\"rel\", 'shortcut icon');\r\n        document.head.appendChild(link);\r\n      }\r\n      link.setAttribute(\"href\", baseImageUrl() + profile.pageIcon);\r\n    }\r\n  }","\r\nimport { doItLater } from './../utils/EventUtil';\r\nexport default class WebSocketService {\r\n\r\n    private static instance?: WebSocketService;\r\n\r\n    static getInstance(): WebSocketService {\r\n        if (this.instance == null) {\r\n            this.instance = new WebSocketService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    stompClient: any = undefined;\r\n    wsConnected = false;\r\n    websocketUrl = undefined;\r\n    onConnectCallbacks = new Array();\r\n    subscriptionCallbacks = new Array();\r\n    isWsConnected = () => {\r\n        return this.wsConnected == true;\r\n    }\r\n    setWebSocketUrl = (url) => {\r\n        this.websocketUrl = url;\r\n    }\r\n    sendToWebsocket = (url, requestObject) => {\r\n        if (!this.wsConnected || !this.stompClient) {\r\n            console.info(\"Connecting\");\r\n            return false;\r\n        }\r\n        console.debug(\"SEND WEBSOCKET\");\r\n        try {\r\n            this.stompClient.send(url, {}, JSON.stringify(requestObject));\r\n            return true;\r\n        } catch (e) {\r\n            console.error(\"ERROR SEND WEBSOCKET TO\", url, e);\r\n            return false;\r\n        }\r\n    }\r\n    removeOnConnecCallbacks = (...ids) => {\r\n        for (let i = 0; i < ids.length; i++) {\r\n            this.removeOnConnecCallback(ids[i]);\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param {string} id \r\n     */\r\n    removeOnConnecCallback = (id) => {\r\n        for (let i = 0; i < this.onConnectCallbacks.length; i++) {\r\n            const c = this.onConnectCallbacks[i];\r\n            if (c.id == id) {\r\n                this.onConnectCallbacks.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    onConnectCallbackExist = (callback) => {\r\n        for (let i = 0; i < this.onConnectCallbacks.length; i++) {\r\n            const c = this.onConnectCallbacks[i];\r\n            if (c.id == callback.id) return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * each callback must provide uniquie ID\r\n     * @param  {...any} callbacks \r\n     */\r\n    addOnWsConnectCallbacks = (...callbacks) => {\r\n        for (let i = 0; i < callbacks.length; i++) {\r\n            const c = callbacks[i];\r\n            if (!c.id) {\r\n                console.warn(\"WS Onconncec callback must have ID!\");\r\n                continue;\r\n            }\r\n            if (!this.onConnectCallbackExist(c)) {\r\n                console.debug(\"REgister on connect callback: \", c.id);\r\n                this.onConnectCallbacks.push(c);\r\n            }\r\n        }\r\n    }\r\n\r\n    performWebsocketConnection = () => {\r\n        const win = window as any;\r\n        var socket = new win.SockJS(this.websocketUrl);\r\n        try {\r\n            if (this.stompClient) {\r\n                this.stompClient.disconnect();\r\n            }\r\n        } catch (error) {\r\n\r\n        }\r\n        this.stompClient = win.Stomp.over(socket);\r\n        this.stompClient.connect({}, (frame) => {\r\n            this.wsConnected = true;\r\n            // setConnected(true);\r\n            // console.log('Websocket CONNECTED: ', websocketUrl, 'frame :', frame, stompClient.ws._transport.ws.url);\r\n            console.debug(\"subscriptionCallbacks :\", this.subscriptionCallbacks.length);\r\n            // document.getElementById(\"ws-info\").innerHTML =\r\n            // stompClients.ws._transport.ws.url;\r\n            for (let i = 0; i < this.subscriptionCallbacks.length; i++) {\r\n                const c = this.subscriptionCallbacks[i];\r\n\r\n                if (c) {\r\n\r\n                    try {\r\n                        this.stompClient.subscribe(c.subscribeUrl, (response) => {\r\n                            var respObject = JSON.parse(response.body);\r\n                            try {\r\n                                c.callback(respObject);\r\n                            } catch (e) {\r\n                                console.error(\"ERROR SUBSCRIBE CALLBACK: \", c.id, e);\r\n                            }\r\n                        });\r\n                    } catch (e) {\r\n                        console.error(\"ERROR SUBSCRIBE: \", e);\r\n                        // performWebsocketConnection();\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (var i = 0; i < this.onConnectCallbacks.length; i++) {\r\n                const c = this.onConnectCallbacks[i];\r\n                if (c && c.callback) {\r\n                    try {\r\n                        c.callback(frame);\r\n                    } catch (e) {\r\n                        console.error(\"ERROR ONCONNECT CALLBACK: \", c.id, e);\r\n                    }\r\n                }\r\n            }\r\n\r\n        }, (e) => {\r\n            console.warn(\"Error connection websocket, reconnect\");\r\n            doItLater(this.performWebsocketConnection, 2000);\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {string} id \r\n     */\r\n    removeWebsocketCallback = (id) => {\r\n        console.debug(\"Remove WS Callback: \", id);\r\n        for (let i = 0; i < this.subscriptionCallbacks.length; i++) {\r\n            const existingCallback = this.subscriptionCallbacks[i];\r\n            if (existingCallback.id == id) {\r\n                this.subscriptionCallbacks.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param  {...WsCallback} callBackObjects \r\n     */\r\n    registerWebSocketCallbacks = (...callBackObjects) => {\r\n        // console.debug(\"callBackObjects: \", callBackObjects);\r\n        if (null == callBackObjects) {\r\n            return;\r\n        }\r\n        for (var i = 0; i < callBackObjects.length; i++) {\r\n            const callback = callBackObjects[i];\r\n            // console.debug(\"callback: \", callback);\r\n            if (!this.subscriptionCallbackExist(callback)) {\r\n                console.debug(\" register callback id: \", callback.id);\r\n                this.subscriptionCallbacks.push(callback);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {id, subscribeUrl, callback} callback \r\n     */\r\n    subscriptionCallbackExist = (callback) => {\r\n        for (let i = 0; i < this.subscriptionCallbacks.length; i++) {\r\n            const c = this.subscriptionCallbacks[i];\r\n            if (c.id == callback.id) return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n\r\n}"," \r\nimport Services from './../services/Services';\r\n\r\nexport const initState: { services: Services } = {\r\n    services: new Services()\r\n\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n\r\n    return state;\r\n}\r\n\r\nexport default reducer;","\r\nimport UserService from './UserService'; \r\nimport MasterDataService from './MasterDataService'; \r\nimport PublicConferenceService from './PublicConferenceService';\r\nimport WebSocketService from './WebSocketService';\r\nexport default class Services {\r\n    userService: UserService = UserService.getInstance();\r\n    masterDataService: MasterDataService = MasterDataService.getInstance(); \r\n    publicConferenceService:PublicConferenceService = PublicConferenceService.getInstance();\r\n    websocketService:WebSocketService =  WebSocketService.getInstance();\r\n}","import * as appReducer from \"./appReducer\"\r\nimport * as userReducer from \"./userReducer\" \r\nimport  * as servicesReducers from './servicesReducer';\r\nimport { combineReducers } from \"redux\";\r\n\r\nexport const rootReducer = combineReducers(\r\n    {\r\n        appState: appReducer.reducer,\r\n        userState: userReducer.reducer, \r\n        servicesState: servicesReducers.reducer\r\n    }\r\n);\r\n\r\nexport const initialState = {\r\n    appState: appReducer.initState,\r\n    userState: userReducer.initState, \r\n    servicesState: servicesReducers.initState\r\n}\r\n\r\nexport default rootReducer;","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\nimport WebResponse from './../models/WebResponse';\r\nconst axios = require('axios');\r\nexport const performLoginMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGIN) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n    axios.post(action.meta.url, {}, {\r\n        headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n    }).then(axiosResponse => {\r\n        const responseJson = axiosResponse.data;\r\n        let loginKey: string = \"\";\r\n        let loginSuccess: boolean = false;\r\n\r\n        if (responseJson.code != null && responseJson.code == \"00\") {\r\n            loginKey = axiosResponse.headers['access-token'];\r\n            console.log(\"api_token: \", loginKey);\r\n            loginSuccess = true;\r\n        }\r\n        let newAction = Object.assign({}, action, {\r\n            payload: {\r\n                loginStatus: loginSuccess,\r\n                loginKey: loginKey,\r\n                loggedUser: responseJson.user\r\n            }\r\n        });\r\n        common.updateAccessToken(axiosResponse);\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log)\r\n        .finally(() => { app.endLoading(); });\r\n\r\n}\r\n \r\n\r\nexport const getLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_LOGGED_USER) { return next(action); }\r\n\r\n    let headers = common.commonAuthorizedHeader();\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: headers\r\n    }).then(response => {\r\n        const data = response.data;\r\n\r\n        if (!data) {\r\n            alert(\"Error performing request\");\r\n            return;\r\n        }\r\n\r\n        let newAction = Object.assign({}, action, { payload: { data } });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log).finally(param => {\r\n            action.meta.app.endLoading();\r\n            action.meta.app.refresh();\r\n        });\r\n}\r\n\r\n\r\nexport const performLogoutMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGOUT) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: common.commonAuthorizedHeader()\r\n    })\r\n        .then(response => {\r\n            const responseJson = response.data;\r\n            let logoutSuccess = false;\r\n            if (responseJson.code == \"00\") {\r\n                logoutSuccess = true;\r\n            } else {\r\n                alert(\"Logout Failed\");\r\n            }\r\n\r\n            let newAction = Object.assign({}, action, {\r\n                payload: {\r\n                    loginStatus: !logoutSuccess\r\n                }\r\n            });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(console.log).finally(param => app.endLoading());\r\n}\r\n\r\nexport const setLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.SET_LOGGED_USER) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n}","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\n\r\nconst POST_METHOD = \"post\"; \r\n\r\nexport const getMessagesMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_MESSAGE) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: common.commonAuthorizedHeader()\r\n    }).then(response => response.json())\r\n        .then(data => {\r\n            console.debug(\"sendChatMessageMiddleware Response:\", data);\r\n            let newAction = Object.assign({}, action, { payload: data });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(err => console.log(err)).finally(param => action.meta.app.endLoading());\r\n}\r\n \r\nexport const storeChatMessageLocallyMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.STORE_MESSAGE) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n} \r\n\r\n","import { createStore, applyMiddleware } from 'redux'\r\nimport { initialState, rootReducer } from './reducers' \r\nimport * as userMiddleware from '../middlewares/UserMiddleware' \r\nimport * as realtimeChatMiddleware from '../middlewares/RealtimeChatMiddleware' \r\n \r\nlet store = null;\r\nexport const getStore = () => {\r\n    return store;\r\n}\r\nexport const configureStore = () => {\r\n    store = createStore(\r\n        rootReducer,\r\n        initialState,\r\n        applyMiddleware(   \r\n\r\n            //user related\r\n            userMiddleware.performLoginMiddleware,\r\n            userMiddleware.performLogoutMiddleware,  \r\n            userMiddleware.getLoggedUserMiddleware, \r\n            userMiddleware.setLoggedUserMiddleware,\r\n \r\n\r\n            /*realtime chat*/\r\n            realtimeChatMiddleware.storeChatMessageLocallyMiddleware,\r\n            realtimeChatMiddleware.getMessagesMiddleware,\r\n\r\n        )\r\n    );\r\n\r\n    return store;\r\n}\r\n   \r\n\r\nexport default configureStore;","import {  getStore } from '../redux/configureStore';\r\nimport Services from './../services/Services';\r\nexport const commonAuthorizedHeader = () => {\r\n    return {\r\n        'Content-Type': 'application/json',\r\n        'requestId': getRequestId(),//'localStorage.getItem(\"requestId\")',\r\n        'Authorization': 'Bearer '+getLoginKey()\r\n    }\r\n};\r\nexport const commonHeader = () => {\r\n    return {\r\n        'Content-Type': 'application/json',\r\n        'requestId': getRequestId(), \r\n    }\r\n};\r\n\r\nconst LOGIN_KEY:string = \"live-stream-login-key\";\r\n \r\nexport const getAssetsPath = () :string => {\r\n    const store = getStore(); \r\n    if (null == store) return \"\";\r\n    const state = store.getState();\r\n    return state.userState.assetsPath;\r\n}\r\n \r\nexport const getServices = () :Services => {\r\n    const store = getStore(); \r\n    // if (null == store) return new Services();\r\n    const state = store.getState();\r\n    return state.servicesState.services;\r\n}\r\n\r\nexport const getRequestId = () :string => {\r\n    const store = getStore();\r\n    if (null == store) return \"\";\r\n    const state = store.getState();\r\n    return state.userState.requestId;\r\n}\r\nexport const getLoginKey = () => {\r\n    return getCookie(LOGIN_KEY);\r\n}\r\n\r\nexport const updateAccessToken = (axiosResponse) => {\r\n    if (axiosResponse && axiosResponse.headers && axiosResponse.headers['access-token']) {\r\n        const accessToken = axiosResponse.headers['access-token'];\r\n        // console.debug(\"update access token: \", accessToken);\r\n        setCookie(LOGIN_KEY, accessToken);\r\n    }\r\n} \r\nexport const setLoginKeyCookie = (cookieValue:any) => {\r\n    setCookie(LOGIN_KEY, cookieValue);\r\n}\r\nexport const setCookie = function (cname, cvalue, exdays=1) {\r\n    var d = new Date();\r\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n    var expires = \"expires=\" + d.toUTCString();\r\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n}\r\nexport const getCookie = function (cname) {\r\n    var name = cname + \"=\";\r\n    var decodedCookie = decodeURIComponent(document.cookie);\r\n    var ca = decodedCookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n        var c = ca[i];\r\n        while (c.charAt(0) == ' ') {\r\n            c = c.substring(1);\r\n        }\r\n        if (c.indexOf(name) == 0) {\r\n            return c.substring(name.length, c.length);\r\n        }\r\n    }\r\n    return \"\";\r\n}","import { getAssetsPath } from \"../middlewares/Common\";\r\n\r\nconst devMode = \r\n    document.getElementById(\"rootPath\").value == \"${contextPath}\" || \r\n    document.getElementById(\"rootPath\").value == \"\";\r\nconst rootValue = devMode ?\r\n     \"/universal-good-shop/\" : document.getElementById(\"rootPath\").value+\"/\";\r\n\r\nexport const contextPath = function(){\r\n    const contextPath = devMode? \"http://localhost:8080\".concat(rootValue):rootValue;\r\n    //console.debug(\"contextPath: \",contextPath,document.getElementById(\"rootPath\").value);\r\n    return contextPath;\r\n}\r\n\r\n// export const baseImageUrl() = contextPath()+\"assets/images/\"; \r\n// export const baseImageUrl() = \"https://developmentmode.000webhostapp.com/uploaded_storage/\"; \r\n// export const baseImageUrl() = \"http://localhost/storage/images/\"; \r\nexport const baseImageUrl = () => getAssetsPath()+ \"images/\"; \r\n// export const baseImageUrl() = contextPath()+\"WebAsset/Shop1/Images/\"; \r\n\r\nexport const POST = \"post\";\r\n","import { AuthorityType } from './AuthorityType';\nimport BaseModel from './BaseModel';\nimport { uniqueId } from './../utils/StringUtil';\n\nexport default class UserModel extends BaseModel{\n    static clone(user: UserModel): UserModel {\n        return Object.assign(new UserModel, user);\n    }\n\tusername?:string;\n\tdisplayName?:string;\n\teditPassword?:string;\n\tprofileImage?:string;\n\trole :AuthorityType = AuthorityType.ROLE_USER; \n\tmainRole?:string;\n\tcode:string = uniqueId();\n\t \n\trequestId?:string;\n\n\tgetCode = () => {\n\t\t \n\t\treturn this.code.trim();\n\t}\n}\n","import * as types from './types'\r\nimport * as url from '../constant/Url'\r\nimport { contextPath } from '../constant/Url'; \r\nimport User from '../models/UserModel';\r\nimport ApplicationProfileModel from './../models/ApplicationProfileModel';\r\nimport WebResponse from './../models/WebResponse';\r\n\r\nconst usedHost = url.contextPath();\r\nconst apiBaseUrl = usedHost + \"api/public/\"\r\nconst apiEntityBaseUrl = usedHost + \"api/app/entity/\"\r\nconst apiAccount = usedHost + \"api/member/account/\"\r\nconst apiAdmin = usedHost + \"api/app/admin/\"    \r\n\r\nexport const getEntityProperty = (entityName, app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_ENTITY_PROPERTY,\r\n        payload: {\r\n            entity: entityName\r\n        },\r\n        meta: {\r\n            type: types.GET_ENTITY_PROPERTY,\r\n            url: apiEntityBaseUrl.concat(\"config\"),\r\n            app: app,\r\n        }\r\n    };\r\n    return requested;\r\n}\r\n\r\n\r\nexport const getManagementMenus = (app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_MANAGEMENT_MENUS,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MANAGEMENT_MENUS,\r\n            url: apiEntityBaseUrl.concat(\"managementpages\"),\r\n            app: app,\r\n        }\r\n    };\r\n    return requested;\r\n}\r\n \r\n\r\nexport const setRequestId = (data:WebResponse, app) => {\r\n   \r\n    const ret= {\r\n        type: types.SET_REQUEST_ID,\r\n        payload: { loginStatus: data.loggedIn, referer:app, ...data },\r\n        meta: {\r\n            type: types.SET_REQUEST_ID, \r\n        }\r\n    };\r\n    console.debug(\"setRequestId: \", ret);\r\n    return ret;\r\n}\r\n\r\nexport const getMessageList = (app) => {\r\n    app.startLoading();\r\n    return {\r\n        type: types.GET_MESSAGE,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MESSAGE, app: app,\r\n            url: apiAdmin.concat(\"getmessages\")\r\n        }\r\n    };\r\n}\r\n\r\nexport const storeMessageLocally = (messages) => {\r\n\r\n    return {\r\n        type: types.STORE_MESSAGE,\r\n        payload: {\r\n            entities: messages\r\n        },\r\n        meta: {\r\n            type: types.STORE_MESSAGE,\r\n        }\r\n    };\r\n}\r\n    \r\n\r\nexport const performLogout = (app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGOUT,\r\n        payload: {},\r\n        meta: { app: app, type: types.DO_LOGOUT, url: apiAccount.concat(\"logout\") }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const performLogin = (username, password, app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGIN,\r\n        payload: {},\r\n        meta: {\r\n            type: types.DO_LOGIN, url: contextPath().concat(\"login?username=\" + username + \"&password=\" +\r\n                password + \"&transport_type=rest\"), app: app\r\n        }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const getLoggedUser = (app) => {\r\n    app.startLoading();\r\n    let request = {\r\n        type: types.GET_LOGGED_USER,\r\n        payload: {},\r\n        meta: { type: types.GET_LOGGED_USER, url: apiAccount.concat(\"user\"), app: app }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setLoggedUser = (user: User) => {\r\n\r\n    let request = {\r\n        type: types.SET_LOGGED_USER,\r\n        payload: { user: Object.assign(new User(), user) },\r\n        meta: { type: types.SET_LOGGED_USER }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setApplicationProfile = (applicationProfile: ApplicationProfileModel) => {\r\n\r\n    let request = {\r\n        type: types.SET_APPLICATION_PROFILE,\r\n        payload: { applicationProfile: applicationProfile },\r\n        meta: { type: types.SET_APPLICATION_PROFILE }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const removeEntity = () => ({\r\n    type: types.REMOVE_SHOP_ENTITY,\r\n    payload: {},\r\n    meta: { type: types.REMOVE_SHOP_ENTITY }\r\n})\r\n\r\n\r\nexport const  setMainApp = (mainApp:any) => ({\r\n    type: types.SET_MAIN_APP,\r\n    payload: mainApp,\r\n    meta: { type: types.SET_MAIN_APP }\r\n})\r\n\r\n","\r\nexport const mapCommonUserStateToProps = (state) => {\r\n    return {\r\n        applicationProfile: state.userState.applicationProfile,\r\n        loggedUser: state.userState.loggedUser,\r\n        loginStatus: state.userState.loginStatus,\r\n        requestId: state.userState.requestId, \r\n        services: state.servicesState.services,\r\n        mainApp: state.appState.mainApp\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport './Loader.css'\r\n\r\nclass Loader extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            timer: 130,\r\n            intervalId: 0\r\n        }\r\n        this.update = () => {\r\n            if (this.state.timer < 0) {\r\n                clearInterval(this.state.intervalId);\r\n            }\r\n            console.log(\"tick\")\r\n            this.setState({ timer: this.state.timer - 1 })\r\n            if (this.state.timer < 0 && this.props.endMessage) {\r\n                this.props.endMessage();\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.withTimer == true) {\r\n            let intervalId = setInterval(this.update, 1, null);\r\n            this.setState({ intervalId: intervalId });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let className = \"message message-\" + this.props.type;\r\n\r\n        if (this.props.realtime == true) {\r\n            return <LoaderContent progress={this.props.progress} realtime={this.props.realtime} />\r\n        }\r\n\r\n        return (\r\n            <div className={className} >\r\n                <LoaderContent progress={this.props.progress} realtime={this.props.realtime} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nfunction LoaderContent(props) {\r\n    if (props.realtime) {\r\n        return (\r\n            <div className=\"row container-fluid bg-light\" style={{margin:0, position: 'fixed', zIndex: 100 }}>\r\n                <div className=\"col-1\">\r\n                <span style={{marginBottom:'3px'}} className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </div>\r\n                <div className=\"col-11 progress\" style={{padding:0, marginTop: '7px', height:'10px'}}  >\r\n                    <div className=\"bg-primary\" style={{\r\n                        width: props.progress + \"%\",\r\n                        transitionDuration: '50ms',\r\n                        margin: 0,\r\n                    }}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    return (\r\n        <button className=\"btn btn-dark \" type=\"button\" disabled>\r\n            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n            <span className=\" \">Loading...</span>\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default Loader;","import React, { Component } from 'react'\r\nimport { doItLater } from '../../utils/EventUtil';\r\nconst initialMargin = '-200px';\r\nconst transitionDuration = '200ms';\r\nclass State {\r\n    backColor: string = 'transparent';\r\n    marginTop: string = initialMargin;\r\n}\r\nclass Alert extends Component<any, State> {\r\n    yesButtonRef;\r\n    noButtonRef;\r\n    state: State = new State();\r\n    constructor(props) {\r\n        super(props);\r\n        this.yesButtonRef = React.createRef();\r\n        this.noButtonRef = React.createRef();\r\n    }\r\n    onYes = (e) => {\r\n        \r\n        this.close(()=>{\r\n            if (this.props.onYes) {\r\n                this.props.onYes(e);\r\n            }\r\n        });\r\n    }\r\n    close = (callback:()=>any)=> {\r\n        doItLater(()=>{\r\n            this.setState({backColor:'transparent', marginTop: initialMargin}, ()=>{\r\n                doItLater(callback, 100);\r\n                \r\n            });\r\n        }, 100);\r\n    }\r\n    onNo = (e) => {\r\n        \r\n        this.close(()=>{\r\n            if (this.props.onNo) {\r\n                this.props.onNo(e);\r\n            }\r\n        });\r\n    }\r\n    onClose = (e) => {\r\n       \r\n        this.close(()=>{\r\n            if (this.props.onClose) {\r\n                this.props.onClose(e);\r\n            }\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        const isError = this.props.isError == true;\r\n        if (!isError && this.yesButtonRef.current) {\r\n            this.yesButtonRef.current.focus();\r\n        } else if (isError && this.noButtonRef.current) {\r\n            this.noButtonRef.current.focus();\r\n        } else if (isError && this.yesButtonRef.current) {\r\n            this.yesButtonRef.current.focus();\r\n        }\r\n\r\n        doItLater(()=>{\r\n            this.setState({backColor:'rgba(100,100,100,0.7)', marginTop:'30vh'})\r\n        }, 100);\r\n    }\r\n\r\n    render() {\r\n        const title = this.props.title ? this.props.title : \"Info\";\r\n        const yesOnly = this.props.yesOnly == true;\r\n        const isError = this.props.isError == true;\r\n        const headerClassName = isError ? 'bg-danger' : 'bg-info';\r\n        const headerFontClassName = 'text-light';\r\n        return (\r\n            <>\r\n                <Backdrop bgColor={this.state.backColor} />\r\n                <div className=\"modal show\" style={{ display: 'block' }}  >\r\n                    <div className=\"modal-dialog -modal-dialog-centered\" \r\n                        style={{\r\n                            transitionDuration:  transitionDuration,\r\n                            marginTop: this.state.marginTop\r\n                        }}\r\n                    >\r\n                        <div className=\"modal-content\" style={{marginTop:'5px',}} >\r\n                            <Header fontClassName={headerFontClassName} className={headerClassName} title={title} onClose={this.onClose} />\r\n                            <div className=\"modal-body\" > {this.props.children} </div>\r\n                            < Footer noButtonRef={this.noButtonRef} yesButtonRef={this.yesButtonRef} yesOnly={yesOnly} onYes={this.onYes} onNo={this.onNo} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nfunction Backdrop(props:{bgColor:string}) {\r\n    return (\r\n        <div className=\"modal-backdrop\" style={{ transitionDuration:transitionDuration, backgroundColor: props.bgColor }\r\n        } > </div>\r\n    );\r\n}\r\n\r\nfunction Footer(props) {\r\n    return (\r\n        <div className={\"modal-footer \" + props.className} >\r\n            <button ref={props.yesButtonRef} type=\"button\"\r\n                onClick={props.onYes} className=\"btn btn-outline-primary\" > Yes </button>\r\n            {\r\n                props.yesOnly ? null : <button ref={props.noButtonRef} type=\"button\"\r\n                    onClick={props.onNo} className=\"btn btn-outline-secondary\" > No </button>}\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Header(props) {\r\n    return (<div className={\"modal-header \" + props.className} >\r\n        <h5 className={\"modal-title \" + props.fontClassName} id=\"exampleModalCenterTitle\" > {props.title} </h5>\r\n        < button onClick={props.onClose} type=\"button\" className=\"close\" >\r\n            <span aria-hidden=\"true\" className={props.fontClassName} > <i className=\"fas fa-times\" /> </span>\r\n        </button>\r\n    </div>)\r\n}\r\n\r\nexport default Alert;","import { base64StringFileSize } from './StringUtil';\r\nimport { ChangeEvent } from 'react';\r\nexport const byId = (id) => { return document.getElementById(id) }\r\n \r\nexport function toBase64(file, referer, callback) {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file.files[0]);\r\n    reader.onload = () => callback(reader.result, referer);\r\n    reader.onerror = error => {\r\n        alert(\"Error Loading File\");\r\n    }\r\n}\r\n \r\nexport const getHtmlInputElement = (e:ChangeEvent) : HTMLInputElement => {\r\n    const target = e.target as HTMLInputElement;\r\n    return target;\r\n}\r\n\r\nexport const toBase64v2 = (fileInput): Promise<string> => {\r\n    return new Promise<string>((resolve, reject) =>{\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(fileInput.files[0]);\r\n            console.debug(\"fileInput.files[0]: \", fileInput.files[0]);\r\n            reader.onload = function () { resolve(new String(reader.result).toString()); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nexport const resizeImage = (data:string, ratio:number, extension:string) => {\r\n    const actualFilesize = base64StringFileSize(data);\r\n    console.debug(\"Actual filesize: \", actualFilesize);\r\n    return new Promise<string>(function(resolve, reject){\r\n        const img = new Image();\r\n        img.src = data;\r\n        img.onload = function () {\r\n            const width = img.width   * ratio;\r\n            const height = img.height   * ratio;\r\n            // create an off-screen canvas\r\n            var canvas:HTMLCanvasElement = document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d');\r\n            if (!ctx) return;\r\n            // set its dimension to target size\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            var mime_type = \"image/\"+extension;\r\n            // draw source image into the off-screen canvas:\r\n            ctx.drawImage(img, 0, 0, width, height);\r\n            console.debug(\"Resize ratio: \", ratio, \"mime_type: \",mime_type);\r\n            // encode image to data-uri with base64 version of compressed image\r\n            const dataURL = (canvas.toDataURL());\r\n            console.debug(\"Resized filesize: \", base64StringFileSize(dataURL));\r\n            resolve(dataURL);\r\n        }\r\n    });\r\n}\r\n\r\nexport function toBase64FromFile(file) {\r\n    return new Promise(function (resolve, reject) {\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = function () { resolve(reader.result); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\n\r\nexport const checkExistance = function (...ids) {\r\n    for (let i = 0; i < ids.length; i++) {\r\n        if (byId(ids[i]) == null) {\r\n            console.log(\"component with id:\", ids[i], \"does not exist\");\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * \r\n * @param {Number} totalButton \r\n * @param {Number} currentPage \r\n */\r\nexport const createNavButtons = (totalButton, currentPage) => {\r\n    totalButton = Math.ceil(totalButton);\r\n    if (!currentPage) { currentPage = 0 }\r\n    let buttonData = new Array();\r\n    let min = currentPage - 3 < 0 ? 0 : currentPage - 3;\r\n    let max = currentPage + 3 > totalButton ? totalButton : currentPage + 3;\r\n\r\n    if (min != 0) {\r\n        buttonData.push({\r\n            text: 1,\r\n            value: 0\r\n        });\r\n    }\r\n\r\n    for (let index = min; index < max; index++) {\r\n        buttonData.push({\r\n            text: index + 1,\r\n            value: index\r\n        });\r\n    }\r\n\r\n    if (max != totalButton) {\r\n        buttonData.push({\r\n            text: totalButton,\r\n            value: totalButton - 1\r\n        });\r\n    }\r\n\r\n\r\n    return buttonData;\r\n}\r\n\r\n\r\nexport const getDropdownOptionsMonth = () => {\r\n    let options:any[] = [];\r\n    for (let i = 1; i <= 12; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}\r\nexport const getDropdownOptionsYear = (from, to) => {\r\n    let options:any[] = [];\r\n    for (let i = from; i <= to; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}","\nexport enum FieldType {\n\n\tFIELD_TYPE_TEXT = \"FIELD_TYPE_TEXT\",\n\tFIELD_TYPE_IMAGE =\n\t'FIELD_TYPE_IMAGE',\n\tFIELD_TYPE_CURRENCY =\n\t'FIELD_TYPE_CURRENCY',\n\tFIELD_TYPE_NUMBER =\n\t'FIELD_TYPE_NUMBER',\n\tFIELD_TYPE_HIDDEN =\n\t'FIELD_TYPE_HIDDEN',\n\tFIELD_TYPE_COLOR =\n\t'FIELD_TYPE_COLOR',\n\tFIELD_TYPE_CHECKBOX =\n\t'FIELD_TYPE_CHECKBOX',\n\tFIELD_TYPE_FIXED_LIST =\n\t'FIELD_TYPE_FIXED_LIST',\n\tFIELD_TYPE_DYNAMIC_LIST =\n\t'FIELD_TYPE_DYNAMIC_LIST',\n\tFIELD_TYPE_TEXTAREA =\n\t'FIELD_TYPE_TEXTAREA',\n\tFIELD_TYPE_PLAIN_LIST =\n\t'FIELD_TYPE_PLAIN_LIST',\n\tFIELD_TYPE_DATE =\n\t'FIELD_TYPE_DATE',\n\tFIELD_TYPE_TEXTEDITOR = \n\t'FIELD_TYPE_TEXTEDITOR',\n\tFIELD_TYPE_DATETIME=\n\t'FIELD_TYPE_DATETIME',\n}\n\n","import BaseModel from './BaseModel';\n\nexport default class ApplicationProfileModel extends BaseModel{\n\tname?:string;\n\tappCode?:string;\n\tshortDescription?:string;\n\tabout?:string;\n\twelcomingMessage?:string;\n\taddress?:string;\n\tcontact?:string;\n\twebsite?:string;\n\ticonUrl?:string;\n\tpageIcon?:string;\n\tbackgroundUrl?:string;\n\tfooterIconClass?:string;\n\tcolor?:string;\n\tfontColor?:string;\n\tassetsPath?:string;\n\tFooterIconClassValue?:string;\n\n}\n","import { Component } from 'react';\r\nimport { byId } from '../utils/ComponentUtil';\r\nimport WebResponse from './../models/WebResponse';\r\nimport ApplicationProfileModel from './../models/ApplicationProfileModel';\r\nimport User from '../models/UserModel';\r\nimport Services from './../services/Services';\r\nimport { AuthorityType } from '../models/AuthorityType';\r\nimport WebRequest from './../models/WebRequest';\r\nimport WebSocketService from './../services/WebSocketService';\r\nimport { getStore } from './../redux/configureStore';\r\nimport { doItLater } from './../utils/EventUtil';\r\n\r\nexport default class BaseComponent extends Component<any, any> {\r\n    parentApp: any;\r\n    authenticated: boolean = true;\r\n    state: any = { updated: new Date() };\r\n    websocketService:WebSocketService;\r\n    constructor(props: any, authenticated = false) {\r\n        super(props);\r\n        this.websocketService = this.getServices().websocketService;\r\n        this.authenticated = authenticated\r\n        this.state = {\r\n            ...this.state\r\n        }\r\n        this.parentApp = this.props.mainApp;\r\n    }\r\n\r\n    validateLoginStatus = (callback?:()=>any) :boolean => {\r\n        if (this.authenticated == false) {\r\n            if (callback) callback();\r\n            return true;\r\n        }\r\n        if (this.isLoggedUserNull()) {\r\n            this.backToLogin();\r\n            return false;\r\n        }\r\n        if (callback) callback();\r\n        return true;\r\n    }\r\n\r\n    scrollTop = () => {\r\n        // console.info(\"SCROLL TOP\");\r\n        const opt:ScrollToOptions = { top:0,  behavior: 'smooth' };\r\n        doItLater(()=>{\r\n        window.scrollTo(opt);\r\n        }, 100);\r\n    }\r\n\r\n    protected sendWebSocket = (url: string, payload: WebRequest) => {\r\n       this.websocketService. sendToWebsocket(url, payload);\r\n    }\r\n\r\n    protected setWsUpdateHandler = (handler: Function | undefined) => {\r\n        if (this.parentApp) {\r\n            this.parentApp.setWsUpdateHandler(handler);\r\n        }\r\n    }\r\n    //:{id:string, subscribeUrl:string, callback(response:WebResponse):any}\r\n    protected addWebsocketSubscriptionCallback = (...callbacks:any[]) => {\r\n        this.websocketService.registerWebSocketCallbacks(...callbacks);\r\n        \r\n    }\r\n\r\n    protected connectWs = () =>{\r\n        this.websocketService.performWebsocketConnection();\r\n    }\r\n    \r\n   protected addOnWsConnectCallbacks = (...onWsConnectCallbacks) => {\r\n    this.websocketService.addOnWsConnectCallbacks(...onWsConnectCallbacks);\r\n    }\r\n    protected removeWSSubscriptionCallback = (...id) => {\r\n        for (let i = 0; i < id.length; i++) {\r\n            this.websocketService.removeWebsocketCallback(id[i]);\r\n        }\r\n       \r\n        this.websocketService. performWebsocketConnection();\r\n    }\r\n    protected resetWsUpdateHandler = () => {\r\n        if (this.parentApp) {\r\n            this.parentApp.resetWsUpdateHandler();\r\n        }\r\n    }\r\n\r\n    getApplicationProfile(): ApplicationProfileModel {\r\n        return this.props.applicationProfile == null ? new ApplicationProfileModel() : this.props.applicationProfile;\r\n    }\r\n\r\n    handleInputChange = (event: any) => {\r\n        const target = event.target;\r\n        const value = target.type == 'checkbox' ? target.checked : target.value;\r\n        this.setState({ [target.name]: value });\r\n        console.debug(\"input changed: \", target.name, value);\r\n    }\r\n\r\n    focusToActiveField() {\r\n        if (this.state.activeId != null && byId(this.state.activeId) != null) {\r\n            const element = byId(this.state.activeId);\r\n            if (element != null) {\r\n                element.focus();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param {boolean} withProgress \r\n     */\r\n    startLoading(withProgress: boolean) {\r\n        this.parentApp.startLoading(withProgress);\r\n    }\r\n\r\n    endLoading() {\r\n        this.parentApp.endLoading();\r\n    }\r\n    /**\r\n     * api response must be instance of WebResponse\r\n     * @param method \r\n     * @param withProgress \r\n     * @param successCallback \r\n     * @param errorCallback \r\n     * @param params \r\n     */\r\n    doAjax(method: Function, withProgress: boolean, successCallback: Function, errorCallback?: Function, ...params: any) {\r\n        this.startLoading(withProgress);\r\n\r\n        method(...params).then(function (response: WebResponse) {\r\n            if (successCallback) {\r\n                successCallback(response);\r\n            }\r\n        }).catch(function (e) {\r\n            if (errorCallback) {\r\n                errorCallback(e);\r\n            } else {\r\n                if (typeof (e) == 'string') {\r\n                    alert(\"Operation Failed: \" + e);\r\n                }\r\n                alert(\"resource not found\");\r\n            }\r\n        }).finally(() => {\r\n            this.endLoading();\r\n        })\r\n    }\r\n\r\n    commonAjax(method: Function, successCallback: Function, errorCallback: Function, ...params: any) {\r\n        this.doAjax(method, false, successCallback, errorCallback, ...params);\r\n    }\r\n    commonAjaxWithProgress(method: Function, successCallback: Function, errorCallback: Function, ...params: any) {\r\n        this.doAjax(method, true, successCallback, errorCallback, ...params);\r\n    }\r\n    getLoggedUser(): User | undefined {\r\n        const user: User | undefined = this.props.loggedUser;\r\n        if (!user) return undefined;\r\n        user.editPassword = \"^_^\";\r\n        return Object.assign(new User(), user);\r\n    }\r\n    isAdmin = (): boolean => {\r\n        const user = this.getLoggedUser();\r\n        if (!user) return false;\r\n        return user.role == AuthorityType.ROLE_ADMIN;\r\n    }\r\n    isLoggedUserNull(): boolean {\r\n        return false == this.props.loginStatus || null == this.props.loggedUser;\r\n    }\r\n    isUserLoggedIn(): boolean {\r\n        return true == this.props.loginStatus && null != this.props.loggedUser;\r\n    }\r\n    showConfirmation = (body: any): Promise<boolean> => {\r\n        const app = this;\r\n        return new Promise((resolve, reject) => {\r\n            const onYes = (e) => {\r\n                resolve(true);\r\n            }\r\n            const onNo = (e) => {\r\n                resolve(false);\r\n            }\r\n            app.parentApp.showAlert(\"Confirmation\", body, false, onYes, onNo);\r\n        });\r\n\r\n    }\r\n    showConfirmationDanger = (body: any): Promise<any> => {\r\n        const app = this;\r\n        return new Promise(function (resolve, reject) {\r\n            const onYes = function (e) {\r\n                resolve(true);\r\n            }\r\n            const onNo = function (e) {\r\n                resolve(false);\r\n            }\r\n            app.parentApp.showAlertError(\"Confirmation\", body, false, onYes, onNo);\r\n        });\r\n\r\n    }\r\n    showInfo = (body: any) => {\r\n        this.parentApp.showAlert(\"Info\", body, true, function () { });\r\n    }\r\n    showError = (body: any) => {\r\n        this.parentApp.showAlertError(\"Error\", body, true, function () { });\r\n    }\r\n\r\n    backToLogin() {\r\n        if (this.props.history != null) {\r\n            this.props.history.push(\"/login\");\r\n        }\r\n    }\r\n    refresh() {\r\n        this.setState({ updated: new Date() });\r\n    }\r\n\r\n    showCommonErrorAlert = (e: any) => {\r\n        console.error(e);\r\n\r\n        let message;\r\n        if (e.response && e.response.data) {\r\n            message = e.response.data.message;\r\n        } else {\r\n            message = e;\r\n        }\r\n        this.showError(\"Operation Failed: \" + message);\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.authenticated == true && this.isLoggedUserNull()) {\r\n            console.debug(typeof this, \"BACK TO LOGIN\");\r\n            this.validateLoginStatus();\r\n        }\r\n    }\r\n\r\n    getServices = (): Services => {\r\n        const store = getStore(); \r\n        const state = store.getState();\r\n        return state.servicesState.services;\r\n    }\r\n     \r\n}","\r\nimport React  from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport { getMenus } from '../../constant/Menus';\r\nimport './Header.css';\r\nimport User from '../../models/UserModel';\r\nimport { baseImageUrl } from './../../constant/Url';\r\nimport Menu from './../../models/settings/Menu';\r\nimport ApplicationProfileModel from './../../models/ApplicationProfileModel';\r\nclass IState {\r\n    showNavLinks: boolean = false;\r\n}\r\nclass Header extends BaseComponent {\r\n    state: IState = new IState();\r\n    buttonToggleNavRef: React.RefObject<HTMLButtonElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    toggleNavLinks = () => {\r\n        this.setState({ showNavLinks: !this.state.showNavLinks });\r\n    }\r\n    onLogout = (e: any) => {\r\n        const app = this;\r\n        app.showConfirmation(\"Logout?\").then(\r\n            function (ok) {\r\n                if (ok) {\r\n                    app.props.performLogout(app.parentApp);\r\n                }\r\n            }\r\n        )\r\n    }\r\n    setMenu = (menu: Menu) => {\r\n        if (this.state.showNavLinks && this.buttonToggleNavRef.current) {\r\n            this.buttonToggleNavRef.current.click();\r\n        }\r\n        this.props.setMenu(menu);\r\n\r\n    }\r\n    render() {\r\n        const showNavLinks: boolean = this.state.showNavLinks;\r\n        const menus = getMenus();\r\n        const user = this.getLoggedUser();\r\n        return (\r\n            <div className=\"bg-dark container-fluid\" style={{ position: 'fixed', zIndex: 55, padding: 0, margin: 0 }}>\r\n                <HeaderTop appProfile={this.getApplicationProfile()} />\r\n                <nav id=\"navbar\" className=\"navbar navbar-expand-lg navbar-dark bg-dark\" style={{ width: '100%' }}>\r\n\r\n                    <a id=\"navbar-brand\" className=\"navbar-brand\" href=\"#\">{this.getApplicationProfile().name}</a>\r\n                    \r\n                    <NavbarToggleButton btnRef={this.buttonToggleNavRef} toggleNavLinks={this.toggleNavLinks} showNavLinks={showNavLinks} />\r\n                    \r\n                    <div className={\"collapse navbar-collapse\"} id=\"navbarToggler\">\r\n                        <ul id=\"navbar-top\" className=\"navbar-nav mr-auto mt-2 mt-lg-0\">\r\n                            {menus.map(menu => {\r\n                                if (menu == null || (menu.authenticated && !user)) return null;\r\n                                if (menu.userAuthorized && menu.userAuthorized(user) == false) return null;\r\n                               \r\n                                const isActive = this.props.activeMenuCode == menu.code;\r\n                                return (\r\n                                    <MenuItem key={\"header-menu-\" + new String(menu.code)}\r\n                                        isActive={isActive} menu={menu} setMenu={this.setMenu} />\r\n                                )\r\n                            })}\r\n                        </ul >\r\n                        <UserIcon setMenuNull={this.props.setMenuNull}\r\n                            onLogout={this.onLogout} user={user} />\r\n\r\n                    </div >\r\n                </nav >\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst NavbarToggleButton = (props: { showNavLinks: boolean, btnRef: React.RefObject<HTMLButtonElement>, toggleNavLinks(e): any }) => {\r\n    return (\r\n        <button ref={props.btnRef} onClick={props.toggleNavLinks} className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\r\n            data-target=\"#navbarToggler\" aria-controls=\"navbarToggler\"\r\n            aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n            <i className={props.showNavLinks ? \"fas fa-times\" : \"fas fa-bars\"} />\r\n        </button>\r\n    )\r\n}\r\nconst MenuItem = (props: { isActive: boolean, menu: Menu, setMenu(m: Menu): any }) => {\r\n    const menu = props.menu;\r\n    return (\r\n        <li className={\"nav-item \" + (props.isActive ? \"active nav-active\" : \"nav-inactive\")}>\r\n            <Link onClick={() => props.setMenu(menu)} className={\"nav-link  \"}\r\n                to={menu.url}><span>{menu.name}</span>\r\n            </Link></li>\r\n    )\r\n}\r\nconst HeaderTop = (props:{appProfile:ApplicationProfileModel}) => {\r\n    return (\r\n        <header id=\"navbar-brand-top\" style={{ paddingLeft: '0.5rem' }} className=\"container-fluid\">\r\n            <a style={{ fontSize: '15px' }} className=\"text-white navbar-brand\" href=\"#\">\r\n                <strong>{props.appProfile.name}</strong>\r\n            </a>\r\n        </header>\r\n    );\r\n}\r\nconst UserIcon = (props: { user: User | undefined, setMenuNull(): any, onLogout(e): any }) => {\r\n    if (props.user) {\r\n        return (\r\n            <form className=\"form-inline my-2 my-lg-0\">\r\n                <Link onClick={props.setMenuNull} style={{ marginRight: \"5px\" }} className=\"btn btn-light btn-sm my-2 my-sm-0\"\r\n                    to='/settings/user-profile'>\r\n                    <img width=\"20\" src={baseImageUrl() + props.user.profileImage} className=\"rounded rounded-circle\" />\r\n                        &nbsp;{props.user.displayName}\r\n                </Link>\r\n                <a style={{ marginRight: '5px' }} className=\"btn btn-danger btn-sm  my-2 my-sm-0\"\r\n                    onClick={props.onLogout}><i className=\"fas fa-sign-out-alt\"></i>&nbsp;Logout\r\n\t\t\t\t</a>\r\n            </form>);\r\n    }\r\n    return (\r\n        <form className=\"form-inline my-2 my-lg-0\">\r\n            <Link style={{ marginRight: '5px' }} onClick={props.setMenuNull} className=\"btn btn-sm btn-info my-2 my-sm-0\"\r\n                to='/login'> <i className=\"fas fa-sign-in-alt\"></i>&nbsp;Login\r\n        </Link>\r\n        </form>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Header))","import React from 'react' \nimport BaseComponent from './BaseComponent';\nexport default class BasePage extends BaseComponent {\n\n    protected title:undefined|string;\n    constructor(props, title :string, authentiacted:boolean = false) {\n        super(props, authentiacted);\n        this.title = title;\n        if (this.title) {\n            document.title = this.title;\n        }\n    }\n    componentDidMount() {\n        this.validateLoginStatus(()=>{\n            this.scrollTop();\n        });\n    }\n     \n    titleTag(additionalText?:string) {\n        return <React.Fragment>\n            <h2>{this.title} {additionalText??\"\"}</h2>\n            <hr/>\n        </React.Fragment>\n    }\n    // render () {\n    //     return (\n    //         <></>\n    //     )\n    // }\n}","\r\nimport BaseComponent from './../BaseComponent';\r\nimport BasePage from './../BasePage';\r\nexport default class BaseMainMenus extends BasePage {\r\n\r\n    title:string = \"\";\r\n    constructor(props, title:string, authenticated:boolean = false) {\r\n        super(props, title, authenticated);\r\n    }\r\n\r\n     \r\n\r\n}","\r\nimport React, { Component } from 'react';\r\nexport default class Card extends Component<any, any> {\r\n    constructor(props: any) {\r\n        super(props)\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div {...this.props.attributes} className={\"card \" + (this.props.className??\"\")}>\r\n                {this.props.title ? <div className=\"card-header\">\r\n                    {this.props.title}\r\n                </div> : null}\r\n                <div className=\"card-body\">\r\n                    {this.props.children}\r\n                </div>\r\n                {this.props.footerContent != undefined ?\r\n                    <div className=\"card-footer\">\r\n                        {this.props.footerContent}\r\n                    </div>\r\n                    : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseMainMenus from '../../../layout/BaseMainMenus';\r\nimport User from '../../../../models/UserModel';\r\nimport '../Dashboard.css';\r\nimport Card from '../../../container/Card';\r\n\r\nclass DashboardMain extends BaseMainMenus {\r\n    constructor(props: any) {\r\n        super(props, \"Dashboard\", true);\r\n    }\r\n\r\n    render() {\r\n        const user: User | undefined = this.getLoggedUser();\r\n        if (!user) return null;\r\n        return (\r\n            <div id=\"DashboardMain\" className=\"section-body container-fluid\" >\r\n                <h2>Dashboard</h2>\r\n                <div className=\"row\">\r\n                    <Card className=\"col-md-3 bg-light border border-dark container-fluid text-dark\">\r\n                        Welcome,<p><strong>{user.displayName}  </strong>\r\n                        </p>\r\n                        <p className=\"badge badge-dark\">{user.role?.toString().toLowerCase().split(\"_\")[1]}</p>\r\n                    </Card>\r\n                    <Card className=\"col-md-3 bg-light border border-primary container-fluid text-center\">\r\n                        <Link to=\"/conference\" className=\"text-primary \" >\r\n                            <h1><i className=\"fas fa-video\" /></h1>\r\n                            <h3>My Room</h3>\r\n                        </Link>\r\n                    </Card>\r\n                    <Card className=\"col-md-3 bg-light border border-success container-fluid text-center\">\r\n                        <Link to=\"/conference/room\" className=\"text-success \">\r\n                            <h1><i className=\"fas fa-users\" /></h1>\r\n                            <h3>Join Room</h3>\r\n                        </Link>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(DashboardMain))","\r\nimport React, { Component } from 'react';\r\ninterface IProps {\r\n    show?:boolean;\r\n    className?:string;\r\n    style?:any;\r\n    onClick?:any;\r\n    iconClassName?:string;\r\n    attributes?:any;\r\n}\r\nexport default class AnchorButton extends Component<IProps, any>\r\n{\r\n    constructor(props:any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className??\"btn btn-outline-secondary\";\r\n        return (\r\n            <a style={this.props.style} {...this.props.attributes} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName?\r\n                <span style={this.props.children?{marginRight:'5px'}:{}}><i className={this.props.iconClassName}/></span>\r\n                :\r\n                null}\r\n                {this.props.children}\r\n            </a>\r\n        )\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nimport AnchorButton from '../navigation/AnchorButton';\r\nclass IState {\r\n    show:boolean = true\r\n}\r\nexport default class Modal extends Component<any, IState> {\r\n    state:IState = new IState();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    hideModal = () => {\r\n        this.setState({show:false});\r\n    }\r\n    showModal = () => {\r\n        this.setState({show:true});\r\n    }\r\n    render() {\r\n       if (this.props.show == false) { return null; }\r\n        const title = this.props.title?? \"Title\"; \r\n        if (this.props.toggleable == true && this.state.show == false) {\r\n            return (\r\n                <AnchorButton style={{marginBottom:'10px'}} onClick={this.showModal} iconClassName=\"fas fa-angle-down\" >Show {title}</AnchorButton>\r\n            )\r\n        }\r\n        const props = (({ style, show, footerContent, toggleable, ...props }) => props)(this.props) // remove b and c\r\n        return (\r\n            <div {...props} className=\"modal-content \" style={{...props.style, marginBottom:'10px'}}>\r\n                <div className=\"modal-header\">\r\n                    <h5 className=\"modal-title\">{title}</h5>\r\n                    {this.props.toggleable?\r\n                    <button type=\"button\" className=\"btn btn-sm\" onClick={this.hideModal} aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">\r\n                            <i className='fas fa-times'/>\r\n                        </span>\r\n                    </button>\r\n                    :\r\n                    null}\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                    {this.props.children}\r\n                </div>\r\n                {this.props.footerContent || this.props.showFooter == true?\r\n                <div className=\"modal-footer\">\r\n                    {this.props.footerContent}\r\n                </div>\r\n                :null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","\nexport default class Filter{\n\tlimit?:number;\n\tpage?:number;\n\torderType?:string;\n\torderBy?:string;\n\tcontains?:boolean;\n\texacts?:boolean;\n\tday?:number;\n\tyear?:number;\n\tmonth?:number;\n\tfieldsFilter?:{};\n\tavailabilityCheck?:Boolean;\n\tdayTo?:number;\n\tmonthTo?:number;\n\tyearTo?:number;\n\tmaxValue?:number;\n\tuseExistingFilterPage?:boolean;\n\n}\n","\r\nimport EntityElement from \"./EntityElement\";\r\nimport { FieldType } from \"../FieldType\";\r\nimport HeaderProps from '../HeaderProps'; \r\n\r\nexport default class EntityProperty{\r\n\tgroupNames?:string;\r\n\tentityName?:string;\r\n\talias?:string;\r\n\tfieldNames?:string;\r\n\tidField?:string;\r\n\tdetailFieldName?:string; \r\n\tformInputColumn?:number;\r\n\teditable:boolean = true;\r\n\tcreatable:boolean = true; \r\n\telements:EntityElement[] = new Array();\r\n\tfieldNameList?:string[]; \r\n\twithProgressWhenUpdated:boolean = false;\r\n\r\n\tstatic getEntityElement = (prop: EntityProperty, id:string) :EntityElement|undefined => {\r\n\t\tfor (let i = 0; i < prop.elements.length; i++) {\r\n\t\t\tconst element = prop.elements[i];\r\n\t\t\tif (element.id == id) {\r\n\t\t\t\treturn element;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tstatic getHeaderLabels = (prop:EntityProperty) : HeaderProps[] => {\r\n\t\tconst result:HeaderProps[] = new Array();\r\n\t\tif (prop.elements == undefined) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tconst elements:EntityElement[] = prop.elements;\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\r\n\t\t\tconst element = elements[i];\r\n\t\t\tconst header:HeaderProps=  {\r\n\t\t\t\tlabel:element.labelName,\r\n\t\t\t\tvalue:element.id,\r\n\t\t\t\tisDate:element.type == 'date',\r\n\t\t\t\tfilterable: element.filterable\r\n\t\t\t};\r\n\t\t\tresult.push(header);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tstatic getRecordId(record:any, prop:EntityProperty) {\r\n\t\tconst elements = prop.elements;\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tconst element = elements[i];\r\n\t\t\tif (element.identity) {\r\n\t\t\t\treturn record[element.id];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic hasTextEditorField = (elements:EntityElement[]) => {\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tif(elements[i].fieldType == FieldType.FIELD_TYPE_TEXTEDITOR) return true;\r\n\t\t\t\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n}\r\n","import React from 'react';\r\nimport EntityProperty from '../models/settings/EntityProperty';\r\nimport EntityElement from '../models/settings/EntityElement';\r\nimport { baseImageUrl } from '../constant/Url';\r\nimport { FieldType } from '../models/FieldType';\r\nimport { beautifyNominal } from './StringUtil';\r\nexport default class EntityValues {\r\n\tstatic parseValues(object: any, prop: EntityProperty): Array<any> {\r\n\t\tconst result = new Array();\r\n\t\tconst elemnents: EntityElement[] = prop.elements;\r\n\t\tfor (let i = 0; i < elemnents.length; i++) {\r\n\t\t\tconst element = elemnents[i];\r\n\t\t\tconst elementid = element.id;\r\n\t\t\tlet value: any = object[elementid];\r\n\t\t\tif (value == null) {\r\n\t\t\t\tresult.push(value);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tswitch (element.fieldType) { \r\n\t\t\t\tcase FieldType.FIELD_TYPE_DATE:\r\n\t\t\t\t\tvalue = new Date(value).toDateString();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DATETIME:\r\n\t\t\t\t\tvalue = new Date(value).toLocaleString();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_IMAGE:\r\n\t\t\t\t\tconst imgLink = new String(value).split(\"~\")[0];\r\n\t\t\t\t\tvalue = <img src={baseImageUrl() + imgLink} width=\"50\" height=\"50\" />\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_COLOR:\r\n\t\t\t\t\tvalue = <strong style={{ color: value }} >{value}</strong>\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_NUMBER:\r\n\t\t\t\t\tvalue = beautifyNominal(value);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_TEXTEDITOR:\r\n\t\t\t\t\tvalue = <div dangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t__html: new String(value).length > 100 ?\r\n\t\t\t\t\t\t\t(new String(value).substring(0, 100) + \"...\")\r\n\t\t\t\t\t\t\t: value\r\n\t\t\t\t\t}}></div>;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_CHECKBOX:\r\n\t\t\t\t\tvalue = value == true?<i>true</i> :<i>false</i>;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_FIXED_LIST:\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif (element.optionItemName  && element.optionItemName != \"\") {\r\n\t\t\t\t\t\tconst valueAsObj = object[elementid];\r\n\t\t\t\t\t\tvalue = valueAsObj[element.optionItemName ?? \"id\"];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvalue = object[elementid];\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresult.push(value);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}","\r\nimport React, { Component } from 'react';\r\nimport { uniqueId } from './../../utils/StringUtil';\r\ninterface IProps {\r\n    limit: number,\r\n    totalData: number,\r\n    activePage: number,\r\n    onClick: any\r\n}\r\nexport default class NavigationButtons extends Component<IProps, any> {\r\n    constructor(props: IProps) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const buttonIndexes = generateButtonValues(this.props.limit, this.props.totalData, this.props.activePage);\r\n        if (buttonIndexes.length == 0) { return null }\r\n        const lastIndex = buttonIndexes[buttonIndexes.length - 1];\r\n        const nextPage = this.props.activePage + 1 >= lastIndex  ? 0 : this.props.activePage + 1;\r\n        const previusPage = this.props.activePage - 1 < 0? lastIndex-1 : this.props.activePage - 1;\r\n        return (<div>\r\n            <nav aria-label=\"Page navigation example\">\r\n                <ul className=\"pagination\">\r\n                    <li className=\"page-item\"><a className=\"page-link\" onClick={(e) => this.props.onClick(previusPage)}>Previous</a></li>\r\n                    {buttonIndexes.map((page, i) => {\r\n                        return <li key={\"NAV-\"+uniqueId()} className={\"page-item \"+(page-1 == this.props.activePage?\"active\":\"\")}><a className=\"page-link \" onClick={(e) => this.props.onClick(page - 1)} >{page}</a></li>\r\n                    })}\r\n                    <li className=\"page-item\"><a className=\"page-link\" onClick={(e) => this.props.onClick(nextPage)}>Next</a></li>\r\n                </ul>\r\n            </nav>\r\n        </div>)\r\n    }\r\n}\r\n\r\nconst generateButtonValues = (limit: number, totalData: number, currentPage: number) => {\r\n\r\n    /* DISPLAYED BUTTONS */\r\n    const displayed_buttons: number[] = [];\r\n    const buttonCount = Math.ceil(totalData / limit);\r\n\r\n    // console.debug(\"current page:\", currentPage);\r\n    const min = (currentPage) - 1;\r\n    const max = (currentPage) + 3;\r\n    // const min = (currentPage) - 2;\r\n    // const max = (currentPage) + 2;\r\n\r\n    // console.debug(\"min\", min, \"current page:\", currentPage, \"max\", max);\r\n    if (buttonCount > 1) {\r\n        displayed_buttons.push(1);\r\n    }\r\n    for (let i = min; i <= max; i++) {\r\n        if (i > 1 && i <= buttonCount) {\r\n            (displayed_buttons.push(i));\r\n        }\r\n    }\r\n    if (max < buttonCount) {\r\n        displayed_buttons.push(buttonCount);\r\n    }\r\n    return displayed_buttons;\r\n}\r\n","import React from 'react'\r\nimport BaseComponent from './../../../../BaseComponent';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\n\r\nexport default class BaseField extends BaseComponent {\r\n    constructor(props) {\r\n        super(props, false);\r\n    }\r\n    componentDidMount() {\r\n        this.prepopulateForm();\r\n    }\r\n    prepopulateForm = () => {\r\n\r\n    }\r\n    getEntityElement = (): EntityElement => {\r\n        return this.props.entityElement;\r\n    }\r\n    getRequiredAttr = () => {\r\n        const requiredAttr = { required: this.getEntityElement().required == true }\r\n        return (\r\n            // null\r\n            requiredAttr\r\n        )\r\n    }\r\n}","\r\nimport React, { Fragment, Component } from 'react';\r\nimport { toBase64v2 } from '../../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport { baseImageUrl } from '../../../../../constant/Url';\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    singlePreviewData?: string,\r\n    showInputFile: boolean\r\n}\r\n  class FormInputImage extends BaseField {\r\n    state: IState = {\r\n        singlePreviewData: undefined,\r\n        showInputFile: false\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    changeSingleImageData = (e) => {\r\n        const app = this;\r\n        toBase64v2(e.target).then(function (data) {\r\n            app.setState({ singlePreviewData: data });\r\n        })\r\n    }\r\n    removeImage = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Remove image?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemoveImage();\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemoveImage = () => {\r\n        if (this.ref.current) {\r\n            this.ref.current.value = null;\r\n        }\r\n        this.setState({ singlePreviewData: undefined, showInputFile: false });\r\n    }\r\n    \r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit){ \r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue){ \r\n            return;\r\n        }\r\n        const fullUrl = baseImageUrl() + defaultValue;\r\n        this.setState({ singlePreviewData: fullUrl, showInputFile:true });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.showInputFile ?\r\n                    <input ref={this.ref}\r\n                        onChange={this.changeSingleImageData} type=\"file\" accept=\"image/*\"\r\n                        //  name={element.id}\r\n                          className='form-control' />\r\n\r\n                    :\r\n                    <Fragment>\r\n                        <p></p>\r\n                        <AnchorButton onClick={(e)=> this.setState({showInputFile:true})} iconClassName=\"fas fa-plus\" className=\"btn btn-info btn-sm\">Add Image</AnchorButton>\r\n                       \r\n                        <input type=\"hidden\" name={element.id} value=\"NULLED\" />\r\n                    </Fragment>\r\n                }\r\n                 <input value={this.state.singlePreviewData} type=\"hidden\" name={element.id} />\r\n                <ImagePreview imageData={this.state.singlePreviewData} />\r\n                <AnchorButton show={this.state.singlePreviewData != undefined} onClick={this.removeImage} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">remove</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputImage))","\r\nimport React, { Fragment, Component } from 'react';\r\nimport { toBase64v2 } from '../../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport { baseImageUrl } from '../../../../../constant/Url'; \r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    previewData: Map<number, string>,\r\n    inputElements: number[]\r\n}\r\nclass FormInputImageMultiple extends BaseField {\r\n    state: IState = {\r\n        previewData: new Map(),\r\n        inputElements: [1]\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    setImageData = (e, index) => {\r\n        const app = this;\r\n        toBase64v2(e.target).then(function (data) {\r\n            const previewData = app.state.previewData;\r\n            previewData.set(index, data);\r\n            app.setState({ previewData: previewData });\r\n        })\r\n    }\r\n\r\n    addInputElement = (e) => {\r\n        const element = this.state.inputElements;\r\n        if (element.length == 0) {\r\n            element.push(1);\r\n        } else {\r\n            element.push(element[element.length - 1] + 1);\r\n        }\r\n        this.setState({ inputElements: element });\r\n    }\r\n    removeInputElement = (removedIndex: number) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete image?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemoveInputElement(removedIndex);\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemoveInputElement = (removedIndex: number) => {\r\n        const previewData = this.state.previewData;\r\n        const element = this.state.inputElements;\r\n        for (let i = 0; i < element.length; i++) {\r\n            const index = element[i];\r\n            if (index == removedIndex) {\r\n                element.splice(i, 1);\r\n                previewData.delete(removedIndex);\r\n            }\r\n        }\r\n        this.setState({ inputElements: element, previewData: previewData });\r\n    }\r\n      \r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue || new String(defaultValue).trim() == \"\") {\r\n            return;\r\n        }\r\n        const previewData: Map<number, string> = this.state.previewData;\r\n        const imageNames: string[] = new String(defaultValue).split(\"~\");\r\n        const inputElements: number[] = new Array<number>();\r\n        for (let i = 0; i < imageNames.length; i++) {\r\n            const imageName: string = imageNames[i];\r\n            previewData.set(i, imageName);\r\n            inputElements.push(i);\r\n        }\r\n        this.setState({ previewData: previewData, inputElements: inputElements });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.inputElements.map(index => {\r\n                    const previewData: string | undefined = this.state.previewData.get(index);\r\n                    const isNull = previewData == undefined || new String(previewData).trim() == \"\";\r\n                    const isBase64 = !isNull && isBase64Image(previewData);\r\n                    return (\r\n                        <Fragment key={\"IMG\"+index+element.id}>\r\n                            {isNull ?\r\n                                <input onChange={(e) => this.setImageData(e, index)} type=\"file\" accept=\"image/*\"\r\n                                    name={element.id} className='form-control' /> : null}\r\n                            {isBase64 ?\r\n                                <div>\r\n                                    <input value={previewData} type=\"hidden\" name={element.id} />\r\n                                    <ImagePreview imageData={previewData} />\r\n                                </div>\r\n                                :\r\n                                !isNull ?\r\n                                    <div>\r\n                                        <input value={previewData} type=\"hidden\" name={element.id} className='form-control' />\r\n                                        <ImagePreview imageData={baseImageUrl() + previewData} />\r\n                                        <p className=\"badge badge-warning\">{previewData}</p>\r\n                                    </div> :\r\n                                    null\r\n                            }\r\n                            <AnchorButton show={this.state.previewData != undefined}\r\n                                onClick={(e: any) => this.removeInputElement(index)} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">\r\n                                remove {index}\r\n                            </AnchorButton>\r\n                        </Fragment>)\r\n                })}\r\n                <p></p>\r\n                <AnchorButton iconClassName=\"fas fa-plus\" onClick={this.addInputElement}>Add</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst isBase64Image = (string?: string) => {\r\n    return string && string.startsWith(\"data:image\");\r\n}\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputImageMultiple))\r\n","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport MasterDataService from '../../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../../models/WebResponse';\r\nimport BaseComponent from '../../../../BaseComponent'; \r\nimport { uniqueId } from '../../../../../utils/StringUtil';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    inputList: any[],\r\n    singlePreviewData?: string, \r\n}\r\nclass FormInputDropDown extends BaseField {\r\n    masterDataService: MasterDataService;\r\n    state: IState = {\r\n        inputList: [],\r\n        singlePreviewData: undefined, \r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props );\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    \r\n    inputListLoaded = (response: WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            throw new Error(\"Not found\");\r\n        }\r\n        this.setState({ inputList: response.entities });\r\n        this.prepopulateForm();\r\n    }\r\n    loadInputList = () => {\r\n        const element = this.getEntityElement();\r\n        // if (element.jsonList &&  element.jsonList != \"\") {\r\n        //     const list = JSON.parse(element.jsonList);\r\n        //     this.inputListLoaded({entities:list})\r\n        //     return;\r\n        // }\r\n\r\n        const code = element.entityReferenceClass;\r\n        this.commonAjax(\r\n            this.masterDataService.loadAllEntities,\r\n            this.inputListLoaded,\r\n            this.showCommonErrorAlert,\r\n            code\r\n        )\r\n    }\r\n\r\n    isNotReady = () => {\r\n        return this.state.inputList.length == 0;\r\n    }\r\n    validateInputType = () => {\r\n        console.debug(\"validateInputType\");\r\n        if (this.isNotReady()) {\r\n            this.loadInputList();\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateInputType();\r\n    }\r\n    componentDidMount() {\r\n        this.validateInputType();\r\n        this.prepopulateForm();\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n\r\n        let defaultInputValue = undefined;\r\n\r\n        if (this.state.inputList.length == 0) {\r\n            return;\r\n        }\r\n        const optionValueName = this.getEntityElement().optionValueName;\r\n        if (!optionValueName) return;\r\n        defaultInputValue = recordValue[optionValueName];\r\n\r\n        if (defaultInputValue) {\r\n            this.ref.current.value = defaultInputValue;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        \r\n        const element = this.getEntityElement();\r\n        if (this.isNotReady()) {\r\n            return <div className=\"form-group\">Loading...</div>\r\n        }\r\n\r\n        const options = this.state.inputList;\r\n        return (<select ref={this.ref} className=\"form-control\" name={element.id} >\r\n            {options.map(option => {\r\n                const optionItemValue = element.optionValueName;\r\n                const optionItemName = element.optionItemName;\r\n                if (!optionItemName || !optionItemValue) { return null; }\r\n                return (\r\n                    <option key={\"fid-\"+uniqueId()+\"-\"} value={option[optionItemValue]} >{option[optionItemName]}</option>\r\n                )\r\n            })}\r\n        </select>)\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputDropDown))","\r\nimport React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\ninterface Props {\r\n    show?:boolean,\r\n    to?:string,\r\n    className?:string,\r\n    iconClassName?:string,\r\n    attributes?:any,\r\n    style?:any,\r\n    onClick ?:(e)=>void\r\n\r\n}\r\nexport default class AnchorWithIcon extends Component<Props, any>\r\n{\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className ?? \"btn btn-outline-secondary\";\r\n        if (this.props.to) {\r\n            return <Link {...this.props.attributes} to={this.props.to} style={this.props.style} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName ?\r\n                    <span style={{ marginRight: '5px' }}><i className={this.props.iconClassName} /></span>\r\n                    :\r\n                    null}\r\n                {this.props.children}\r\n            </Link>\r\n        }\r\n        return (\r\n            <a {...this.props.attributes} tyle={this.props.style} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName ?\r\n                    <span style={{ marginRight: '5px' }}><i className={this.props.iconClassName} /></span>\r\n                    :\r\n                    null}\r\n                {this.props.children}\r\n            </a>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, { Component, Fragment, MouseEventHandler } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport MasterDataService from '../../../../../services/MasterDataService';\r\nimport './TextEditor.css'\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport AnchorWithIcon from '../../../../navigation/AnchorWithIcon';\r\nimport BaseField from './BaseField';\r\nclass IState {\r\n    editMode: boolean = false;\r\n    fieldValue: string = \"\";\r\n    updated: boolean = false;\r\n}\r\nclass FormInputTextEditor extends BaseField {\r\n    masterDataService: MasterDataService;\r\n    state: IState = new IState();\r\n    contentRef: React.RefObject<HTMLDivElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    } \r\n    formatDoc = (sCmd, sValue?) => {\r\n        const oDoc = this.contentRef.current;\r\n        if (!oDoc){\r\n            console.debug(\"oDOc is missing\");\r\n            return;\r\n        }\r\n        console.debug(\"commmand: \", sCmd);\r\n        if (this.validateMode()) { \r\n            const executed =  document.execCommand(sCmd, false, sValue); \r\n            console.debug(\"EXECUTED: \", executed, \" editable: \", oDoc.contentEditable);\r\n            oDoc.focus(); \r\n        }\r\n    }\r\n\r\n    validateMode = () => {\r\n        if (!this.state.editMode) { return true; }\r\n        alert(\"Uncheck \\\"Show HTML\\\".\");\r\n        if (this.contentRef.current) {\r\n            this.contentRef.current.focus();\r\n        }\r\n        return false;\r\n    }\r\n\r\n    setValue = (e) => {\r\n        if (this.contentRef.current) {\r\n            this.setState({fieldValue: this.contentRef.current.innerHTML, updated: true})\r\n        }\r\n       \r\n    }\r\n\r\n    setDocMode = (bToSource) => {\r\n        const oDoc = this.contentRef.current;\r\n        if (!oDoc) return;\r\n        var oContent;\r\n        if (bToSource) {\r\n            oContent = document.createTextNode(oDoc.innerHTML);\r\n            oDoc.innerHTML = \"\";\r\n            var oPre = document.createElement(\"pre\");\r\n            oDoc.contentEditable = \"false\";\r\n            oPre.id = \"sourceText\";\r\n            oPre.contentEditable = \"true\";\r\n            oPre.appendChild(oContent);\r\n            oDoc.appendChild(oPre);\r\n        } else {\r\n            if (document.all) {\r\n                oDoc.innerHTML = oDoc.innerText;\r\n            } else {\r\n                oContent = document.createRange();\r\n                oContent.selectNodeContents(oDoc.firstChild);\r\n                oDoc.innerHTML = oContent.toString();\r\n            }\r\n            oDoc.contentEditable = \"true\";\r\n        }\r\n        oDoc.focus();\r\n    }\r\n\r\n    printDoc = () => {\r\n        if (!this.validateMode()) { return; }\r\n        // var oPrntWin = window.open(\"\", \"_blank\", \"width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes\");\r\n        // oPrntWin.document.open();\r\n        // oPrntWin.document.write(\"<!doctype html><html><head><title>Print<\\/title><\\/head><body onload=\\\"print();\\\">\" + oDoc.innerHTML + \"<\\/body><\\/html>\");\r\n        // oPrntWin.document.close();\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.contentRef.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n        this.contentRef.current.innerHTML = recordValue;\r\n        this.setState({fieldValue: recordValue, updated: true});\r\n    }\r\n         \r\n    componentDidUpdate(){\r\n        console.debug(\"component updated\");\r\n    }\r\n\r\n    setEditMode = (mode:boolean) => {\r\n        this.setDocMode(mode);\r\n        this.setState({ editMode: mode});\r\n    }\r\n    paleteCommand = (e:any ) => {\r\n        const anchor:HTMLAnchorElement = e.target as HTMLAnchorElement;\r\n        const commmand = anchor.dataset['command'];\r\n        const value = anchor.dataset['value'];\r\n        if (commmand == 'clean') {\r\n            this.clean();\r\n        } else {\r\n            this.formatDoc(commmand, value);\r\n        }\r\n    }\r\n    clean = () => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Clean content?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                if (app.contentRef.current) {\r\n                    app.contentRef.current.innerHTML = \"\";\r\n                }\r\n            }\r\n        })\r\n    }\r\n    contentOnChange = (e) => {\r\n       this.setState({updated: false});\r\n    } \r\n    render() {\r\n\r\n        const element = this.getEntityElement();\r\n        return (\r\n            <div>\r\n                <input type=\"hidden\" value={this.state.fieldValue} name={element.id} />\r\n                <div id=\"toolBar1\" className=\"input-group\">\r\n                    <FormattingList onChange={this.formatDoc} />\r\n                    <FontList onChange={this.formatDoc} />\r\n                    <FontSizeOption onChange={this.formatDoc} />\r\n                    <FontColorOption onChange={this.formatDoc} />\r\n                    <BackgroundColorOption onChange={this.formatDoc} />\r\n                </div>\r\n                <div id=\"toolBar2\">\r\n                    <i  onMouseDown={(e)=>e.preventDefault()} onClick={this.paleteCommand} data-command=\"clean\" className=\"palete fas fa-broom\"></i>\r\n                    {/* onClick=\"if(validateMode()&&confirm('Are you sure?')){oDoc.innerHTML=sDefTxt};\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQbAD04KTRLYzFRjlldZl9vj1dusY14WYODhpWIbbSVFY6O7IOXw5qbms+wUbCztca0ccS4kdDQjdTLtMrL1O3YitHa7OPcsd/f4PfvrvDv8Pv5xv///////////////////yH5BAEKAB8ALAAAAAAWABYAAAV84CeOZGmeaKqubMteyzK547QoBcFWTm/jgsHq4rhMLoxFIehQQSAWR+Z4IAyaJ0kEgtFoLIzLwRE4oCQWrxoTOTAIhMCZ0tVgMBQKZHAYyFEWEV14eQ8IflhnEHmFDQkAiSkQCI2PDC4QBg+OAJc0ewadNCOgo6anqKkoIQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  className=\"palete fas fa-print \"></i>\r\n                    {/* onClick=\"printDoc();\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9oEBxcZFmGboiwAAAAIdEVYdENvbW1lbnQA9syWvwAAAuFJREFUOMvtlUtsjFEUx//n3nn0YdpBh1abRpt4LFqtqkc3jRKkNEIsiIRIBBEhJJpKlIVo4m1RRMKKjQiRMJRUqUdKPT71qpIpiRKPaqdF55tv5vvusZjQTjOlseUkd3Xu/3dPzusC/22wtu2wRn+jG5So/OCDh8ycMJDflehMlkJkVK7KUYN+ufzA/RttH76zaVocDptRxzQtNi3mRWuPc+6cKtlXZ/sddP2uu9uXlmYXZ6Qm8v4Tz8lhF1H+zDQXt7S8oLMXtbF4e8QaFHjj3kbP2MzkktHpiTjp9VH6iHiA+whtAsX5brpwueMGdONdf/2A4M7ukDs1JW662+XkqTkeUoqjKtOjm2h53YFL15pSJ04Zc94wdtibr26fXlC2mzRvBccEbz2kiRFD414tKMlEZbVGT33+qCoHgha81SWYsew0r1uzfNylmtpx80pngQQ91LwVk2JGvGnfvZG6YcYRAT16GFtW5kKKfo1EQLtfh5Q2etT0BIWF+aitq4fDbk+ImYo1OxvGF03waFJQvBCkvDffRyEtxQiFFYgAZTHS0zwAGD7fG5TNnYNTp8/FzvGwJOfmgG7GOx0SAKKgQgDMgKBI0NJGMEImpGDk5+WACEwEd0ywblhGUZ4Hw5OdUekRBLT7DTgdEgxACsIznx8zpmWh7k4rkpJcuHDxCul6MDsmmBXDlWCH2+XozSgBnzsNCEE4euYV4pwCpsWYPW0UHDYBKSWu1NYjENDReqtKjwn2+zvtTc1vMSTB/mvev/WEYSlASsLimcOhOBJxw+N3aP/SjefNL5GePZmpu4kG7OPr1+tOfPyUu3BecWYKcwQcDFmwFKAUo90fhKDInBCAmvqnyMgqUEagQwCoHBDc1rjv9pIlD8IbVkz6qYViIBQGTJPx4k0XpIgEZoRN1Da0cij4VfR0ta3WvBXH/rjdCufv6R2zPgPH/e4pxSBCpeatqPrjNiso203/5s/zA171Mv8+w1LOAAAAAElFTkSuQmCC\"> */}\r\n                    <i  onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"undo\" className=\"palete fas fa-undo\"></i>\r\n                    {/* onClick=\"formatDoc('undo');\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMKADljwliE33mOrpGjuYKl8aezxqPD+7/I19DV3NHa7P///////////////////////yH5BAEKAA8ALAAAAAAWABYAAARR8MlJq7046807TkaYeJJBnES4EeUJvIGapWYAC0CsocQ7SDlWJkAkCA6ToMYWIARGQF3mRQVIEjkkSVLIbSfEwhdRIH4fh/DZMICe3/C4nBQBADs=\" /> */}\r\n                    <i  onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"redo\"  className=\"palete fas fa-redo\"></i>\r\n                    {/* onClick=\"formatDoc('redo');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIHAB1ChDljwl9vj1iE34Kl8aPD+7/I1////yH5BAEKAAcALAAAAAAWABYAAANKeLrc/jDKSesyphi7SiEgsVXZEATDICqBVJjpqWZt9NaEDNbQK1wCQsxlYnxMAImhyDoFAElJasRRvAZVRqqQXUy7Cgx4TC6bswkAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"removeFormat\" className=\"palete fas fa-times\"></i>\r\n                    {/* onClick=\"formatDoc('removeFormat')\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9oECQMCKPI8CIIAAAAIdEVYdENvbW1lbnQA9syWvwAAAuhJREFUOMtjYBgFxAB501ZWBvVaL2nHnlmk6mXCJbF69zU+Hz/9fB5O1lx+bg45qhl8/fYr5it3XrP/YWTUvvvk3VeqGXz70TvbJy8+Wv39+2/Hz19/mGwjZzuTYjALuoBv9jImaXHeyD3H7kU8fPj2ICML8z92dlbtMzdeiG3fco7J08foH1kurkm3E9iw54YvKwuTuom+LPt/BgbWf3//sf37/1/c02cCG1lB8f//f95DZx74MTMzshhoSm6szrQ/a6Ir/Z2RkfEjBxuLYFpDiDi6Af///2ckaHBp7+7wmavP5n76+P2ClrLIYl8H9W36auJCbCxM4szMTJac7Kza////R3H1w2cfWAgafPbqs5g7D95++/P1B4+ECK8tAwMDw/1H7159+/7r7ZcvPz4fOHbzEwMDwx8GBgaGnNatfHZx8zqrJ+4VJBh5CQEGOySEua/v3n7hXmqI8WUGBgYGL3vVG7fuPK3i5GD9/fja7ZsMDAzMG/Ze52mZeSj4yu1XEq/ff7W5dvfVAS1lsXc4Db7z8C3r8p7Qjf///2dnZGxlqJuyr3rPqQd/Hhyu7oSpYWScylDQsd3kzvnH738wMDzj5GBN1VIWW4c3KDon7VOvm7S3paB9u5qsU5/x5KUnlY+eexQbkLNsErK61+++VnAJcfkyMTIwffj0QwZbJDKjcETs1Y8evyd48toz8y/ffzv//vPP4veffxpX77z6l5JewHPu8MqTDAwMDLzyrjb/mZm0JcT5Lj+89+Ybm6zz95oMh7s4XbygN3Sluq4Mj5K8iKMgP4f0////fv77//8nLy+7MCcXmyYDAwODS9jM9tcvPypd35pne3ljdjvj26+H2dhYpuENikgfvQeXNmSl3tqepxXsqhXPyc666s+fv1fMdKR3TK72zpix8nTc7bdfhfkEeVbC9KhbK/9iYWHiErbu6MWbY/7//8/4//9/pgOnH6jGVazvFDRtq2VgiBIZrUTIBgCk+ivHvuEKwAAAAABJRU5ErkJggg==\"> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"bold\" className=\"palete fas fa-bold\"></i>\r\n                    {/* onClick=\"formatDoc('bold');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAInhI+pa+H9mJy0LhdgtrxzDG5WGFVk6aXqyk6Y9kXvKKNuLbb6zgMFADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"italic\" className=\"palete fas fa-italic\"></i>\r\n                    {/* onClick=\"formatDoc('italic');\" src=\"data:image/gif;base64,R0lGODlhFgAWAKEDAAAAAF9vj5WIbf///yH5BAEAAAMALAAAAAAWABYAAAIjnI+py+0Po5x0gXvruEKHrF2BB1YiCWgbMFIYpsbyTNd2UwAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"underline\" className=\"palete fas fa-underline\"></i>\r\n                    {/* onClick=\"formatDoc('underline');\" src=\"data:image/gif;base64,R0lGODlhFgAWAKECAAAAAF9vj////////yH5BAEAAAIALAAAAAAWABYAAAIrlI+py+0Po5zUgAsEzvEeL4Ea15EiJJ5PSqJmuwKBEKgxVuXWtun+DwxCCgA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifyleft\" className=\"palete fas fa-align-left\"></i>\r\n                    {/* onClick=\"formatDoc('justifyleft');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIghI+py+0Po5y02ouz3jL4D4JMGELkGYxo+qzl4nKyXAAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifycenter\" className=\"palete fas fa-align-center\"></i>\r\n                    {/* onClick=\"formatDoc('justifycenter');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIfhI+py+0Po5y02ouz3jL4D4JOGI7kaZ5Bqn4sycVbAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifyright\" className=\"palete fas fa-align-right\"></i>\r\n                    {/* onClick=\"formatDoc('justifyright');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIghI+py+0Po5y02ouz3jL4D4JQGDLkGYxouqzl43JyVgAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"insertorderedlist\" className=\"palete fas fa-list-ol\"></i>\r\n                    {/* onClick=\"formatDoc('insertorderedlist');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIGAAAAADljwliE35GjuaezxtHa7P///////yH5BAEAAAcALAAAAAAWABYAAAM2eLrc/jDKSespwjoRFvggCBUBoTFBeq6QIAysQnRHaEOzyaZ07Lu9lUBnC0UGQU1K52s6n5oEADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"insertonorderedlist\" className=\"palete fas fa-list-ul\"></i>\r\n                    {/* onClick=\"formatDoc('insertunorderedlist');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIGAAAAAB1ChF9vj1iE33mOrqezxv///////yH5BAEAAAcALAAAAAAWABYAAAMyeLrc/jDKSesppNhGRlBAKIZRERBbqm6YtnbfMY7lud64UwiuKnigGQliQuWOyKQykgAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"formatblock\" data-value=\"blockquote\" className=\"palete fas fa-quote-left\"></i>\r\n                    {/* onClick=\"formatDoc('formatblock','blockquote');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQXAC1NqjFRjkBgmT9nqUJnsk9xrFJ7u2R9qmKBt1iGzHmOrm6Sz4OXw3Odz4Cl2ZSnw6KxyqO306K63bG70bTB0rDI3bvI4P///////////////////////////////////yH5BAEKAB8ALAAAAAAWABYAAAVP4CeOZGmeaKqubEs2CekkErvEI1zZuOgYFlakECEZFi0GgTGKEBATFmJAVXweVOoKEQgABB9IQDCmrLpjETrQQlhHjINrTq/b7/i8fp8PAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"outdent\" className=\"palete\">+ Indentation</i>\r\n                    {/* onClick=\"formatDoc('outdent');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIHAAAAADljwliE35GjuaezxtDV3NHa7P///yH5BAEAAAcALAAAAAAWABYAAAM2eLrc/jDKCQG9F2i7u8agQgyK1z2EIBil+TWqEMxhMczsYVJ3e4ahk+sFnAgtxSQDqWw6n5cEADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"indent\" className=\"palete\">- Indentation</i>\r\n                    {/* onClick=\"formatDoc('indent');\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMIAAAAADljwl9vj1iE35GjuaezxtDV3NHa7P///////////////////////////////yH5BAEAAAgALAAAAAAWABYAAAQ7EMlJq704650B/x8gemMpgugwHJNZXodKsO5oqUOgo5KhBwWESyMQsCRDHu9VOyk5TM9zSpFSr9gsJwIAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  className=\"palete fas fa-link\"\r\n                    onClick={(e)=>{\r\n                        var sLnk=prompt('Write the URL here','http:\\/\\/');\r\n                        if(sLnk&&sLnk!=''&&sLnk!='http://'){\r\n                            this.formatDoc('createlink',sLnk);\r\n                        }\r\n                    }}\r\n                    ></i>\r\n                    {/* onClick=\"var sLnk=prompt('Write the URL here','http:\\/\\/');if(sLnk&&sLnk!=''&&sLnk!='http://'){formatDoc('createlink',sLnk)}\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMKAB1ChDRLY19vj3mOrpGjuaezxrCztb/I19Ha7Pv8/f///////////////////////yH5BAEKAA8ALAAAAAAWABYAAARY8MlJq7046827/2BYIQVhHg9pEgVGIklyDEUBy/RlE4FQF4dCj2AQXAiJQDCWQCAEBwIioEMQBgSAFhDAGghGi9XgHAhMNoSZgJkJei33UESv2+/4vD4TAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"cut\" className=\"palete fas fa-cut\"></i>\r\n                    {/* onClick=\"formatDoc('cut');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQSAB1ChBFNsRJTySJYwjljwkxwl19vj1dusYODhl6MnHmOrpqbmpGjuaezxrCztcDCxL/I18rL1P///////////////////////////////////////////////////////yH5BAEAAB8ALAAAAAAWABYAAAVu4CeOZGmeaKqubDs6TNnEbGNApNG0kbGMi5trwcA9GArXh+FAfBAw5UexUDAQESkRsfhJPwaH4YsEGAAJGisRGAQY7UCC9ZAXBB+74LGCRxIEHwAHdWooDgGJcwpxDisQBQRjIgkDCVlfmZqbmiEAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"copy\" className=\"palete fas fa-copy\" ></i>\r\n                    {/* onClick=\"formatDoc('copy');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQcAB1ChBFNsTRLYyJYwjljwl9vj1iE31iGzF6MnHWX9HOdz5GjuYCl2YKl8ZOt4qezxqK63aK/9KPD+7DI3b/I17LM/MrL1MLY9NHa7OPs++bx/Pv8/f///////////////yH5BAEAAB8ALAAAAAAWABYAAAWG4CeOZGmeaKqubOum1SQ/kPVOW749BeVSus2CgrCxHptLBbOQxCSNCCaF1GUqwQbBd0JGJAyGJJiobE+LnCaDcXAaEoxhQACgNw0FQx9kP+wmaRgYFBQNeAoGihCAJQsCkJAKOhgXEw8BLQYciooHf5o7EA+kC40qBKkAAAGrpy+wsbKzIiEAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"paste\" className=\"palete fas fa-paste\"></i>\r\n                    {/* onClick=\"formatDoc('paste');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQUAD04KTRLY2tXQF9vj414WZWIbXmOrpqbmpGjudClFaezxsa0cb/I1+3YitHa7PrkIPHvbuPs+/fvrvv8/f///////////////////////////////////////////////yH5BAEAAB8ALAAAAAAWABYAAAWN4CeOZGmeaKqubGsusPvBSyFJjVDs6nJLB0khR4AkBCmfsCGBQAoCwjF5gwquVykSFbwZE+AwIBV0GhFog2EwIDchjwRiQo9E2Fx4XD5R+B0DDAEnBXBhBhN2DgwDAQFjJYVhCQYRfgoIDGiQJAWTCQMRiwwMfgicnVcAAAMOaK+bLAOrtLUyt7i5uiUhADs=\" /> */}\r\n                </div>\r\n                <div onInput={this.contentOnChange} className=\"container-fluid\" ref={this.contentRef} id=\"textBox\" contentEditable=\"true\"><p>Fill content</p></div>\r\n                <p/>\r\n                <AnchorWithIcon show={this.state.updated == false} style={{marginRight:'5px'}} iconClassName=\"fas fa-exclamation-circle\" className=\"btn btn-warning btn-sm\" onClick={this.setValue}>Update Content</AnchorWithIcon>\r\n                <AnchorWithIcon show={this.state.updated == true} style={{marginRight:'5px'}} iconClassName=\"fas fa-check\" className=\"btn btn-primary btn-sm\"  >Content Updated</AnchorWithIcon>\r\n\r\n                <AnchorWithIcon className=\"btn btn-secondary btn-sm\" attributes={{onMouseDown:(e)=>e.preventDefault()}} onClick={(e)=>this.setEditMode(false)} show={this.state.editMode == true} >Hide Html</AnchorWithIcon>\r\n                <AnchorWithIcon className=\"btn btn-secondary btn-sm\" attributes={{onMouseDown:(e)=>e.preventDefault()}} onClick={(e)=>this.setEditMode(true)} show={this.state.editMode == false} >Show Html</AnchorWithIcon>\r\n            </div>\r\n             \r\n        )\r\n    }\r\n}\r\nconst FontSizeOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\"\r\n            onChange={\r\n                (e) => {\r\n                    const t = e.target;\r\n                    props.onChange(\"fontsize\", t.value);\r\n                    t.value = \"-\";\r\n                }}>\r\n            {/* onChange=\"formatDoc('fontsize',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value =\"-\" className=\"heading\" selected>- size -</option>\r\n            <option value=\"1\">Very small</option>\r\n            <option value=\"2\">A bit small</option>\r\n            <option value=\"3\">Normal</option>\r\n            <option value=\"4\">Medium-large</option>\r\n            <option value=\"5\">Big</option>\r\n            <option value=\"6\">Very big</option>\r\n            <option value=\"7\">Maximum</option>\r\n        </select>\r\n    )\r\n}\r\nconst BackgroundColorOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\"\r\n            onChange={\r\n                (e) => {\r\n                    const t = e.target;\r\n                    props.onChange(\"backcolor\", t.value);\r\n                    t.value = \"-\";\r\n                }}>\r\n            {/* onChange=\"formatDoc('backcolor',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value=\"-\" className=\"heading\" selected>- background -</option>\r\n            <option value=\"red\">Red</option>\r\n            <option value=\"green\">Green</option>\r\n            <option value=\"black\">Black</option>\r\n        </select>\r\n    )\r\n}\r\nconst FontColorOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\" onChange={\r\n            (e) => {\r\n                const t = e.target;\r\n                props.onChange(\"forecolor\", t.value);\r\n                t.value = \"-\";\r\n            }\r\n        }>\r\n            {/* onChange=\"formatDoc('forecolor',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option className=\"heading\" value=\"-\" selected>- color -</option>\r\n            <option value=\"red\">Red</option>\r\n            <option value=\"blue\">Blue</option>\r\n            <option value=\"green\">Green</option>\r\n            <option value=\"black\">Black</option>\r\n        </select>\r\n    )\r\n}\r\nconst FormattingList = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\" onChange={\r\n            (e) => {\r\n                const t = e.target;\r\n                props.onChange(\"formatblock\", t.value);\r\n                t.value = \"-\";\r\n            }\r\n        }>\r\n            {/* onChange=\"formatDoc('formatblock',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value=\"-\" selected>- formatting -</option>\r\n            <option value=\"h1\">Title 1 &lt;h1&gt;</option>\r\n            <option value=\"h2\">Title 2 &lt;h2&gt;</option>\r\n            <option value=\"h3\">Title 3 &lt;h3&gt;</option>\r\n            <option value=\"h4\">Title 4 &lt;h4&gt;</option>\r\n            <option value=\"h5\">Title 5 &lt;h5&gt;</option>\r\n            <option value=\"h6\">Subtitle &lt;h6&gt;</option>\r\n            <option value=\"p\">Paragraph &lt;p&gt;</option>\r\n            <option value=\"pre\">Preformatted &lt;pre&gt;</option>\r\n        </select>\r\n    )\r\n}\r\nconst FontList = (props: { onChange: Function }) => {\r\n    return (<select className=\"form-control\" onChange={\r\n        (e) => {\r\n            const t = e.target;\r\n            props.onChange(\"fontname\", t.value);\r\n            t.value = \"-\";\r\n        }\r\n    }>\r\n        {/* onChange=\"formatDoc('fontname',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n        <option value=\"-\" className=\"heading\" selected>- font -</option>\r\n        <option value=\"Arial\">Arial</option>\r\n        <option value=\"Arial Black\">Arial Black</option>\r\n        <option value=\"Courier New\">Courier New</option>\r\n        <option value=\"Times New Roman\">Times New Roman</option>\r\n    </select>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputTextEditor))","import React, { Component, Fragment }  from 'react';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport BaseField from './BaseField';\r\n\r\n\r\nexport default class FormInputCheckbox extends BaseField {\r\n    state = {\r\n        checked: false\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    prepopulateForm = () => {\r\n         \r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        \r\n        if (!recordValue) return;\r\n        \r\n        this.setState({ checked: recordValue == true })\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n        const checked: boolean = this.state.checked;\r\n        return (\r\n            <Fragment>\r\n                <input type=\"hidden\" name={element.id} value={checked ? 'true' : 'false'} />\r\n                <div className=\"btn-group\">\r\n                    <a className={checked?\"btn btn-dark\":\"btn btn-light\"} onClick={(e) => this.setState({ checked: true })} >Yes</a>\r\n                    <a className={!checked?\"btn btn-dark\":\"btn btn-light\"} onClick={(e) => this.setState({ checked: false })} >No</a>\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n}\r\n","import { join } from \"path\";\r\n\r\nexport const MONTHS = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\"\r\n]\r\n\r\nconst leapMonths = [ 31, (  29  ), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\nconst regularMonths = [ 31, (  28  ), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\n/**\r\n * \r\n * @param {Number} month starts at 0\r\n */\r\nexport const getMonthDays = (month:number) : number=> {\r\n    if(new Date().getFullYear() % 4 == 0){\r\n        return leapMonths[month];\r\n    }\r\n    return regularMonths[month];\r\n}\r\n \r\nexport const getCurrentMMYY = () => {\r\n    return [new Date().getMonth() + 1, new Date().getFullYear()];\r\n}\r\n\r\nexport const getInputReadableDate = (date:Date) :string => {\r\n    const year = date.getFullYear();\r\n\r\n    const arr = [year, twoDigits(date.getMonth()+1), twoDigits(date.getDate())];\r\n    return arr.join(\"-\");\r\n}\r\nexport function addDays(date:Date, days:number) :Date{\r\n    const result:Date = new Date(date);\r\n    result.setDate(result.getDate() + days);\r\n    return result;\r\n  }\r\n  export const getDiffDays = (a:Date, b:Date) : number => {\r\n    // Discard the time and time-zone information.\r\n\r\n    console.debug(\"DIFF DATE \",a,\" vs \", b);\r\n    const _MS_PER_DAY = 1000 * 60 * 60 * 24;\r\n    const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());\r\n    const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate()); \r\n    return Math.floor((utc2 - utc1) / _MS_PER_DAY);\r\n}\r\nconst twoDigits = (value:number) :string => {\r\n    if (value >= 10) {\r\n        return   value.toString();\r\n    }\r\n    return \"0\"+value;\r\n}\r\n\r\nexport const timerString = (inputSeconds:number ) => {\r\n    let hour = 0;\r\n    let minutes:number = 0;\r\n    let seconds = 0;\r\n    let totalSeconds = inputSeconds;\r\n    if (totalSeconds >= 3600) {\r\n        hour = totalSeconds/ 3600;\r\n        totalSeconds = totalSeconds % 3600;\r\n    }\r\n    if (totalSeconds >= 60) {\r\n        minutes = totalSeconds/60;\r\n        totalSeconds = totalSeconds%60;\r\n    }\r\n    seconds = totalSeconds; \r\n\r\n    return  twoDigits(hour)+\":\"+twoDigits(Math.floor(minutes))+\":\"+twoDigits(seconds);\r\n}\r\n\r\n\r\n\r\n","\r\nexport enum MediaShare {\r\n\tAUDIO, VIDEO_AUDIO\r\n}","import React, { Component } from 'react'\r\nimport { FieldType } from '../../../../../models/FieldType';\r\nimport { getInputReadableDate } from '../../../../../utils/DateUtil';\r\nimport BaseField from './BaseField';\r\n\r\nexport default class FormInputCommon extends BaseField {\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const element = this.getEntityElement();\r\n        const fieldName = element.id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (undefined == recordValue){\r\n            console.debug(fieldName, \" is undefined\", this.props.recordToEdit, this.props.recordToEdit[fieldName]);\r\n            return;\r\n        }\r\n\r\n        const fieldType: FieldType = element.fieldType;\r\n        let defaultInputValue: any = undefined;\r\n        switch (fieldType) {\r\n            case FieldType.FIELD_TYPE_DATE:\r\n                const dateObj = new Date(recordValue);\r\n                if (!dateObj) { break }\r\n                defaultInputValue = getInputReadableDate(dateObj);\r\n                break;\r\n            case FieldType.FIELD_TYPE_NUMBER:\r\n                defaultInputValue = new String(recordValue);\r\n                break;\r\n            default:\r\n                defaultInputValue = recordValue;\r\n                break;\r\n        }\r\n        if (defaultInputValue) {\r\n\r\n            if (element.optionItemName && element.optionItemName != \"\") {\r\n                const valueAsObj = defaultInputValue;\r\n                this.ref.current.value = valueAsObj[element.optionItemName ?? \"id\"];\r\n            } else {\r\n                this.ref.current.value = defaultInputValue;\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        const element = this.getEntityElement();\r\n        const requiredAttr = this.getRequiredAttr();\r\n        if (element.identity == true || element.editable == false) {\r\n            return (<input {...requiredAttr} value=\"Generated\" ref={this.ref} className=\"form-control\" name={element.id} disabled />\r\n            )\r\n        }\r\n        let input = <p>{element.fieldType}</p>;\r\n        switch (element.fieldType) {\r\n            case FieldType.FIELD_TYPE_PLAIN_LIST:\r\n                input = (\r\n                    <select  {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} >\r\n                        {element.plainListValues.map((value, i) => {\r\n                            return (\r\n                                <option key={\"s-\" + element.id + '-o-' + i} value={value}>{value}</option>\r\n                            )\r\n                        })}\r\n                    </select>\r\n                )\r\n                break;\r\n            case FieldType.FIELD_TYPE_TEXTAREA:\r\n                input = <textarea {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n                break;\r\n            default:\r\n                input = <input type={element.type} {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n\r\n        }\r\n        return input;\r\n\r\n    }\r\n}","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport MasterDataService from '../../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../../models/WebResponse';\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport { uniqueId } from '../../../../../utils/StringUtil';\r\nimport BaseField from './BaseField';\r\nimport AnchorWithIcon from './../../../../navigation/AnchorWithIcon';\r\nimport WebRequest from './../../../../../models/WebRequest';\r\nclass IState {\r\n    inputList: any[] = [];\r\n    searchValue: string = \"\"\r\n}\r\nclass FormInputDropDownDynamic extends BaseField {\r\n    masterDataService: MasterDataService;\r\n    state: IState = new IState();\r\n    ref: React.RefObject<any> = React.createRef();\r\n    inputRef: React.RefObject<HTMLDivElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n\r\n    inputListLoaded = (response: WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            throw new Error(this.getEntityElement().labelName+\" Not found\");\r\n        }\r\n        this.setState({ inputList: response.entities }, ()=> {\r\n            if(this.inputRef.current) {\r\n                this.inputRef.current.focus();\r\n            }\r\n        });\r\n    }\r\n    loadInputList = () => {\r\n        const element = this.getEntityElement();\r\n\r\n        const code = element.entityReferenceClass;\r\n        const searchKey = element.optionItemName;\r\n        if (!searchKey)  { return; }\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                limit: 0, page: 0,\r\n                fieldsFilter: {\r\n                    [searchKey]:this.inputRef.current?.innerHTML\r\n                }\r\n            }\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntities,\r\n            this.inputListLoaded,\r\n            this.showCommonErrorAlert,\r\n            request\r\n        )\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n        this.setState({inputList:[recordValue], searchValue: \"\"} , ()=>{\r\n            let defaultInputValue = undefined;\r\n            const optionValueName = this.getEntityElement().optionValueName;\r\n            if (!optionValueName) return;\r\n            defaultInputValue = recordValue[optionValueName]; \r\n            if (defaultInputValue) {\r\n                this.ref.current.value = defaultInputValue;\r\n            }\r\n        });\r\n    }\r\n\r\n    search = (event) => {\r\n        if(event.keyCode == 13) {\r\n            if (this.inputRef.current) {\r\n                const div = this.inputRef.current;\r\n                div.innerHTML = new String(div.innerText).trim();\r\n            }\r\n            event.preventDefault();\r\n            this.loadInputList();\r\n            return false;\r\n          }\r\n    }\r\n\r\n    render() {\r\n        const element = this.getEntityElement();\r\n        const optionItemValue = element.optionValueName;\r\n        const optionItemName = element.optionItemName;\r\n        const options = this.state.inputList;\r\n        console.debug(\"options: \", options);\r\n        const placeholder:string =   element.entityReferenceClass + \" \"+ optionItemName;\r\n        return (\r\n            <div>\r\n                <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-append\">\r\n                        <span className=\"input-group-text\">{placeholder}</span>\r\n                    </div>\r\n                    <div onKeyDown={this.search} ref={this.inputRef} contentEditable={true} className=\"form-control\" ></div>\r\n                   \r\n                    <div className=\"input-group-append\">\r\n                        <AnchorWithIcon onClick={this.loadInputList} className=\"btn btn-secondary\" children=\"Search\"/>\r\n                        <AnchorWithIcon show={this.props.recordToEdit != undefined} onClick={this.prepopulateForm} iconClassName=\"fas fa-sync-alt\" className=\"btn btn-secondary\"/>\r\n          \r\n                    </div>\r\n                </div>\r\n                <select  {...this.getRequiredAttr()} ref={this.ref} className=\"form-control\" name={element.id} >\r\n                    {options.map(option => {\r\n                        if (!optionItemName || !optionItemValue) { return null; }\r\n                        return (\r\n                            <option key={\"fid-\" + uniqueId() + \"-\"} value={option[optionItemValue]} >{option[optionItemName]}</option>\r\n                        )\r\n                    })}\r\n                </select>\r\n                  </div>)\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputDropDownDynamic))","\r\nimport React, { Component } from 'react';\r\ninterface Props {\r\n    orientation?:string,\r\n    show?:boolean,\r\n    children?:any,\r\n    label?:any,\r\n    className?:string, \r\n}\r\nexport default class FormGroup extends Component<Props, any>\r\n{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (false == this.props.show) return null;\r\n        const orientation = this.props.orientation == 'vertical' ? 'vertical' : 'horizontal';\r\n        return (\r\n            <div className={\"form-group \"+ this.props.className+ \" \" + (orientation == 'vertical' ? '' : 'row')}>\r\n                <label className={(orientation == 'vertical' ? '' : 'col-sm-3')}><strong>{this.props.label ? this.props.label : null}</strong></label>\r\n                <div className={(orientation == 'vertical' ? '' : 'col-sm-9')}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport EntityElement from '../../../../models/settings/EntityElement';\r\nimport { FieldType } from '../../../../models/FieldType';\r\nimport FormInputImage from './fields/FormInputImage';\r\nimport FormInputImageMultiple from './fields/FormInputImageMultiple';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport FormInputDropDown from './fields/FormInputDropDown';\r\nimport FormInputTextEditor from './fields/FormInputTextEditor';\r\nimport FormInputCheckbox from './fields/FormInputCheckBox';\r\nimport FormInputCommon from './fields/FormInputCoomon';\r\nimport FormInputDropDownDynamic from './fields/FormInputDropDownDynamic';\r\nimport FormGroup from './../../../form/FormGroup';\r\n\r\nclass FormInputField extends BaseComponent {\r\n\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    getEntityElement = (): EntityElement => {\r\n        return this.props.entityElement;\r\n    }\r\n    render() {\r\n        const element = this.getEntityElement();\r\n\r\n        let input:JSX.Element  = <p>{element.fieldType}</p>;\r\n        switch (element.fieldType) {\r\n            case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n                input = <FormInputDropDownDynamic recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                input = <FormInputDropDown recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_TEXTEDITOR:\r\n                input = <FormInputTextEditor recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n\r\n            case FieldType.FIELD_TYPE_IMAGE:\r\n                input = element.multiple ?\r\n                    <FormInputImageMultiple recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    :\r\n                    <FormInputImage recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_CHECKBOX:\r\n                input = <FormInputCheckbox recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_PLAIN_LIST:\r\n            case FieldType.FIELD_TYPE_TEXTAREA:\r\n            default:\r\n                input = <FormInputCommon recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n        }\r\n        const formLabel = <span>{element.labelName} \r\n        {element.editable && element.required?<i className=\"text-danger\">*</i>:null}</span>\r\n       return  <FormGroup orientation='vertical' label={formLabel}>\r\n                { input}\r\n            </FormGroup>\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputField))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport Modal from '../../../container/Modal';\r\nimport EntityProperty from '../../../../models/settings/EntityProperty';\r\nimport EntityElement from '../../../../models/settings/EntityElement';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport WebResponse from '../../../../models/WebResponse'; \r\nimport { FieldType } from '../../../../models/FieldType';\r\nimport FormInputField from './FormInputField';\r\n\r\nclass MasterDataForm extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    editMode:boolean = false;\r\n    recordToEdit?:{} = undefined;\r\n    formRef:React.RefObject<HTMLFormElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        if (props.recordToEdit) {\r\n            this.editMode = true;\r\n            this.recordToEdit = props.recordToEdit;\r\n        }\r\n    }\r\n    \r\n    getEntityProperty(): EntityProperty {\r\n        return this.props.entityProperty;\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.getEntityProperty().editable == false || this.getEntityProperty().creatable == false) {\r\n            this.props.onClose();\r\n        }\r\n    }\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        if (!this.formRef.current) return;\r\n       \r\n        const form = this.formRef.current, app = this;\r\n        this.showConfirmation(\"Save data?\")\r\n            .then(function (ok) {\r\n                if (ok) { app.submit(form) }\r\n            });\r\n    }\r\n    getEntityElement(key:string) :EntityElement |undefined {\r\n        return EntityProperty.getEntityElement(this.getEntityProperty(), key);\r\n    }\r\n    submit = (form: HTMLFormElement) => {\r\n        const formData: FormData = new FormData(form);\r\n        const object: {} = {};\r\n        const promises: Promise<any>[] = new Array();\r\n        const nulledFields:any[] = [];\r\n        let hasImageField:boolean = false;\r\n\r\n        formData.forEach((value, key) => {\r\n            console.debug(\"Form data \", key);\r\n            if (!object[key]) {\r\n                object[key] = new Array();\r\n            }\r\n            const element:EntityElement|undefined = this.getEntityElement(key);\r\n            if (!element) return false;\r\n            switch (element.fieldType) {\r\n                case FieldType.FIELD_TYPE_CHECKBOX:\r\n                    object[key].push(value == \"true\");\r\n                    break;\r\n                case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n                case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                    const valueAttr = element.optionValueName;\r\n                    if (valueAttr) {\r\n                        object[key].push({ [valueAttr]: value })\r\n                    }\r\n                    break;\r\n                case FieldType.FIELD_TYPE_IMAGE:\r\n                    console.debug(key, \" is image\");\r\n                    if (value == \"NULLED\") {\r\n                        console.debug(\"NULLED VALUE ADDED: \", key);\r\n                        nulledFields.push(key);\r\n                    } else {\r\n                        if (new String(value).startsWith(\"data:image\")) {\r\n                            hasImageField = true;\r\n                        }\r\n                        object[key].push(value);\r\n                    }\r\n                    break;\r\n                default:\r\n                    object[key].push(value);\r\n                    break;\r\n            }\r\n            return true;\r\n            \r\n        });  \r\n        Promise.all(promises).then( (val) => {\r\n            const objectPayload = this.generateRequestPayload(object, nulledFields);\r\n            console.debug(\"Record object to save: \", objectPayload, \"realtimeProgress: \", hasImageField);\r\n            this.ajaxSubmit(objectPayload, hasImageField);\r\n        });\r\n        \r\n    }\r\n\r\n    generateRequestPayload = (rawObject: {}, nulledFields:any[]): {} => { \r\n        const result:{nulledFields:Array<any>} = this.editMode && this.recordToEdit? \r\n        {...this.recordToEdit, nulledFields:nulledFields} : \r\n        {nulledFields:new Array() };\r\n        for (const key in rawObject) {\r\n            const element: any[] = rawObject[key];\r\n            console.debug(key, \" length: \", element.length);\r\n            if (element.length == 1) {\r\n                result[key] = element[0];\r\n            } else if (element.length > 1) {\r\n                result[key] = element.join(\"~\");\r\n            }\r\n        }\r\n        result.nulledFields = nulledFields;\r\n        return result;\r\n    }\r\n\r\n    ajaxSubmit = (object: any, realtimeProgress: boolean) => {\r\n        if (this.getEntityProperty().withProgressWhenUpdated == true || realtimeProgress){\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.save, this.recordSaved, this.showCommonErrorAlert,\r\n                this.getEntityProperty().entityName, object, this.editMode\r\n            )\r\n        } else{\r\n            this.commonAjax(\r\n                this.masterDataService.save, this.recordSaved, this.showCommonErrorAlert,\r\n                this.getEntityProperty().entityName, object, this.editMode\r\n            )\r\n        }\r\n    }\r\n    recordSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Record saved\");\r\n    }\r\n    render() {\r\n        const entityProperty: EntityProperty = this.getEntityProperty();\r\n\r\n        const editModeStr = this.editMode ?  <span className=\"badge badge-warning\">Edit Mode</span>:\"\"\r\n        return ( \r\n            <div id=\"MasterDataForm\" >\r\n                <AnchorButton style={{ marginBottom: '5px' }} onClick={this.props.onClose} iconClassName=\"fas fa-angle-left\">Back</AnchorButton>\r\n                <form ref={this.formRef} onSubmit={this.onSubmit} id=\"record-form\">\r\n                <Modal title={<span>{entityProperty.alias} Record Form {editModeStr}</span>} footerContent={<SubmitReset />}>\r\n                        <InputFields app={this.parentApp} recordToEdit={this.recordToEdit}  entityProperty={entityProperty} />\r\n                    </Modal>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst SubmitReset = (props) => {\r\n    return (\r\n        <div className=\"btn-group\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n            <input type=\"reset\" className=\"btn btn-warning\" />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst InputFields = (props: { app: any, entityProperty: EntityProperty, recordToEdit:{}|undefined }) => {\r\n    const elements: EntityElement[] = props.entityProperty.elements;\r\n    const groupedElements: Array<Array<EntityElement>> = new Array();\r\n    let counter: number = 0;\r\n    const hasTextEditor = EntityProperty.hasTextEditorField(elements);\r\n    groupedElements.push(new Array());\r\n    for (let i = 0; i < elements.length; i++) {\r\n        const element = elements[i];\r\n        if (!hasTextEditor && i > 0 && i % 5 == 0) {\r\n            counter++;\r\n            groupedElements.push(new Array());\r\n        }\r\n        groupedElements[counter].push(element);\r\n    }\r\n    return (\r\n        <div className=\"row\">\r\n            {groupedElements.map((elements, ei) => {\r\n                return (\r\n                    <div key={\"GROUPED_ELEMENT_\"+ei} className={hasTextEditor?\"col-lg-12\":\"col-lg-6\"}>\r\n                        {elements.map(element => {\r\n                            const key = \"form-input-for-\"+props.entityProperty.entityName+\"-\"+element.id;\r\n                            return <FormInputField key={key} recordToEdit={props.recordToEdit} entityElement={element} />\r\n                        })}\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\nexport default withRouter(connect(mapCommonUserStateToProps)(MasterDataForm))","import React, { Component } from 'react'\r\nimport AnchorWithIcon from './../../navigation/AnchorWithIcon';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\n\r\nclass ExternalEditForm extends Component<{delete(e):any, record: any, entityProperty: EntityProperty, show?: boolean }, any>{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const props = this.props;\r\n        if (props.show == false) return null;\r\n        let link = \"\";\r\n        let btnClassName = \"btn btn-dark btn-sm\";\r\n        let iconClassName = \"fas fa-edit\";\r\n        const entityName = props.entityProperty.entityName;\r\n        if (entityName == 'quiz') {\r\n            link = \"/quizmanagement/detail/\" + props.record.id;\r\n        } else if (entityName == \"quizhistory\") {\r\n\r\n            return (\r\n                <AnchorButton onClick={props.delete} className=\"btn btn-danger btn-sm\" iconClassName=\"fas fa-times\"></AnchorButton>\r\n            )\r\n        } else {\r\n            return null;\r\n        }\r\n\r\n\r\n        return <AnchorWithIcon className={btnClassName} iconClassName={iconClassName} to={link} attributes={{ target: \"_blank\" }} />\r\n    }\r\n}\r\nexport default ExternalEditForm;","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport ExternalEditForm from './ExternalEditForm';\r\n\r\nclass EditDeleteAction extends BaseComponent {\r\n    masterDataService:MasterDataService;\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    delete = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete record?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                app.doDelete();\r\n            }\r\n        });\r\n    }\r\n    doDelete = () => {\r\n        const record = this.props.record;\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        const recordId = EntityProperty.getRecordId(record, entityProperty);\r\n        if (entityProperty.withProgressWhenUpdated) {\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.delete,\r\n                this.recordDeleted,\r\n                this.showCommonErrorAlert,\r\n                entityProperty.entityName, recordId\r\n            )\r\n        } else { \r\n            this.commonAjax(\r\n                this.masterDataService.delete,\r\n                this.recordDeleted,\r\n                this.showCommonErrorAlert,\r\n                entityProperty.entityName, recordId\r\n            )\r\n        }\r\n    }\r\n    getRecordById = () => {\r\n        const record = this.props.record;\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        const recordId = EntityProperty.getRecordId(record, entityProperty);\r\n     \r\n        this.commonAjax(\r\n            this.masterDataService.getById,\r\n            this.recordLoaded,\r\n            this.showCommonErrorAlert,\r\n            entityProperty.entityName,\r\n            recordId\r\n        );\r\n    }\r\n    recordLoaded = (response:WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0){\r\n            throw new Error(\"Record not found\");\r\n        }\r\n        if(this.props.showEditForm) {\r\n            this.props.showEditForm(response);\r\n        }\r\n    }\r\n    recordDeleted = (response:WebResponse) => {\r\n        this.showInfo(\"Record deleted\");\r\n        this.props.reload();\r\n    }\r\n    render() {\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        \r\n        if (this.props.show == false) return null;\r\n        let additionalButton:JSX.Element =  (\r\n        <ExternalEditForm delete={this.delete} record={this.props.record} entityProperty={entityProperty}  />\r\n        ) \r\n        if (entityProperty.editable == false) {\r\n            return  additionalButton;\r\n        }\r\n        return (\r\n            <div className=\"btn-group\">\r\n                {additionalButton}\r\n                <AnchorButton onClick={this.getRecordById} iconClassName=\"fas fa-edit\" className=\"btn btn-warning btn-sm\"></AnchorButton>\r\n                <AnchorButton onClick={this.delete} className=\"btn btn-danger btn-sm\" iconClassName=\"fas fa-times\"></AnchorButton>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(EditDeleteAction))","\r\nimport React, { Component, Fragment } from 'react';\r\nimport HeaderProps from './../../../models/HeaderProps';\r\nexport default class DataTableHeader extends Component<{fieldsFilter:any, orderButtonOnClick(e:any):void, headerProps: HeaderProps[], filterOnChange(e:any):void}, any>\r\n{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render(){\r\n       \r\n        const props = this.props;\r\n        const headerProps: HeaderProps[] = props.headerProps;\r\n        const fieldsFilter = props.fieldsFilter;\r\n        return (<thead>\r\n            <tr>\r\n                <th>No</th>\r\n                {headerProps.map((headerProp, i) => {\r\n                    const isDate = headerProp.isDate;\r\n                    const headerName = headerProp.value;\r\n                    if (!headerProp.filterable) {\r\n                        return <th key={\"dth-\"+i+\"-\"+headerName} >\r\n                            <p>{headerProp.label}</p>\r\n                        </th>\r\n                    }\r\n                    const filterClass = \"form-control input-filter\";\r\n                    return (\r\n                        <th key={\"dth-\"+i+\"-\"+headerName} >\r\n                            <p>{headerProp.label}</p>\r\n                            <div style={{minWidth:'200px'}} className=\"input-group\">\r\n                                {isDate ?\r\n                                    <Fragment>\r\n                                        <input key={\"filter-day-\"+headerName} autoComplete=\"off\" value={fieldsFilter[headerName+\"-day\"]??\"\"} onChange={props.filterOnChange} name={headerName + \"-day\"}\r\n                                            className={filterClass} placeholder={\"day\"} />\r\n                                        <input key={\"filter-month-\"+headerName} autoComplete=\"off\" value={fieldsFilter[headerName+\"-month\"]??\"\"} onChange={props.filterOnChange} name={headerName + \"-month\"}\r\n                                            className={filterClass} placeholder={\"month\"} />\r\n                                        <input key={\"filter-year-\"+headerName} autoComplete=\"off\" value={fieldsFilter[headerName+\"-year\"]??\"\"} onChange={props.filterOnChange} name={headerName + \"-year\"}\r\n                                            className={filterClass} placeholder={\"year\"} />\r\n                                    </Fragment>\r\n                                    :\r\n                                    <input key={\"filter-common-\"+headerName}  autoComplete=\"off\" value={fieldsFilter[headerName]??\"\"} onChange={props.filterOnChange} placeholder={headerProp.label}\r\n                                        className={filterClass} name={headerName} />\r\n                                }\r\n                            <div className=\"input-group-append btn-group\">\r\n                                <button data-ordertype=\"asc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"btn btn-outline-secondary btn-sm\">\r\n                                    <i data-ordertype=\"asc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"fas fa-angle-up\" /></button>\r\n                                <button data-ordertype=\"desc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"btn btn-outline-secondary btn-sm\">\r\n                                    <i data-ordertype=\"desc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"fas fa-angle-down\" /></button>\r\n                            </div>\r\n                            </div>\r\n                        </th>\r\n                    )\r\n                })}\r\n                <th>Action</th>\r\n            </tr>\r\n        </thead>)\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nexport default class SimpleError extends Component<any, any>\r\n{\r\n\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        return (\r\n            <div style={ this.props.style} className=\"alert alert-danger\">\r\n                {this.props.children??\"Error Occured\"}\r\n            </div>\r\n        )\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nimport './Spinner.css';\r\nexport default class Spinner extends Component<any, any>{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const innerDivs:JSX.Element[] = new Array<JSX.Element>();\r\n        for (let i = 0; i <= 11; i++) {\r\n            innerDivs.push(<div key={\"spinner-item-\"+i}></div>);\r\n        }\r\n        return (\r\n            <div style={{width:'85px', height:'85px', display:'block',...this.props.style}} className=\"container-fluid text-center\" >\r\n                 <div style={{visibility:this.props.show == false?'hidden':'visible'}} className=\"lds-spinner\">\r\n                  {innerDivs}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport AnchorButton from './AnchorButton';\r\ninterface Props {\r\n    onClick(val:boolean):void,\r\n    active:boolean,\r\n    yesLabel?:string,\r\n    noLabel?:string\r\n}\r\nexport default class ToggleButton extends Component<Props, any>{\r\n    \r\n    render() {\r\n        const props = this.props;\r\n        const active = this.props.active;\r\n        return (\r\n            <div className=\"btn-group\">\r\n                <AnchorButton className={\"btn  btn-sm \" + (active ? \"btn-dark\" : \"btn-outline-dark\")} onClick={(e) => this.props.onClick(true)} >\r\n                    {props.yesLabel??\"Yes\"}</AnchorButton>\r\n                <AnchorButton className={\"btn  btn-sm \" + (active == false ? \"btn-dark\" : \"btn-outline-dark\")} onClick={(e) => this.props.onClick(false)}  >\r\n                    {props.noLabel??\"No\"}</AnchorButton>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}","\r\n\r\n\r\nimport React, { ChangeEvent, Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport Modal from '../../container/Modal';\r\nimport Filter from './../../../models/Filter';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport WebRequest from './../../../models/WebRequest';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport HeaderProps from './../../../models/HeaderProps';\r\nimport './DataTable.css'\r\nimport EntityValues from './../../../utils/EntityValues';\r\nimport NavigationButtons from './../../navigation/NavigationButtons';\r\nimport MasterDataForm from './form/MasterDataForm';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nimport EditDeleteAction from './EditDeleteAction';\r\nimport DataTableHeader from './DataTableHeader';\r\nimport SimpleError from './../../alert/SimpleError';\r\nimport Spinner from './../../loader/Spinner';\r\nimport ExternalEditForm from './ExternalEditForm';\r\nimport { uniqueId } from './../../../utils/StringUtil';\r\nimport ToggleButton from '../../navigation/ToggleButton';\r\ninterface IState { recordData?: WebResponse, showForm: boolean, filter: Filter, loading: boolean }\r\nclass MasterDataList extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    state: IState;\r\n    recordToEdit?: any|undefined = undefined;\r\n    entityProperty: EntityProperty;\r\n    headerProps: HeaderProps[];\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        this.entityProperty = this.props.entityProperty;\r\n        this.headerProps = EntityProperty.getHeaderLabels(this.props.entityProperty);\r\n\r\n        this.state = {\r\n            showForm: false, loading: false,\r\n            filter: { limit: 5, page: 0, fieldsFilter: {} }\r\n        };\r\n    }\r\n    /**\r\n     * remove fieldsfilter empty values\";\r\n     */\r\n    adjustFilter = (filter: Filter): Filter => {\r\n\r\n        const fieldsFilter = filter.fieldsFilter;\r\n        for (const key in fieldsFilter) {\r\n            const element = fieldsFilter[key];\r\n            if (element == undefined || element == null || new String(element).length == 0) {\r\n                if (filter.fieldsFilter != undefined) {\r\n                    delete filter.fieldsFilter[key];\r\n                }\r\n            }\r\n        }\r\n        return filter;\r\n    }\r\n    loadEntities = (page: number | undefined) => {\r\n        const filter = Object.assign(new Filter(), this.state.filter);\r\n        const entityName = this.entityProperty.entityName;\r\n        filter.page = page ?? filter.page ?? 0;\r\n        const request: WebRequest = {\r\n            entity: entityName??\"\",\r\n            filter: this.adjustFilter(filter)\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntities,\r\n            this.entitiesLoaded,\r\n            this.showCommonErrorAlert,\r\n            request\r\n        );\r\n\r\n    }\r\n    entitiesLoaded = (response: WebResponse) => {\r\n        this.setState({ recordData: response, filter: response.filter });\r\n    }\r\n    checkDefaultData = () => {\r\n        if (this.state.loading) {\r\n            return;\r\n        }\r\n        if (this.entityProperty.entityName == this.props.entityProperty.entityName && this.state.recordData != undefined) {\r\n            return;\r\n        }\r\n        this.entityProperty = this.props.entityProperty;\r\n        this.headerProps = EntityProperty.getHeaderLabels(this.props.entityProperty);\r\n        this.loadEntities(0);\r\n    }\r\n    startLoading() { this.setState({ loading: true }) }\r\n    endLoading() { this.setState({ loading: false }) }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n        this.checkDefaultData();\r\n    }\r\n    componentDidMount() {\r\n        this.checkDefaultData();\r\n    }\r\n    getRecordNumber = (i: number): number => {\r\n        let res = (this.state.filter.page ?? 0) * (this.state.filter.limit ?? 5) + i + 1;\r\n        return res;\r\n    }\r\n    filterFormSubmit = (e) => {\r\n        let page = this.state.filter.useExistingFilterPage ? this.state.filter.page : 0;\r\n        this.loadEntities(page);\r\n    }\r\n    filterOnChange = (e: ChangeEvent) => {\r\n        e.preventDefault();\r\n        const input = e.target as any;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        const filter = this.state.filter;\r\n        if (filter.fieldsFilter == undefined) {\r\n            filter.fieldsFilter = {};\r\n        }\r\n        filter.fieldsFilter[name] = value;\r\n        this.setState({ filter: filter });\r\n    }\r\n    setExactSearch = (exacts: boolean) => {\r\n        const filter = this.state.filter;\r\n        filter.exacts = exacts;\r\n        this.setState({ filter: filter });\r\n    }\r\n    filterReset = (e) => {\r\n        const filter = this.state.filter;\r\n        filter.fieldsFilter = {};\r\n        filter.limit = 5;\r\n        this.setState({ filter: filter });\r\n    }\r\n    orderButtonOnClick = (e) => {\r\n        const dataset: DOMStringMap = e.target.dataset;\r\n        const filter = this.state.filter;\r\n        filter.orderBy = dataset['orderby']??\"id\";\r\n        filter.orderType = dataset['ordertype']??\"asc\";\r\n        this.setState({ filter: filter });\r\n        this.loadEntities(0);\r\n    }\r\n    showEditForm = (response: WebResponse) => {\r\n        if (!response.entities) {\r\n            return;\r\n        }\r\n        this.recordToEdit = response.entities[0];\r\n        this.setState({ showForm: true }, this.scrollTop);\r\n    }\r\n    showCreateForm = (e) => {\r\n        this.recordToEdit = undefined;\r\n        this.setState({ showForm: true }, this.scrollTop);\r\n    }\r\n    updateFilterPage = (page: any) => {\r\n        const filter = this.state.filter;\r\n        filter.useExistingFilterPage = true;\r\n        filter.page = parseInt(page) - 1;\r\n        this.setState({ filter: filter });\r\n    }\r\n    updateFilterLimit = (limit: any) => {\r\n        const filter = this.state.filter;\r\n        filter.limit = parseInt(limit);\r\n        this.setState({ filter: filter });\r\n    }\r\n    getFilter = () => {\r\n        return this.state.filter;\r\n    }\r\n    printRecord = () => {\r\n        this.props.printRecord(this.state.filter);\r\n    }\r\n    render() {\r\n        if (undefined == this.state.recordData) {\r\n            return <Spinner />\r\n        }\r\n        const headerProps: HeaderProps[] = this.headerProps;\r\n        const exactsSearch: boolean = this.state.filter.exacts == true;\r\n        const resultList: any[] = this.state.recordData.entities ? this.state.recordData.entities : [];\r\n        if (headerProps == undefined || resultList == undefined) {\r\n            return <SimpleError />\r\n        }\r\n\r\n        if (this.state.showForm == true) {\r\n            return <MasterDataForm recordToEdit={this.recordToEdit} entityProperty={this.entityProperty} onClose={(e) => { this.setState({ showForm: false }) }} />\r\n        }\r\n\r\n        return (\r\n            <div id=\"MasterDataList\">\r\n                <div className=\"btn-group\" style={{ marginBottom: '5px' }}>\r\n                    <AnchorButton show={this.entityProperty.creatable == true && this.entityProperty.editable == true} onClick={this.showCreateForm}\r\n                        iconClassName=\"fas fa-plus\">Add Record</AnchorButton>\r\n                    <AnchorButton onClick={this.printRecord} iconClassName=\"fas fa-file\">Print Record</AnchorButton>\r\n                </div>\r\n                <form id=\"filter-form\" onSubmit={(e) => { e.preventDefault() }}>\r\n                    <Modal title=\"Filter\" toggleable={true}>\r\n                        <div>\r\n                            <div className=\"form-group row\">\r\n                                <div className=\"col-6\">\r\n                                    <input value={(this.state.filter.page ?? 0) + 1} onChange={(e) => { this.updateFilterPage(e.target.value) }} min=\"1\" className=\"form-control\" type=\"number\" placeholder=\"go to page\" />\r\n                                </div>\r\n                                <div className=\"col-6\">\r\n                                    <input value={this.state.filter.limit??5} onChange={(e) => this.updateFilterLimit(e.target.value)} min=\"1\" className=\"form-control\" type=\"number\" placeholder=\"record per page\" />\r\n                                </div>\r\n                                <div className=\"col-12\"><p /></div>\r\n                                <div className=\"col-3\">\r\n                                    <ToggleButton active={exactsSearch}\r\n                                        yesLabel=\"exact\" noLabel=\"not exact\"\r\n                                        onClick={(val: boolean) => this.setExactSearch(val)}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"col-3\">\r\n                                    <SubmitResetButton onSubmit={this.filterFormSubmit} onReset={this.filterReset} />\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </Modal>\r\n                    <NavigationButtons limit={this.state.filter.limit ?? 5} totalData={this.state.recordData.totalData ?? 0}\r\n                        activePage={this.state.filter.page ?? 0} onClick={this.loadEntities} />\r\n                    <Modal title=\"Data List\" >\r\n                        {this.state.loading ?\r\n                            <Loading loading={this.state.loading} /> : null}\r\n                        <div className=\"container-fluid\" style={{ overflow: 'scroll' }}>\r\n                            <table className=\"table\" >\r\n                                <DataTableHeader fieldsFilter={this.state.filter.fieldsFilter} orderButtonOnClick={this.orderButtonOnClick} filterOnChange={this.filterOnChange} headerProps={headerProps} />\r\n                                <tbody>\r\n                                    {\r\n                                        resultList.map((result, i) => {\r\n                                            const number = this.getRecordNumber(i);\r\n                                            const values: Array<any> = EntityValues.parseValues(result, this.props.entityProperty);\r\n                                            return (<tr key={\"tr-result-\" + i}>\r\n                                                <td>{number}</td>\r\n                                                {values.map(value => {\r\n                                                    try {\r\n                                                        return (<td key={\"td-u-\" + uniqueId()}>{value}</td>)\r\n                                                    } catch (error) {\r\n                                                        return (<td key={\"td-u-\" + uniqueId()}>-</td>)\r\n                                                    }\r\n                                                })}\r\n                                                <td>\r\n                                                    <EditDeleteAction showEditForm={this.showEditForm} record={result} entityProperty={this.entityProperty} reload={() => this.loadEntities(undefined)} />\r\n                                                </td>\r\n                                            </tr>)\r\n                                        })}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </Modal>\r\n                </form>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst Loading = ({ loading }) => {\r\n    return (\r\n        <div style={{ width: '100%', height: '100%', paddingTop: '2rem', backgroundColor: 'rgb(240,240,240,0.5)', marginLeft: '-1rem', marginTop: '-1rem', position: 'absolute' }}>\r\n            <Spinner show={loading} />\r\n        </div>\r\n    )\r\n}\r\nconst SubmitResetButton = (props: any) => {\r\n    return (<div className=\"btn-group\">\r\n        <button onClick={props.onSubmit} className=\"btn btn-dark btn-sm\"><span className=\"icon\"><i className=\"fas fa-play-circle\" /></span>Apply Filter</button>\r\n        <button onClick={props.onReset} type=\"reset\" className=\"btn btn-dark btn-sm\"><span className=\"icon\"><i className=\"fas fa-sync-alt\" /></span>Reset</button>\r\n    </div>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(MasterDataList))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport MasterDataList from './MasterDataList';\r\nimport AttachmentInfo from './../../../models/AttachmentInfo';\r\nimport Filter from './../../../models/Filter';\r\nimport WebRequest from './../../../models/WebRequest';\r\nimport BasePage from './../../BasePage';\r\n\r\nclass State {\r\n    entityProperty?: EntityProperty;\r\n}\r\nclass MasterDataManagement extends BasePage {\r\n    masterDataService: MasterDataService;\r\n    code: string = \"\";\r\n    loadingEntityProperty: boolean = false;\r\n    entityProperty: undefined\r\n    state: State = new State();\r\n    constructor(props: any) {\r\n        super(props, \"Master Data\", true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    entityPropertyLoaded = (response: WebResponse) => {\r\n        this.loadingEntityProperty = false;\r\n        if (response.entityProperty == undefined) {\r\n            return;\r\n        }\r\n        this.masterDataService.setEntityProperty(this.props.code, response.entityProperty);\r\n        this.setState({ entityProperty: response.entityProperty });\r\n        this.setTitle(response.entityProperty);\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.props.code != undefined && this.code != this.props.code) {\r\n            this.code = this.props.code;\r\n            this.loadEntityProperty();\r\n        }\r\n        console.debug(\"updated this.props.code: \", this.props.code);\r\n    }\r\n    setTitle = (entityProp: EntityProperty) => {\r\n        document.title = new String(entityProp?.alias).toString();\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus(()=>{\r\n            if (this.props.code != undefined && this.code != this.props.code) {\r\n                this.code = this.props.code;\r\n                this.loadEntityProperty();\r\n            }\r\n            this.scrollTop();\r\n        });\r\n    }\r\n    startLoading(raltime: boolean) {\r\n        if (raltime == true) {\r\n            super.startLoading(raltime);\r\n        }\r\n    }\r\n\r\n    loadEntityProperty() {\r\n\r\n        if (undefined == this.code && this.loadingEntityProperty == true) {\r\n            return;\r\n        }\r\n        const existingEntityProperty = this.masterDataService.getEntityProperty(this.code);\r\n        if (existingEntityProperty != undefined) {\r\n            this.loadingEntityProperty = false;\r\n            this.setState({ entityProperty: existingEntityProperty });\r\n            this.setTitle(existingEntityProperty);\r\n\r\n            return;\r\n        }\r\n        this.loadingEntityProperty = true;\r\n        this.setState({ entityProperty: undefined });\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntityProperty,\r\n            this.entityPropertyLoaded,\r\n            (e: any) => { this.loadingEntityProperty = false; this.showCommonErrorAlert(e) },\r\n            this.code\r\n        )\r\n\r\n    }\r\n    printRecord = (filter: Filter) => {\r\n        const property = this.state.entityProperty;\r\n        if (!property) return;\r\n        this.showConfirmation(\"Print record? \")\r\n            .then(ok => {\r\n                if (!ok) return;\r\n                const req: WebRequest = {\r\n                    entity: property.entityName,\r\n                    filter: filter\r\n                }\r\n                this.commonAjaxWithProgress(\r\n                    this.masterDataService.generateReport,\r\n                    this.reportCreated,\r\n                    this.showCommonErrorAlert,\r\n                    req);\r\n            })\r\n    }\r\n    reportCreated = (attachment: AttachmentInfo) => {\r\n        this.showConfirmation(\"Save File \" + attachment.name + \" ?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                Object.assign(document.createElement('a'), {\r\n                    target: '_blank',\r\n                    download: attachment.name,\r\n                    style: { display: 'none' },\r\n                    href: attachment.dataUrl,\r\n                }).click();\r\n            })\r\n\r\n    }\r\n    render() {\r\n        if (this.state.entityProperty == undefined) {\r\n            return (\r\n                <div className=\" container-fluid section-body\" style={{ paddingTop: '20px' }}>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-4 text-right\"><div className=\"spinner-border\" role=\"status\" />\r\n                        </div>\r\n                        <div className=\"col-8\"><h4>Loading configuration</h4></div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        const property = this.state.entityProperty;\r\n        return (\r\n            <div id=\"MasterDataManagement\" className=\"container-fluid section-body\">\r\n                <h2>{this.state.entityProperty.alias}</h2>\r\n\r\n                <MasterDataList printRecord={this.printRecord} entityProperty={this.state.entityProperty} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(MasterDataManagement))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport Menu from '../../../models/settings/Menu';\r\nimport ManagementProperty from '../../../models/ManagementProperty';\r\nimport MasterDataManagement from './MasterDataManagement';\r\nimport { AuthorityType } from '../../../models/AuthorityType';\r\nimport Spinner from './../../loader/Spinner';\r\n\r\ninterface IState {\r\n    code?: string\r\n    // managementProperties:ManagementProperty[]\r\n}\r\nclass MasterDataMain extends BaseMainMenus {\r\n    masterDataService: MasterDataService;\r\n    state: IState = {\r\n        code: undefined\r\n    };\r\n    constructor(props: any) {\r\n        super(props, \"Master Data\", true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        console.debug(\"PROPS: \", this.props);\r\n    }\r\n\r\n    managementPropertiesLoaded = (response: WebResponse) => {\r\n        this.masterDataService.managementProperties = response.generalList ? response.generalList : [];\r\n        this.setSidebarMenus();\r\n        this.refresh();\r\n    }\r\n    setSidebarMenus = () => {\r\n        const sidebarMenus: Menu[] = [];\r\n        const managementProperties: ManagementProperty[] = this.masterDataService.managementProperties;\r\n        for (let i = 0; i < managementProperties.length; i++) {\r\n            const element = managementProperties[i];\r\n            sidebarMenus.push({\r\n                role:[AuthorityType.ROLE_ADMIN],\r\n                name: element.label,\r\n                url: element.entityName,\r\n                code: element.entityName,\r\n                menuClass: element.iconClassName\r\n            });\r\n        }\r\n        console.debug(\"this.props.setSidebarMenus: \", this.props.setSidebarMenus);\r\n        if (this.props.setSidebarMenus) {\r\n            this.props.setSidebarMenus(sidebarMenus);\r\n        }\r\n    }\r\n    loadManagamenetPages = () => {\r\n        if (this.masterDataService.managementProperties.length > 0) {\r\n            this.setSidebarMenus();\r\n            this.refresh();\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadManagementProperties,\r\n            this.managementPropertiesLoaded,\r\n            this.showCommonErrorAlert\r\n        );\r\n    }\r\n    getCode = (): string => {\r\n        return this.props.match.params.code;\r\n    }\r\n    componentDidMount() {\r\n        super.componentDidMount();\r\n        this.loadManagamenetPages();\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n        this.setSidebarMenus();\r\n        // console.debug(\"this.getCode(): \", this.getCode());\r\n        if (this.state.code != this.getCode()) {\r\n            this.setState({ code: this.getCode() });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.getCode() != undefined && this.getCode() != null && this.getCode() != \"\") {\r\n            return <MasterDataManagement  code={this.getCode()} />\r\n        }\r\n        if (this.masterDataService.managementProperties.length == 0) {\r\n            return <div className=\"container-fluid  section-body\"><Spinner/></div>\r\n        }\r\n        const properties: ManagementProperty[] = this.masterDataService.managementProperties;\r\n        return (\r\n            <div className=\"container-fluid section-body\">\r\n                <h2>Master Data Page</h2>\r\n                <div className=\"row\">\r\n                    {properties.map(property => {\r\n\r\n                        return (\r\n                            <div key={\"mngmnt-page-item-\"+property.entityName} className=\"col-md-2 text-center\" style={{ marginBottom: '10px' }}>\r\n                                <h2 ><Link className=\"btn btn-warning btn-lg\" to={\"/management/\" + property.entityName} ><i className={property.iconClassName} /></Link></h2>\r\n                                <p>{property.label}</p>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(MasterDataMain))","\r\n\r\nimport React from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport ApplicationProfileModel from '../../../models/ApplicationProfileModel';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport './Home.css';\r\nimport BasePage from './../../BasePage';\r\nclass HomeMain extends BasePage {\r\n    constructor(props: any) {\r\n        super(props, \"Home\", false);\r\n    }\r\n    render() {\r\n        const applicationProfile: ApplicationProfileModel = this.getApplicationProfile();\r\n        const imageUrl: string = baseImageUrl() + applicationProfile.backgroundUrl;\r\n        return (\r\n            <div className=\"landing-bg\"  style={{\r\n                    backgroundImage: 'url(\"' + imageUrl + '\")',\r\n                    color: applicationProfile.fontColor??\"rgb(0,0,0)\"\r\n                }} >\r\n                <h1 className=\"display-4\">{applicationProfile.name}</h1>\r\n                <p className=\"lead\">{applicationProfile.shortDescription}</p>\r\n                <hr className=\"my-4\" />\r\n                <p>{applicationProfile.welcomingMessage}</p>\r\n                <div className=\"btn-group\">\r\n                    <Link className=\"btn btn-primary btn-lg\" to=\"/about\" role=\"button\">About Us</Link>\r\n                    <Link className=\"btn btn-primary btn-lg\" to=\"/login\" role=\"button\">Login</Link>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(HomeMain))","\r\n\r\nimport  React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux'; \r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\n\r\nclass SettingsMain extends BaseMainMenus \r\n{\r\n    constructor(props:any){\r\n        super(props, \"Settings\", true);\r\n    }\r\n    render(){\r\n        return (\r\n            <div id=\"SettingsMain\" className=\"section-body container-fluid\">\r\n                <h2>Settings</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n  })\r\n  \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n  )(SettingsMain))","import React, { Fragment } from 'react'\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nexport const EditField = ({ edit, name, toggleInput, value, updateProperty, ...props }) => {\r\n    return (edit == true ?\r\n        <PropertyInput updateProperty={updateProperty} name={name} toggleInput={toggleInput} value={value} type={props.type} />\r\n        :\r\n        <PropertyLabel name={name} toggleInput={toggleInput} value={value} type={props.type} />\r\n    )\r\n}\r\nconst PropertyInput = ({ name, toggleInput, value, updateProperty, type }) => {\r\n    return (<div className=\"row\">\r\n        <p className=\"col-md-10\"><input type={type ?? 'text'} name={name} onChange={updateProperty} value={value} className=\"form-control\" /></p>\r\n        <div className=\"col-md-2\">\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'false'\r\n            }}\r\n                onClick={toggleInput} className=\"btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\nconst PropertyLabel = ({ name, toggleInput, value, type }) => {\r\n\r\n    return (<div className=\"row\" >\r\n        <div className=\"col-md-10\">\r\n            <p style={{ backgroundColor: type == 'color' ? value : '#fff' }} >{type == 'color' ? 'Sample Color' : value}</p>\r\n            {type == 'color' ? <p>{value}</p> : null}\r\n        </div>\r\n        <div className=\"col-md-2\">\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit</AnchorButton>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\n\r\nexport const EditImage = ({ name, edit, toggleInput, updateProperty }) => {\r\n    if (edit) {\r\n        return (\r\n            <Fragment>\r\n                <div>\r\n                    <AnchorButton attributes={{\r\n                        'data-name': name, 'data-enabled': 'false'\r\n                    }} onClick={toggleInput} className=\" btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n                </div>\r\n                <input onChange={updateProperty} className=\"form control\" accept=\"image/*\" type=\"file\" name={name} />\r\n            </Fragment>);\r\n    }\r\n    return (\r\n        <div>\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit image</AnchorButton>\r\n        </div>\r\n    )\r\n}","import React, { ChangeEvent, Component, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport User from '../../../models/UserModel';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport { setLoggedUser } from './../../../redux/actionCreators';\r\nimport UserService from './../../../services/UserService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField, EditImage } from './settingHelper'; \r\nimport BasePage from './../../BasePage';\r\ninterface EditField { username: boolean, displayName: boolean, editPassword: boolean, profileImage: boolean }\r\nclass IState {\r\n    user?: User = undefined;\r\n    editFields: EditField = {\r\n        username: false,\r\n        displayName: false,\r\n        editPassword: false,\r\n        profileImage: false\r\n    };\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass UserProfile extends BasePage {\r\n\r\n    userService: UserService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"User Profile\", true);\r\n        this.userService = this.getServices().userService;\r\n        this.state.user = Object.assign(new User(), this.getLoggedUser());\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const user: User | undefined = this.state.user;\r\n        if (!user) return;\r\n\r\n        user[target.name] = target.value;\r\n        this.setState({ user: user });\r\n    }\r\n    updateProfleImage = (e:ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const app = this;\r\n        const fileName:string|undefined = target.files ? target.files[0].name : undefined;\r\n        if (!fileName) return;\r\n        toBase64v2(target).then(function(imageData) {\r\n           app.setProfileImage(imageData);\r\n        }).catch(console.error);\r\n    }\r\n    setProfileImage = (imageData:string) => {\r\n        const user:User|undefined = this.state.user;\r\n        if (!user) return;\r\n        user.profileImage = imageData;\r\n        this.setState({user:user});\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const user: User | undefined = this.state.user;\r\n        const actualLoggedUser: User | undefined = this.getLoggedUser();\r\n        if (null == target || !user || !actualLoggedUser) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            user[propertyName] = actualLoggedUser[propertyName];\r\n        }\r\n        this.setState({ user: user, editFields: editFields });\r\n    }\r\n    saveRecord = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (this.state.fieldChanged() == false) {\r\n            return;\r\n        }\r\n        const app = this;\r\n        this.showConfirmation(\"Save Data?\")\r\n            .then(function (ok) {\r\n                if (ok) { app.doSaveRecord(); }\r\n            })\r\n    }\r\n    doSaveRecord = () => {\r\n        const user: User | undefined = this.getUserEditedData();\r\n        if (!user) return;\r\n        if (user.profileImage) {\r\n            this.commonAjaxWithProgress(\r\n                this.userService.updateProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                user\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.userService.updateProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                user\r\n            )\r\n        }\r\n    }\r\n    getUserEditedData = (): User | undefined => {\r\n        const user: User | undefined = this.state.user;\r\n        const editFields: EditField = this.state.editFields;\r\n        if (!user) return undefined;\r\n        const editedUser: User = new User();\r\n        for (const key in editFields) {\r\n            const element:boolean = editFields[key];\r\n            if (element && key != 'profileImage') {\r\n                editedUser[key] = user[key];\r\n            }\r\n        }\r\n        if (editFields.profileImage && user.profileImage?.startsWith(\"data:image\")) {\r\n            editedUser.profileImage = user.profileImage;\r\n        }\r\n        return editedUser;\r\n    }\r\n    profileSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Success\");\r\n        this.props.setLoggedUser(response.user);\r\n        const editFields = this.state.editFields;\r\n        for (const key in editFields) {\r\n            editFields[key] = false;\r\n        }\r\n        this.setState({editFields:editFields});\r\n    }\r\n\r\n    render() {\r\n        const user: User | undefined = this.state.user;\r\n        if (!user) return null;\r\n        const editFields: EditField = this.state.editFields;\r\n        return (\r\n            <div id=\"UserProfile\" className=\"section-body container-fluid\">\r\n                <h2>User Profile</h2>\r\n                <Card title=\"Profile Data\">\r\n                    <form onSubmit={this.saveRecord}>\r\n                        <div className=\"container-fluid text-center\" style={{marginBottom:'10px'}}>\r\n                            <img style={{marginBottom:'10px'}} width=\"100\" height=\"100\" className=\"rounded-circle border border-primary\" src={user.profileImage?.startsWith(\"data:image\")?user.profileImage:baseImageUrl() + user.profileImage} />\r\n                            <EditImage name=\"profileImage\" edit={editFields.profileImage} updateProperty={this.updateProfleImage} toggleInput={this.toggleInput} />\r\n                        </div>\r\n                        <FormGroup label=\"User Name\">\r\n                            <EditField edit={editFields.username} updateProperty={this.updateProfileProperty} name=\"username\" toggleInput={this.toggleInput} value={user.username} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Name\">\r\n                            <EditField edit={editFields.displayName} updateProperty={this.updateProfileProperty} name=\"displayName\" toggleInput={this.toggleInput} value={user.displayName} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Password\">\r\n                            <EditField edit={editFields.editPassword} updateProperty={this.updateProfileProperty} name=\"editPassword\" toggleInput={this.toggleInput} value={user.editPassword} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                           {this.state.fieldChanged()? <input type=\"submit\" className=\"btn btn-primary\" value=\"Save\" />:null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n} \r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setLoggedUser: (user: User) => dispatch(setLoggedUser(user)),\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(UserProfile))","import React, { ChangeEvent, FormEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport ApplicationProfileModel from '../../../models/ApplicationProfileModel';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport { setApplicationProfile } from '../../../redux/actionCreators';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField, EditImage } from './settingHelper';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport BasePage from './../../BasePage';\r\nclass EditFields {\r\n    name: boolean = false; pageIcon: boolean = false;\r\n    welcomingMessage: boolean = false;\r\n    contact: boolean = false; shortDescription: boolean = false;\r\n    backgroundUrl: boolean = false; address: boolean = false;\r\n    about: boolean = false; color: boolean = false; fontColor: boolean = false\r\n}\r\nclass IState {\r\n    applicationProfile?: ApplicationProfileModel = undefined;\r\n    editFields: EditFields = new EditFields()\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass EditApplicationProfile extends BasePage {\r\n\r\n    masterDataService: MasterDataService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"Application Profile\", true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        this.state.applicationProfile = Object.assign(new ApplicationProfileModel(), this.getApplicationProfile());\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const applicationProfile: ApplicationProfileModel | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return;\r\n\r\n        applicationProfile[target.name] = target.value;\r\n        this.setState({ applicationProfile: applicationProfile });\r\n    }\r\n\r\n    updateImageField = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const fieldName: string | null = e.target.getAttribute(\"name\");\r\n        if (null == fieldName) {\r\n            return;\r\n        }\r\n        const app = this;\r\n        const fileName: string | undefined = target.files ? target.files[0].name : undefined;\r\n        if (!fileName) return;\r\n        toBase64v2(target).then(function (imageData) {\r\n            app.setAppProfileField(fieldName, imageData);\r\n        }).catch(console.error);\r\n    }\r\n    setAppProfileField = (fieldName: string, value: any) => {\r\n        const applicationProfile: ApplicationProfileModel | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return;\r\n        applicationProfile[fieldName] = value;\r\n        this.setState({ applicationProfile: applicationProfile });\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const appProfile: ApplicationProfileModel | undefined = this.state.applicationProfile;\r\n        const actualAppProfile: ApplicationProfileModel | undefined = this.getApplicationProfile();\r\n        if (null == target || !appProfile || !actualAppProfile) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            appProfile[propertyName] = actualAppProfile[propertyName];\r\n        }\r\n        this.setState({ applicationProfile: appProfile, editFields: editFields });\r\n    }\r\n    saveRecord = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (this.state.fieldChanged() == false) {\r\n            return;\r\n        }\r\n        const app = this;\r\n        this.showConfirmation(\"Save Data?\")\r\n            .then(function (ok) {\r\n                if (ok) { app.doSaveRecord(); }\r\n            })\r\n    }\r\n    doSaveRecord = () => {\r\n        const applicationProfile: ApplicationProfileModel | undefined = this.getApplicationEditedData();\r\n        if (!applicationProfile) return;\r\n        if (applicationProfile.backgroundUrl || applicationProfile.pageIcon) {\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.updateApplicationProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                applicationProfile\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.masterDataService.updateApplicationProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                applicationProfile\r\n            )\r\n        }\r\n    }\r\n    getApplicationEditedData = (): ApplicationProfileModel | undefined => {\r\n        const applicationProfile: ApplicationProfileModel | undefined = this.state.applicationProfile;\r\n        const editFields: EditFields = this.state.editFields;\r\n        if (!applicationProfile) return undefined;\r\n        const editedApplication: ApplicationProfileModel = new ApplicationProfileModel();\r\n        for (const key in editFields) {\r\n            const element: boolean = editFields[key];\r\n            if (element && key != 'backgroundUrl' && key != 'pageIcon') {\r\n                editedApplication[key] = applicationProfile[key];\r\n            }\r\n        }\r\n        if (editFields.backgroundUrl && applicationProfile.backgroundUrl?.startsWith(\"data:image\")) {\r\n            editedApplication.backgroundUrl = applicationProfile.backgroundUrl;\r\n        }\r\n        if (editFields.pageIcon && applicationProfile.pageIcon?.startsWith(\"data:image\")) {\r\n            editedApplication.pageIcon = applicationProfile.pageIcon;\r\n        }\r\n        return editedApplication;\r\n    }\r\n    profileSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Success\");\r\n        this.props.setApplicationProfile(response.applicationProfile);\r\n        const editFields = this.state.editFields;\r\n        for (const key in editFields) {\r\n            editFields[key] = false;\r\n        }\r\n        this.setState({ editFields: editFields });\r\n    }\r\n\r\n    render() {\r\n        const applicationProfile: ApplicationProfileModel | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return null;\r\n        const editFields: EditFields = this.state.editFields;\r\n        const bgUrl: string = applicationProfile.backgroundUrl ?? \"\";\r\n        const pageIcon: string = applicationProfile.pageIcon ?? \"\";\r\n        return (\r\n            <div id=\"ApplicationProfileModel\" className=\"section-body container-fluid\">\r\n                <h2>Application Profile</h2>\r\n                <Card title=\"Profile Data\">\r\n                    <form onSubmit={this.saveRecord}>\r\n                        <div className=\"container-fluid text-center\" style={{ marginBottom: '10px' }}>\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={bgUrl.startsWith(\"data:image\") ? bgUrl : baseImageUrl() + bgUrl} />\r\n                            <EditImage name=\"backgroundUrl\" edit={editFields.backgroundUrl} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </div>\r\n                        <FormGroup label=\"Name\">\r\n                            <EditField edit={editFields.name} updateProperty={this.updateProfileProperty} name=\"name\" toggleInput={this.toggleInput} value={applicationProfile.name} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Welcoming Message\">\r\n                            <EditField edit={editFields.welcomingMessage} updateProperty={this.updateProfileProperty} name=\"welcomingMessage\" toggleInput={this.toggleInput} value={applicationProfile.welcomingMessage} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Short Description\">\r\n                            <EditField edit={editFields.shortDescription} updateProperty={this.updateProfileProperty} name=\"shortDescription\" toggleInput={this.toggleInput} value={applicationProfile.shortDescription} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Address\">\r\n                            <EditField edit={editFields.address} updateProperty={this.updateProfileProperty} name=\"address\" toggleInput={this.toggleInput} value={applicationProfile.address} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"About\">\r\n                            <EditField edit={editFields.about} updateProperty={this.updateProfileProperty} name=\"about\" toggleInput={this.toggleInput} value={applicationProfile.about} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Contact\">\r\n                            <EditField edit={editFields.contact} updateProperty={this.updateProfileProperty} name=\"contact\" toggleInput={this.toggleInput} value={applicationProfile.contact} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Background Color\">\r\n                            <EditField type=\"color\" edit={editFields.color} updateProperty={this.updateProfileProperty} name=\"color\" toggleInput={this.toggleInput} value={applicationProfile.color} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Font Color\">\r\n                            <EditField type=\"color\" edit={editFields.fontColor} updateProperty={this.updateProfileProperty} name=\"fontColor\" toggleInput={this.toggleInput} value={applicationProfile.fontColor} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Page Icon\">\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={pageIcon.startsWith(\"data:image\") ? pageIcon : baseImageUrl() + pageIcon} />\r\n                            <EditImage name=\"pageIcon\" edit={editFields.pageIcon} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                            {this.state.fieldChanged() ? <input type=\"submit\" className=\"btn btn-primary\" value=\"Save\" /> : null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setApplicationProfile: (applicationProfile: ApplicationProfileModel) => dispatch(setApplicationProfile(applicationProfile)),\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(EditApplicationProfile))","import React from 'react';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport Card from './../../container/Card';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport ApplicationProfileModel from './../../../models/ApplicationProfileModel';\r\nimport FormGroup from '../../form/FormGroup';\r\nclass AboutUs extends BaseComponent {\r\n    constructor(props) {\r\n        super(props, false);\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"About Us\";\r\n    }\r\n    render() {\r\n        const appProfile:ApplicationProfileModel = this.getApplicationProfile();\r\n        return (<div className=\"container-fluid\" style={{marginTop:'20px'}}>\r\n            <h2>About Us</h2>\r\n            <Card title=\"Application\">\r\n                <FormGroup label=\"Name\">{appProfile.name}</FormGroup>\r\n                <FormGroup  ><i>{appProfile.shortDescription}</i></FormGroup>\r\n                <FormGroup label=\"Contact\">{appProfile.contact}</FormGroup>\r\n                <FormGroup label=\"Address\">{appProfile.address}</FormGroup>\r\n            </Card>\r\n            <p/>\r\n            <Card title=\"Development Mode\">\r\n                {/* <FormGroup label=\"Repository\"><a target=\"_blank\" href=\"https://github.com/fajaralmu\">https://github.com/fajaralmu</a></FormGroup>\r\n                <FormGroup label=\"Front End\">React Js</FormGroup>\r\n                <FormGroup><a target=\"_blank\" href=\"https://github.com/fajaralmu/front-end-shopping-mart-v2\">https://github.com/fajaralmu/front-end-shopping-mart-v2</a></FormGroup>\r\n                <FormGroup label=\"Back End\">Java, Spring MVC</FormGroup>\r\n                <FormGroup><a target=\"_blank\" href=\"https://github.com/fajaralmu/universal-good-shop-v2\">https://github.com/fajaralmu/universal-good-shop-v2</a></FormGroup> */}\r\n            </Card>\r\n            <p/>\r\n        </div>);\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps, \r\n)(AboutUs))","\r\n\r\nimport React, { RefObject, Component, FormEvent, Fragment, ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport './Login.css';\r\nimport Spinner from '../../loader/Spinner';\r\nimport UserService from './../../../services/UserService';\r\nimport UserModel from './../../../models/UserModel';\r\nimport WebResponse from './../../../models/WebResponse'; \r\nimport AnchorWithIcon from './../../navigation/AnchorWithIcon';\r\nclass IState {\r\n    loading: boolean = false; displayName: string = \"\";\r\n    username: string = \"\";\r\n    editPassword: string = \"\";\r\n    editPasswordRepeat: string = \"\";\r\n    success:boolean = false;\r\n}\r\nclass Register extends BaseComponent {\r\n    state: IState = new IState();\r\n    userService: UserService;\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.userService = this.getServices().userService;\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    register(e: FormEvent) {\r\n        e.preventDefault();\r\n        if (this.fieldComplete()) {\r\n            if (this.passwordMatch() == false) {\r\n                this.showCommonErrorAlert(\"Password mismatch\");\r\n                return;\r\n            }\r\n            this.saveUser();\r\n        } else {\r\n            this.showCommonErrorAlert(\"Field is not complete\");\r\n        }\r\n    }\r\n    saveUser = () => {\r\n        const user = new UserModel();\r\n        user.editPassword = this.state.editPassword.trim();\r\n        user.username = this.state.username.trim();\r\n        user.displayName = this.state.displayName.trim();\r\n        this.commonAjax(\r\n            this.userService.saveUser,\r\n            this.userSaved,\r\n            this.showCommonErrorAlert,\r\n            user\r\n        );\r\n    }\r\n    userSaved = (response: WebResponse) => {\r\n       this.setState({success: true});\r\n    }\r\n    passwordMatch = () => {\r\n        return this.state.editPassword.trim() != \"\" && this.state.editPassword.trim() == this.state.editPasswordRepeat.trim();\r\n    }\r\n    fieldComplete = () => {\r\n        return this.state.displayName.trim() != \"\"\r\n            && this.state.username.trim() != \"\"\r\n            && this.state.editPassword.trim() != \"\"\r\n            && this.state.editPasswordRepeat.trim() != \"\";\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"Register\";\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.state.success) {\r\n            return (\r\n                <div  className=\"Register-wrapper\" style={{ textAlign:'center', margin: 0, paddingTop: 100 }}>\r\n                    <h2 className=\"text-center text-success\">\r\n                        <i className=\"fas fa-check\"/>\r\n                        Register Success    \r\n                    </h2>\r\n                    <AnchorWithIcon to=\"/login\" iconClassName=\"fas fa-sign-in-alt\">Login</AnchorWithIcon>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <div  className=\"Register-wrapper\" style={{ margin: 0, padding: 0 }}>\r\n                <div className=\"text-center\" style={{ marginTop: '25px' }}>\r\n                    <h1>Register</h1>\r\n                </div>\r\n                <form name='Register' onSubmit={(e) => { this.register(e) }}\r\n                    method='POST' className=\"form-signin text-center\">\r\n                    <CommonField name=\"username\" value={this.state.username} onChange={this.handleInputChange} />\r\n                    <CommonField name=\"displayName\" value={this.state.displayName} onChange={this.handleInputChange} />\r\n\r\n                    <PasswordField placeholder=\"Password\" name=\"editPassword\" value={this.state.editPassword} onChange={this.handleInputChange} />\r\n                    <PasswordField placeholder=\"Repeat Password\" name=\"editPasswordRepeat\" value={this.state.editPasswordRepeat} onChange={this.handleInputChange} />\r\n\r\n                    {this.state.loading ? <Spinner /> :\r\n                        <button className=\"btn text-light\" style={{ backgroundColor: 'rgb(9,26,78)' }} type=\"submit\">\r\n                            Register\r\n                        </button>}\r\n                    <p />\r\n                </form>\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst PasswordField = ({ placeholder, name, value, onChange }) => {\r\n    return <Fragment>\r\n        <label className=\"sr-only\">Password</label>\r\n        <input style={{ borderColor: 'rgb(9,26,78)' }} name={name} value={value} onChange={onChange} type=\"password\" id=\"inputPassword\" className=\"form-control\"\r\n            placeholder={placeholder} required />\r\n        <p />\r\n    </Fragment>\r\n}\r\nconst CommonField = ({ name, value, onChange }) => {\r\n    return (<Fragment>\r\n        <label className=\"sr-only\">Username</label>\r\n        <input style={{ borderColor: 'rgb(9,26,78)' }} name={name} value={value} onChange={onChange} type=\"text\" id=\"username\" className=\"form-control\"\r\n            placeholder={name} required autoFocus />\r\n        <p />\r\n    </Fragment>)\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    //  performRegister: (username: string, password: string, app: any) => dispatch(performRegister(username, password, app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Register))","\r\nimport BaseModel from './BaseModel';\r\nexport default class AppliactionConfiguration extends BaseModel {\r\n\r\n    videoWidth:number = 40;\r\n    videoHeight:number = 40;\r\n}","import React, { FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport User from '../../../../models/UserModel';\r\nimport PublicConferenceService from '../../../../services/PublicConferenceService';\r\nimport ConferenceRoomModel from '../../../../models/ConferenceRoomModel';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport SimpleWarning from '../../../alert/SimpleWarning'; \r\nimport WebRtcObject from '../../../../models/conference/WebRtcObject';\r\nimport MemberVideoStream from './MemberVideoStream';\r\nimport { doItLater } from './../../../../utils/EventUtil';\r\nimport ChatMessageModel from './../../../../models/ChatMessageModel';\r\nimport ChatMessagePanel from './chat/ChatMessagePanel';\r\nimport { RoomInfo, ErrorMediaStreamMessage, InfoMediaStreamMessage, MemberList } from './helper/roomHelper';\r\nimport { MediaShare } from '../../../../constant/MediaShare';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport WebSocketService from './../../../../services/WebSocketService';\r\nimport BasePage from './../../../BasePage';\r\nenum StreamType { CAMERA, SCREEN }\r\nconst PEER_NEW = \"PEER_NEW\", CHAT_MESSAGE = \"CHAT_MESSAGE\", PEER_ENTER = \"PEER_ENTER\", PEER_LEAVE = \"PEER_LEAVE\", ROOM_INVALIDATED = \"ROOM_INVALIDATED\";\r\nclass State {\r\n    roomCode?: string;\r\n    room?: ConferenceRoomModel;\r\n    loading: boolean = false;\r\n    streamType: StreamType = StreamType.CAMERA;\r\n    errorMessage?: string;\r\n    logEnabled: boolean = false;\r\n    mediaStreamReady: boolean = false;\r\n}\r\nconst videoConstraint: MediaTrackConstraints = {\r\n    width: { ideal: 40 }, height: { ideal: 40 }\r\n}\r\nconst mediaStreamConfig: MediaStreamConstraints = { video: videoConstraint, audio: true };\r\nclass ConferenceRoomSteaming extends BasePage {\r\n\r\n    state: State = new State();\r\n    publicConferenceService: PublicConferenceService;\r\n    memberRefs: Map<string, React.RefObject<MemberVideoStream>> = new Map();\r\n    videoRef: React.RefObject<HTMLVideoElement> = React.createRef();\r\n    videoStream?: MediaStream;\r\n    videoStreamError: boolean = false;\r\n    peerToDials: string[] = new Array();\r\n    offersToHandle: Map<string, WebRtcObject> = new Map();\r\n    wsService:WebSocketService ;\r\n\r\n    constructor(props: any) {\r\n        super(props, \"Conference Room\", true);\r\n        this.publicConferenceService = this.getServices().publicConferenceService;\r\n        this.wsService = this.getServices().websocketService;\r\n    }\r\n    handshakeHandler = (eventName: string, origin: string, data: WebRtcObject) => {\r\n        switch (eventName) {\r\n            case \"offer\":\r\n                this.handleOffer(origin, data);\r\n                break;\r\n            case \"answer\":\r\n                this.handleAnswer(origin, data);\r\n                break;\r\n            case \"candidate\":\r\n                this.handleCandidate(origin, data);\r\n                break;\r\n            case \"dial\":\r\n                this.handleDial(origin, data);\r\n                break;\r\n            default:\r\n                console.warn(\"NO HANDLER FOR: \", eventName);\r\n        }\r\n    };\r\n    setLogEnabled = (val: boolean) => {\r\n        this.setState({ logEnabled: val },\r\n            () => this.memberRefs.forEach(ref => {\r\n                if (ref.current) {\r\n                    ref.current.setLogEnabled(val);\r\n                }\r\n            }));\r\n    }\r\n    getMemberRef = (code: string): Promise<MemberVideoStream> => {\r\n        // console.debug(\"this.memberRefs: \", this.memberRefs);\r\n        return new Promise<MemberVideoStream>((resolve, reject) => {\r\n            if (code == this.getLoggedUser()?.code) {\r\n                reject(new Error(\"Not allowed\"));\r\n            }\r\n            const memberRef = this.memberRefs.get(code);\r\n            console.debug(\"get memberRef code: \", code, \" = \", memberRef);\r\n            if (!memberRef || !memberRef.current) {\r\n                console.debug(\"memberRef not exist, trying one second later\");\r\n                doItLater(() => {\r\n                    if (!memberRef || !memberRef.current) {\r\n                        console.debug(\"memberRef not exist\");\r\n                        reject(new Error(\"Member ref not found\"));\r\n                        return;\r\n                    }\r\n                    resolve(memberRef.current);\r\n                }, 1000);\r\n                return;\r\n            }\r\n            resolve(memberRef.current);\r\n        })\r\n    }\r\n    handleDial = (origin: string, data: WebRtcObject) => {\r\n        console.debug(\"HANDLE \", data.event, \" FROM : \", origin);\r\n        this.getMemberRef(origin).then(ref => {\r\n            if (this.videoStream) {\r\n                ref.createOffer(this.videoStream);\r\n            } else {\r\n                this.offersToHandle.set(origin, data.data);\r\n            }\r\n        });\r\n    }\r\n    handleOffer = (origin: string, data: WebRtcObject) => {\r\n        console.debug(\"HANDLE \", data.event, \" FROM : \", origin);\r\n        this.getMemberRef(origin).then(ref => {\r\n            ref.handleOffer(origin, data.data, this.videoStream);\r\n            if (!this.videoStream) {\r\n                ref.addLog(\"No VideoStream at offer: \" + origin);\r\n                this.offersToHandle.set(origin, data.data);\r\n            }\r\n        }).catch(console.error);\r\n    }\r\n    handleAnswer = (origin: string, data: WebRtcObject) => {\r\n        console.debug(\"HANDLE \", data.event, \" FROM : \", origin);\r\n        this.getMemberRef(origin).then(ref => {\r\n            ref.handleAnswer(origin, data.data);\r\n        }).catch(console.error);\r\n    }\r\n    handleCandidate = (origin: string, data: WebRtcObject) => {\r\n        console.debug(\"HANDLE \", data.event, \" FROM : \", origin);\r\n        this.getMemberRef(origin).then(ref => {\r\n            ref.handleCandidate(origin, data.data);\r\n        }).catch(console.error);\r\n    }\r\n    componentWillUnmount() {\r\n        console.debug(\"WILL UNMOUNT\");\r\n        this.resetWsCallbacks();\r\n        this.cleanMediaResources();\r\n    }\r\n    resetWsCallbacks = () => {\r\n        this.removeWSSubscriptionCallback('CONFERENCE_STREAMING', 'PEER_HANDSHAKE');\r\n        this.wsService.removeOnConnecCallbacks('USER_JOIN', 'INIT_MEDIA_STREAM');\r\n    }\r\n    cleanMediaResources = () => {\r\n        this.publicConferenceService.cleanMediaStreamResources(this.videoStream);\r\n    }\r\n    recordLoaded = (response: WebResponse) => {\r\n        if (response.conferenceRoom) {\r\n            this.setState({ room: ConferenceRoomModel.clone(response.conferenceRoom) }, this.initialize);\r\n        } else { alert(\"Unexpected Error: ROOM NOT FOUND\") }\r\n    }\r\n    initialize = () => {\r\n        //subscription\r\n        this.addOnWsConnectCallbacks(\r\n            { id: 'USER_JOIN', callback: this.notifyUserEnterRoom },\r\n            { id: \"INIT_MEDIA_STREAM\", callback: this.initMediaStream }\r\n        );\r\n        //on connect\r\n        this.addWebsocketSubscriptionCallback({\r\n            id: 'CONFERENCE_STREAMING',\r\n            subscribeUrl: '/wsResp/conference/' + this.state.roomCode,\r\n            callback: this.wsSubscriptionCallback\r\n        }, {\r\n            id: 'PEER_HANDSHAKE',\r\n            subscribeUrl: '/wsResp/webrtcpublicconference/' + this.state.roomCode + '/' + this.getLoggedUser()?.getCode(),\r\n            callback: this.webRtcHandshake\r\n        });\r\n        this.connectWs();\r\n\r\n    }\r\n    notifyUserEnterRoom = () => {\r\n        this.commonAjax(this.publicConferenceService.nofityUserEnter,\r\n            (r) => { }, this.showCommonErrorAlert, this.state.roomCode);\r\n    }\r\n\r\n    webRtcHandshake = (response: WebResponse) => {\r\n        const handshakeObject = response.realtimeHandshake;\r\n        console.debug(\"BEGIN webRtcHandshake \");\r\n        if (!handshakeObject) {\r\n            console.debug(\"realtimeHandshake object not found\");\r\n            return;\r\n        }\r\n        if (handshakeObject.origin == this.getLoggedUser()?.code) {\r\n            return;\r\n        }\r\n        this.handleWebRtcHandshake(handshakeObject.eventId, handshakeObject.origin, handshakeObject.webRtcObject);\r\n    }\r\n    handleWebRtcHandshake = (eventId: string, origin: string, webRtcObject: WebRtcObject) => {\r\n        console.info(\"webRtcHandshake: \", webRtcObject.event, \" FROM \", origin);\r\n        this.handshakeHandler(webRtcObject.event, origin, webRtcObject);\r\n        if (this.videoStream) {\r\n            console.info(\"handleStream \", webRtcObject.event);\r\n            this.handleStream(this.videoStream);\r\n        } else {\r\n            console.info(\"VIDEO STREAM NOT AVAILABLE for : \", webRtcObject.event);\r\n        }\r\n    }\r\n    wsSubscriptionCallback = (response: WebResponse) => {\r\n        console.info(\"response.conferenceUpdate: \", response.conferenceUpdate);\r\n        switch (response.conferenceUpdate) {\r\n            case PEER_NEW:\r\n                this.addNewRoomMember(response);\r\n                break;\r\n            case PEER_LEAVE:\r\n                this.removeRoomMember(response);\r\n                break;\r\n            case PEER_ENTER:\r\n                this.dialPeer(response);\r\n                break;\r\n            case ROOM_INVALIDATED:\r\n                this.showInfo(\"Room Has been invalidated\");\r\n                this.backToRoomMain();\r\n                break;\r\n            case CHAT_MESSAGE:\r\n                if (response.entity)\r\n                    this.addChatMessage(response.entity);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    addChatMessage = (message: ChatMessageModel) => {\r\n        const room = this.state.room;\r\n        if (!room) return;\r\n        this.setState({ room: room.addMessage(message) });\r\n    }\r\n    dialPeer = (response: WebResponse) => {\r\n        const room = this.state.room;\r\n        if (!room) return;\r\n\r\n        const peer = response.user;\r\n        if (!peer || peer.code == this.getLoggedUser()?.code) {\r\n            console.info(\"Prevent Dial MEMBER: \", peer?.code);\r\n            return;\r\n        }\r\n        console.info(\"DIAL MEMBER: \", peer.code);\r\n        room.removeMember(peer);\r\n        this.setState({ room: room }, () => {\r\n            this.reAddMemberAndDial(peer);\r\n        });\r\n    }\r\n\r\n    reAddMemberAndDial = (peer: User) => {\r\n        const room = this.state.room;\r\n        if (!room) return;\r\n        // doItLater(() => {\r\n        room.addMember(peer);\r\n        this.setState({ room: room }, () => {\r\n            if (!this.videoStream && this.videoStreamError == false) {\r\n                console.info(\"PUSH \", peer.code, \" TO WAITING\");\r\n                this.peerToDials.push(peer.code);\r\n            } else {\r\n                this.dialPeerByCode(peer.code);\r\n            }\r\n        });\r\n        // }, 1000);\r\n    }\r\n    dialPeerByCode = (code: string) => {\r\n        const ref = this.memberRefs.get(code);\r\n        if (!ref || !ref.current || code == this.getLoggedUser()?.code) {\r\n            console.warn(\"DIAL MEMBER not allowed\");\r\n            return;\r\n        }\r\n        if (!this.videoStream && this.videoStreamError == false) {\r\n            this.peerToDials.push(code);\r\n            return;\r\n        }\r\n        if (!this.videoStream) {\r\n            ref.current.requestDial();\r\n            return;\r\n        }\r\n        console.debug(\"Will Create OFFER to: \", code);\r\n        ref.current.createOffer(this.videoStream);\r\n    }\r\n\r\n    addNewRoomMember = (response: WebResponse) => {\r\n        const room = this.state.room;\r\n        if (room && response.user) {\r\n            this.updateRoomState(room.addMember(response.user));\r\n        }\r\n    }\r\n    removeRoomMember = (response: WebResponse) => {\r\n        const room = this.state.room;\r\n        if (room && response.user) {\r\n            this.updateRoomState(room.removeMember(response.user));\r\n        }\r\n    }\r\n    updateRoomState = (room: ConferenceRoomModel) => {\r\n        this.setState({ room: ConferenceRoomModel.clone(room) });\r\n    }\r\n    backToRoomMain = () => {\r\n        this.props.history.push(\"/conference/room\");\r\n    }\r\n    getRoomCodeFromProps = () => {\r\n        if (!this.props.location.state) {\r\n            this.backToRoomMain();\r\n            return;\r\n        }\r\n        const roomCode = this.props.location.state.roomCode;\r\n        if (roomCode) {\r\n            document.title = \"ROOM: \" + roomCode;\r\n            this.setState({ roomCode: roomCode }, this.getRoom);\r\n        } else {\r\n            this.backToRoomMain();\r\n        }\r\n    }\r\n    startLoading = () => { this.setState({ loading: true }) }\r\n    endLoading = () => { this.setState({ loading: false }) }\r\n    getRoom = (e?: FormEvent) => {\r\n        if (e) { e.preventDefault(); }\r\n        if (!this.state.roomCode) {\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.publicConferenceService.enterRoom,\r\n            this.recordLoaded, this.showCommonErrorAlert,\r\n            this.state.roomCode\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus(()=>{\r\n            this.getRoomCodeFromProps();\r\n            this.scrollTop();\r\n        });\r\n    }\r\n    getMediaStreamConfig = (): MediaStreamConstraints => {\r\n        if (this.state.room) {\r\n            return this.state.room.getMediaStreamConfig();\r\n        }\r\n        return mediaStreamConfig;\r\n    }\r\n    initMediaStream = (redial: boolean = false) => {\r\n        console.debug(\"INIT MEDIA STREAM video:\", this.getMediaStreamConfig().video);\r\n        let mediaStream = window.navigator.mediaDevices.getUserMedia(this.getMediaStreamConfig())\r\n        mediaStream\r\n            .then((stream: MediaStream) => {\r\n                this.setState({ errorMessage: undefined, mediaStreamReady: true },\r\n                    () => {\r\n                        this.handleStream(stream, true);\r\n                        if (redial == true) {\r\n                            this.notifyUserEnterRoom();\r\n                        }\r\n                    });\r\n            })\r\n            .catch((e: any) => {\r\n                console.error(\"ERROR INIT MEDIA STREAM: \", e);\r\n                this.videoStreamError = true;\r\n                this.setState({ errorMessage: new String(e).toString(), mediaStreamReady: false })\r\n            });\r\n    }\r\n\r\n    handleStream = (stream: MediaStream, updateVideoSrc: boolean = false) => {\r\n\r\n        console.debug(\"START HANDLE STREAM, update videoSRC: \", updateVideoSrc);\r\n        if (updateVideoSrc) {\r\n            if (this.videoRef.current) {\r\n                this.videoRef.current.srcObject = stream;\r\n            } else {\r\n                doItLater(() => {\r\n                    if (this.videoRef.current) {\r\n                        this.videoRef.current.srcObject = stream;\r\n                    } else {\r\n                        console.debug(\"this.videoRef.current not found\");\r\n                    }\r\n                }, 1000);\r\n                console.debug(\"this.videoRef.current not found, retrying in 1 sec\");\r\n            }\r\n        }\r\n        this.videoStream = stream;\r\n        this.videoStreamError = false;\r\n        this.checkDialWaiting();\r\n        this.checkOffersWaiting();\r\n        console.debug(\"END HANDKE STREAM\");\r\n    }\r\n    checkOffersWaiting = () => {\r\n        console.debug(\"this.offersToHandle: \", this.offersToHandle.size);\r\n        this.offersToHandle.forEach((data, origin) => {\r\n            this.dialPeerByCode(origin);\r\n        })\r\n        this.offersToHandle.clear();\r\n    }\r\n    checkDialWaiting = () => {\r\n        console.debug(\"this.peerToDials: \", this.peerToDials.length);\r\n        if (this.peerToDials.length == 0) return;\r\n        this.peerToDials.forEach(this.dialPeerByCode);\r\n        this.peerToDials = [];\r\n    }\r\n    leaveRoom = () => {\r\n        this.showConfirmationDanger(\"Leave Room?\")\r\n            .then(ok => {\r\n                if (!ok) return;\r\n                this.doLeaveRoom();\r\n            })\r\n    }\r\n    doLeaveRoom = () => {\r\n        if (!this.state.roomCode) return;\r\n        this.commonAjax(\r\n            this.publicConferenceService.leaveRoom,\r\n            () => { this.props.history.push(\"/conference/room\"); },\r\n            this.showCommonErrorAlert,\r\n            this.state.roomCode\r\n        )\r\n    }\r\n    startStream = (mediaShare: MediaShare) => {\r\n        const room = this.state.room;\r\n        if (!room) return;\r\n        room.started = true;\r\n        room.mediaShare = mediaShare;\r\n        this.cleanMediaResources();\r\n        this.setState({ room: room }, () => this.initMediaStream(true))\r\n    }\r\n    retryMediaStream = () => this.initMediaStream(true);\r\n    render() {\r\n        const user: User | undefined = this.getLoggedUser();\r\n        const room = this.state.room;\r\n        if (!user) return null;\r\n        return (\r\n            <>\r\n                {room ? <ChatMessagePanel room={room} /> : null}\r\n                <div id=\"ConferenceRoomSteaming\" className=\"section-body container-fluid\" >\r\n\r\n                    <h2>STREAMING Room</h2>\r\n                    <div className=\"alert alert-info\"  >\r\n                        Welcome, <strong>{user.displayName}  </strong>\r\n                    </div>\r\n                    <Loading show={this.state.loading} />\r\n                    {room ?\r\n                        <Fragment>\r\n                            <StartStream startStream={this.startStream} />\r\n                            <p />\r\n                            <RoomInfo setLogEnabled={this.setLogEnabled} logEnabled={this.state.logEnabled}\r\n                                videoRef={this.videoRef} redialAll={this.notifyUserEnterRoom} memberRefs={this.memberRefs} user={user}\r\n                                leaveRoom={this.leaveRoom} room={room} />\r\n                            <p />\r\n                            <InfoMediaStreamMessage message={this.state.mediaStreamReady ? \"Media Stream Ready\" : \"\"} />\r\n                            <ErrorMediaStreamMessage retry={this.retryMediaStream} message={this.state.errorMessage??\"\"} />\r\n                            <MemberList user={user} room={room}\r\n                                memberRefs={this.memberRefs} dialPeerByCode={this.dialPeerByCode} />\r\n\r\n                        </Fragment>\r\n                        : <SimpleWarning children=\"No Data\" />\r\n                    }\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\nconst StartStream = (props: { startStream(mediaShare: MediaShare): any }) => {\r\n    return null;\r\n    //TODO: fix\r\n    return (\r\n        <div className=\"container-fluid text-center \">\r\n            <h3>Start Media:</h3>\r\n            <AnchorWithIcon iconClassName=\"fas fa-video\" onClick={() => { props.startStream(MediaShare.VIDEO_AUDIO) }}>\r\n                Video\r\n            </AnchorWithIcon>\r\n            <AnchorWithIcon iconClassName=\"fas fa-microphone\" onClick={() => { props.startStream(MediaShare.AUDIO) }} >\r\n                Audio Only\r\n            </AnchorWithIcon>\r\n        </div>\r\n    )\r\n}\r\nconst Loading = (props: { show: boolean }) => {\r\n    return (\r\n        props.show == true ? <Spinner style={{ zIndex: 1000, position: 'absolute', width: '100%', marginTop: 20 }} />\r\n            : null\r\n    )\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(ConferenceRoomSteaming))","import UserModel from './UserModel';\nimport BaseModel from './BaseModel';\nimport { uniqueId } from './../utils/StringUtil';\nimport ChatMessageModel from './ChatMessageModel';\nimport AppliactionConfiguration from './ApplicationConfiguration';\nimport { MediaShare } from '../constant/MediaShare';\n\nexport default class ConferenceRoomModel extends BaseModel {\n\n\tgetMediaStreamConfig = (): MediaStreamConstraints => {\n\t\tconsole.debug(\"this.mediaShare: \", this.mediaShare);\n\t\tconst videoConstraint: MediaTrackConstraints = {\n\t\t\twidth: { ideal: this.config.videoWidth }, height: { ideal: this.config.videoHeight }\n\t\t}\n\t\tconst mediaStreamConfig: MediaStreamConstraints = { video: \n\t\t\tthis.mediaShare == MediaShare.VIDEO_AUDIO?\n\t\t\t videoConstraint:false, audio: true };\n\t\treturn mediaStreamConfig;\n\t}\n\t//\n\tmediaShare:MediaShare = MediaShare.VIDEO_AUDIO;\n\tstarted:boolean = true;//false;\n\n\t///\n\tcode: string = uniqueId();\n\tactive: boolean = false;\n\tuser?: UserModel;\n\tmembers: UserModel[] = [];\n\tchats: ChatMessageModel[] = [];\n\tconfig: AppliactionConfiguration = new AppliactionConfiguration();\n\taddMember = (user: UserModel): ConferenceRoomModel => {\n\t\tthis.members.push(user);\n\t\treturn this;\n\t}\n\tisAdmin = (user: UserModel | undefined) => {\n\t\tif (!user) return false;\n\t\treturn this.user?.id == user.id;\n\t}\n\tremoveMember = (memberToRemove: UserModel): ConferenceRoomModel => {\n\t\tfor (let i = 0; i < this.members.length; i++) {\n\t\t\tconst member = this.members[i];\n\t\t\tif (memberToRemove.code == member.code) {\n\t\t\t\tthis.members.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\taddMessage = (message: ChatMessageModel): ConferenceRoomModel => {\n\t\tthis.chats.push(message);\n\t\treturn this;\n\t}\n\tstatic clone(room: ConferenceRoomModel): ConferenceRoomModel {\n\t\treturn Object.assign(new ConferenceRoomModel, room);\n\t}\n\tclone = (): ConferenceRoomModel => {\n\t\treturn Object.assign(new ConferenceRoomModel, this);\n\t}\n}\n","\r\nimport React, { Component } from 'react';\r\nexport default class SimpleWarning extends Component<any, any>\r\n{\r\n\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        return (\r\n            <div style={this.props.style} className={\"alert alert-warning \"+(this.props.className??\"\")}>\r\n                {this.props.children??\"Error Occured\"}\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport { uniqueId } from './StringUtil';\r\n\r\n\r\nexport const tableHead = (...values:string[]) => {\r\n   \r\n    return (<thead>\r\n        <tr>\r\n            {values.map((value)=>{\r\n                return <th key={uniqueId()}>{value}</th>\r\n            })}\r\n        </tr>\r\n    </thead>)\r\n}\r\nexport const groupArray =  (array, division) => {\r\n    if (null == array || array.length == 0) { return [] }\r\n    const groupedArray = new Array();\r\n    const itemPerDivision = Math.ceil(array.length / division)\r\n\r\n    if (itemPerDivision == 1) {\r\n        groupedArray.push(array);\r\n        return groupedArray;\r\n    }\r\n\r\n    for (let i = 0; i < division; i++) {\r\n        groupedArray.push(new Array());\r\n    }\r\n\r\n    let index = 1;\r\n    let divisionIndex = 0;\r\n    for (let i = 0; i < array.length; i++) {\r\n        const element = array[i];\r\n        groupedArray[divisionIndex].push(element);\r\n\r\n        index++;\r\n        if (index > itemPerDivision) {\r\n            divisionIndex++;\r\n            index = 1;\r\n        }\r\n    }\r\n\r\n    return groupedArray;\r\n}\r\n","import React, { ChangeEvent } from 'react'\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport PublicConferenceService from './../../../../services/PublicConferenceService';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../../constant/stores';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport ConferenceRoomModel from './../../../../models/ConferenceRoomModel';\r\nimport SimpleError from '../../../alert/SimpleError';\r\nimport WebResponse from './../../../../models/WebResponse';\r\n\r\nclass State {\r\n    room?: ConferenceRoomModel;\r\n}\r\nclass RoomInfoForm extends BaseComponent {\r\n    state: State = new State();\r\n    service: PublicConferenceService;\r\n    constructor(props) {\r\n        super(props, true);\r\n        this.service = this.getServices().publicConferenceService;\r\n    }\r\n    onSubmit = () => {\r\n        if (!this.state.room) return;\r\n        this.showConfirmation(\"Save Data?\")\r\n        .then((ok)=>{\r\n            if (!ok) return;\r\n            this.commonAjax(\r\n                this.service.updateRoomInfo,\r\n                this.recordSaved,\r\n                this.showCommonErrorAlert,\r\n                this.state.room\r\n            )\r\n        })\r\n       \r\n    }\r\n    recordSaved = (response:WebResponse) => {\r\n        this.showInfo(\"Success\")\r\n        this.props.recordSavedCallback(response); \r\n    }\r\n    componentDidMount() {\r\n        this.setState({ room: this.props.room });\r\n    }\r\n    updateRoomProps = (e:ChangeEvent) => {\r\n        \r\n        const room = this.state.room;\r\n        if (!room) return;\r\n        const target = e.target as HTMLInputElement;\r\n        const name = target.name;\r\n        room[name] =target.value;\r\n        this.setState({room:room});\r\n    }\r\n    render() {\r\n        const room = this.state.room;\r\n        if (!room) {\r\n            return <SimpleError>Error: Room data is missing</SimpleError>\r\n        }\r\n        return (\r\n            <form onSubmit={e => { e.preventDefault(); this.onSubmit() }}>\r\n                <h4 className=\"text-center\"><i className=\"fas fa-pencil-alt\"/> Edit Room Data</h4>\r\n                <p/>\r\n                <FormGroup label=\"Code\">\r\n                    <input onChange={this.updateRoomProps} name=\"code\" value={room.code} className=\"form-control\" />\r\n                </FormGroup>\r\n                <FormGroup>\r\n                    <input type=\"submit\" value=\"Save\" className=\"btn btn-success\" />\r\n                </FormGroup>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    mapCommonUserStateToProps\r\n)(RoomInfoForm)\r\n","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseMainMenus from '../../../layout/BaseMainMenus';\r\nimport User from '../../../../models/UserModel';\r\nimport Card from '../../../container/Card';\r\nimport PublicConferenceService from './../../../../services/PublicConferenceService';\r\nimport ConferenceRoomModel from './../../../../models/ConferenceRoomModel';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport SimpleWarning from '../../../alert/SimpleWarning';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport ToggleButton from '../../../navigation/ToggleButton';\r\nimport { tableHead } from './../../../../utils/CollectionUtil';\r\nimport RoomInfoForm from './RoomInfoForm';\r\n\r\nclass State {\r\n    loading: boolean = false;\r\n    room?: ConferenceRoomModel;\r\n    editMode: boolean = false;\r\n}\r\nclass ConferenceMain extends BaseMainMenus {\r\n    state: State = new State();\r\n    publicConferenceService: PublicConferenceService;\r\n    constructor(props: any) {\r\n        super(props, \"Conference\", true);\r\n        this.publicConferenceService = this.getServices().publicConferenceService;\r\n    }\r\n\r\n    recordLoaded = (response: WebResponse) => {\r\n        if (response.conferenceRoom) {\r\n            this.setState({ room: Object.assign(new ConferenceRoomModel, response.conferenceRoom) });\r\n        }\r\n    }\r\n    startLoading = () => { this.setState({ loading: true }) }\r\n    endLoading = () => { this.setState({ loading: false }) }\r\n    getRoom = () => {\r\n        this.commonAjax(\r\n            this.publicConferenceService.getRoom,\r\n            this.recordLoaded,\r\n            this.showCommonErrorAlert\r\n        )\r\n    }\r\n    createRoom = () => {\r\n        this.commonAjax(\r\n            this.publicConferenceService.generateRoom,\r\n            this.recordLoaded,\r\n            this.showCommonErrorAlert\r\n        )\r\n    }\r\n    setActiveStatus = (active: boolean) => {\r\n        this.commonAjax(\r\n            this.publicConferenceService.setActiveStatus,\r\n            () => {\r\n                this.activeStatusChanged(active);\r\n            },\r\n            this.showCommonErrorAlert,\r\n            active\r\n        )\r\n    }\r\n    activeStatusChanged = (active: boolean) => {\r\n        const room = this.state.room;\r\n        if (!room) return;\r\n        room.active = active;\r\n        this.setState({ room: room });\r\n    }\r\n    componentDidMount() {\r\n        super.componentDidMount();\r\n        this.getRoom();\r\n    }\r\n    enterRoom = () => {\r\n        if (!this.state.room) return;\r\n        this.props.history.push({\r\n            pathname: \"/conference/enterroom\",\r\n            state: { roomCode: this.state.room.code }\r\n        })\r\n    }\r\n    removeMember = (member: User) => {\r\n        this.showConfirmationDanger(\"Remove \" + member.displayName + \"?\")\r\n            .then(ok => {\r\n                if (!ok) return;\r\n                this.doRemoveMember(member);\r\n            })\r\n    }\r\n    memberRemoved = (response: WebResponse, member: User) => {\r\n        const room = this.state.room;\r\n        if (!room) return;\r\n        room.removeMember(member);\r\n        this.setState({ room: room });\r\n    }\r\n    doRemoveMember = (m: User) => {\r\n        this.commonAjax(\r\n            this.publicConferenceService.removeRoomMember,\r\n            (r) => this.memberRemoved(r, m),\r\n            this.showCommonErrorAlert,\r\n            m.code\r\n        )\r\n    }\r\n    render() {\r\n        const user: User | undefined = this.getLoggedUser();\r\n        if (!user) return null;\r\n        const room = this.state.room;\r\n        return (\r\n            <div id=\"ConferenceMain\" className=\"section-body container-fluid\" >\r\n                <h2>Conference Main</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{user.displayName}  </strong>\r\n                </div>\r\n                <Card title=\"My Room\">\r\n                    {this.state.loading ?\r\n                        <Spinner style={{ marginBottom: 150 }} /> :\r\n                        <Fragment>\r\n                            {room ?\r\n                                <>\r\n                                    <FormGroup label=\"Edit Mode\">\r\n                                        <ToggleButton active={this.state.editMode} onClick={val => this.setState({ editMode: val })}/>\r\n                                    </FormGroup>\r\n                                    {this.state.editMode ?\r\n                                        <RoomInfoForm recordSavedCallback={this.recordLoaded} room={room} />\r\n                                        :\r\n                                        <RoomInfo enterRoom={this.enterRoom} removeMember={this.removeMember}\r\n                                            setActiveStatus={this.setActiveStatus} room={room} />\r\n                                    }\r\n\r\n                                </>\r\n                                : <SimpleWarning className=\"text-center\">\r\n                                    <h4>No Data</h4>\r\n                                    <AnchorWithIcon iconClassName=\"fas fa-video\" children=\"Create\" onClick={this.createRoom} />\r\n                                </SimpleWarning>}\r\n                            <AnchorWithIcon show={this.state.editMode==false} iconClassName=\"fas fa-sync\" children=\"Reload\" onClick={this.getRoom} />\r\n                        </Fragment>}\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst RoomInfo = (props: { room: ConferenceRoomModel, removeMember(member: User): any, setActiveStatus(val: boolean): any, enterRoom(): any }) => {\r\n    const room: ConferenceRoomModel = Object.assign(new ConferenceRoomModel, props.room);\r\n    return (\r\n        <div>\r\n            <FormGroup label=\"Code\">{room.code}</FormGroup>\r\n            <FormGroup label=\"Created\" >{room.createdDate ? new Date(room.createdDate).toLocaleString() : \"-\"}</FormGroup>\r\n            <FormGroup label=\"Active\">\r\n                <ToggleButton active={room.active} onClick={props.setActiveStatus} />\r\n            </FormGroup>\r\n            {room.active ?\r\n                <FormGroup><AnchorWithIcon className=\"btn btn-warning btn-sm\" onClick={props.enterRoom} children=\"Enter Room\" /></FormGroup> : null}\r\n            <FormGroup label=\"Members\" />\r\n            <MemberList removeMember={props.removeMember} members={room.members} room={room} />\r\n        </div>\r\n    )\r\n}\r\nconst MemberList = (props: { members: User[], removeMember(member: User): any, room: ConferenceRoomModel, }) => {\r\n\r\n    return (\r\n        <table className=\"table\">\r\n            {tableHead(\"No\", \"Name\", \"Action\")}\r\n            <tbody>\r\n                {props.members.map((member, i) => {\r\n                    const isAdmin = props.room.isAdmin(member);\r\n                    return (\r\n                        <tr key={\"room_member_\" + i} >\r\n                            <td>{i + 1}</td>\r\n                            <td>{member.displayName}\r\n                                {isAdmin ? <i>&nbsp;- admin</i> : \"\"}\r\n                            </td>\r\n                            <td>\r\n                                {isAdmin ? null :\r\n                                    <AnchorWithIcon onClick={e => props.removeMember(member)} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\" children=\"Remove\" />\r\n                                }\r\n                            </td>\r\n                        </tr>\r\n                    )\r\n                })}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(ConferenceMain))","\r\n\r\nimport React, { FormEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseMainMenus from '../../../layout/BaseMainMenus';\r\nimport User from '../../../../models/UserModel';\r\nimport PublicConferenceService from './../../../../services/PublicConferenceService';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport ConferenceRoomModel from './../../../../models/ConferenceRoomModel';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport Spinner from './../../../loader/Spinner';\r\nimport { tableHead } from './../../../../utils/CollectionUtil';\r\nimport SimpleWarning from '../../../alert/SimpleWarning';\r\nimport Card from './../../../container/Card';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nclass State {\r\n    roomCode?: string;\r\n    room?: ConferenceRoomModel;\r\n    loading: boolean = false;\r\n}\r\nclass ConferenceRoom extends BaseMainMenus {\r\n    state: State = new State();\r\n    publicConferenceService: PublicConferenceService;\r\n    constructor(props: any) {\r\n        super(props, \"Conference\", true);\r\n        this.publicConferenceService = this.getServices().publicConferenceService;\r\n    }\r\n    recordLoaded = (response: WebResponse) => {\r\n        if (this.hasCodeOnURI()) {\r\n            this.enterRoom();\r\n            return;\r\n        }\r\n        this.setState({ room: response.conferenceRoom });\r\n    }\r\n    startLoading = () => { this.setState({ loading: true }) }\r\n    endLoading = () => { this.setState({ loading: false }) }\r\n    getRoom = (e?: FormEvent) => {\r\n        if (e) { e.preventDefault(); }\r\n        if (!this.state.roomCode) {\r\n\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.publicConferenceService.getRoomByCode,\r\n            this.recordLoaded,\r\n            this.showCommonErrorAlert,\r\n            this.state.roomCode\r\n        )\r\n    }\r\n    enterRoom = () => {\r\n        if (!this.state.roomCode) return;\r\n        this.props.history.push({\r\n            pathname: \"/conference/enterroom\",\r\n            state: { roomCode:this.state.roomCode }\r\n        })\r\n    }\r\n    componentDidMount () {\r\n        super.componentDidMount();\r\n        if (this.hasCodeOnURI()) {\r\n            this.setState({roomCode: this.props.match.params.code}, this.getRoom);\r\n        }\r\n    }\r\n    hasCodeOnURI = () => {\r\n        return  this.props.match.params.code != undefined;\r\n    }\r\n    render() {\r\n        const user: User | undefined = this.getLoggedUser();\r\n        if (!user) return null;\r\n        \r\n        return (\r\n            <div id=\"ConferenceRoom\" className=\"section-body container-fluid\" >\r\n                <h2>Conference Room</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{user.displayName}  </strong>\r\n                    <form onSubmit={this.getRoom}>\r\n                        <FormGroup label=\"Code\">\r\n                            <input required className=\"form-control\" name=\"roomCode\"\r\n                                onChange={this.handleInputChange}\r\n                            />\r\n                        </FormGroup>\r\n                        <FormGroup>\r\n                            <input type=\"submit\" className=\"btn btn-success\" />\r\n                        </FormGroup>\r\n                    </form>\r\n                </div>\r\n\r\n                {this.state.loading ?\r\n                    <Spinner /> :\r\n                    this.state.room ?\r\n                        <RoomInfo enterRoom={this.enterRoom} room={this.state.room} />\r\n                        : <SimpleWarning children=\"No Data\" />\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst RoomInfo = (props: { room: ConferenceRoomModel, enterRoom():any }) => {\r\n    const room: ConferenceRoomModel = Object.assign(new ConferenceRoomModel, props.room);\r\n    return (\r\n        <Card>\r\n            <FormGroup label=\"Code\">{room.code}</FormGroup>\r\n            <FormGroup label=\"Created\" >{room.createdDate ? new Date(room.createdDate).toLocaleString() : \"-\"}</FormGroup>\r\n            <FormGroup label=\"Active\">\r\n                {room.active == true ? \"Yes\" : \"No\"}\r\n            </FormGroup>\r\n            <FormGroup  >\r\n                <AnchorWithIcon onClick={props.enterRoom}>\r\n                    Enter Room\r\n                </AnchorWithIcon>\r\n            </FormGroup>\r\n            <FormGroup label=\"Members\" />\r\n            <MemberList members={room.members} room={room} />\r\n        </Card>\r\n    )\r\n}\r\n\r\nconst MemberList = (props: { members: User[], room: ConferenceRoomModel, }) => {\r\n\r\n    return (\r\n        <table className=\"table\">\r\n            {tableHead(\"No\", \"Name\", \"Action\")}\r\n            <tbody>\r\n                {props.members.map((member, i) => {\r\n\r\n                    return (\r\n                        <tr key={\"room_member_\" + i} >\r\n                            <td>{i + 1}</td>\r\n                            <td>{member.displayName}\r\n                                {props.room.isAdmin(member) ? <i>&nbsp;- admin</i> : \"\"}\r\n                            </td>\r\n                            <td></td>\r\n                        </tr>\r\n                    )\r\n                })}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(ConferenceRoom))","import React, { Component } from 'react'\r\n\r\nclass AppIcon extends Component<any, any>{\r\n\r\n    render() {\r\n        return (\r\n            <svg viewBox=\"0 0 600 600\" xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"200\"><g className=\"icon-svg-long\" stroke=\"black\" fill=\"transparent\" strokeWidth=\"2\"> <path fill=\"none\" strokeWidth=\"6\" stroke=\"rgb(0,176,80)\" d=\"M 204 178 Q 332 108 422 215Q 489 313 413 414Q 336 494 228 452Q 113 387 144 258\" /><path fill=\"none\" strokeWidth=\"6\" stroke=\"rgb(0,176,80)\" d=\"M 169 143 Q 315 53 440 161Q 508 229 497 342\" /><path fill=\"none\" strokeWidth=\"6\" stroke=\"rgb(0,176,80)\" d=\"M 442 455 Q 329 554 195 491Q 71 413 92 268Q 107 213 135 178\" /><path fill=\"none\" strokeWidth=\"6\" stroke=\"rgb(0,176,80)\" d=\"M 497 342 L 497 342 L 497 521.6000061035156 L 442 455 \" /><path fill=\"none\" strokeWidth=\"6\" stroke=\"rgb(0,176,80)\" d=\"M 169 143 L 169 143 L 204 178 \" /><path fill=\"none\" strokeWidth=\"6\" stroke=\"rgb(0,176,80)\" d=\"M 135 178 L 135 178 L 300 341 L 300 191.60000610351562 L 348.75 191.60000610351562 L 348.75 410.6000061035156 L 301.75 410.6000061035156 L 144 258 \" /></g></svg>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default AppIcon;","\r\n\r\nimport React, { RefObject, Component, FormEvent, Fragment, ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport './Login.css';\r\nimport { performLogin } from '../../../redux/actionCreators';\r\nimport Spinner from './../../loader/Spinner';\r\nimport AnchorWithIcon from './../../navigation/AnchorWithIcon';\r\nimport AppIcon from './AppIcon';\r\nclass IState {\r\n    loading: boolean = false; username: string = \"\"; editPassword: string = \"\";\r\n}\r\nclass Login extends BaseComponent {\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    login(e: FormEvent) {\r\n        e.preventDefault();\r\n        this.props.performLogin(this.state.username, this.state.editPassword, this);\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"Login\";\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n\r\n        console.debug(\"Login update\");\r\n        console.debug(\"logged in : \", this.props.loginStatus);\r\n        console.debug(\"logged user : \", this.getLoggedUser());\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    updateCredentialProperty = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name: string | null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({ [name]: target.value });\r\n    }\r\n    render() {\r\n        return (\r\n            <div id=\"LoginForm\" className=\"login-wrapper\" style={{ margin: 0, padding: 0 }}>\r\n                <div className=\"text-center\" style={{ marginTop: '25px' }}>\r\n                <AppIcon />\r\n                </div>\r\n                <form name='login' onSubmit={(e) => { this.login(e) }}\r\n                    method='POST' className=\"form-signin text-center\">\r\n                    <UsernameField value={this.state.username} onChange={this.updateCredentialProperty} />\r\n                    <p />\r\n                    <PasswordField value={this.state.editPassword} onChange={this.updateCredentialProperty} />\r\n                    <p />\r\n                    {this.state.loading ? <Spinner /> :\r\n                        <Fragment>\r\n                            <button className=\"btn text-light\" style={{marginRight:'5px', backgroundColor: 'rgb(9,26,78)' }} type=\"submit\">\r\n                                Sign in\r\n                            </button>\r\n                            <AnchorWithIcon className=\"btn btn-light border border-dark \" to=\"register\" children=\"Register\" /> \r\n                        </Fragment>}\r\n                    <input name=\"transport_type\" type=\"hidden\" value=\"rest\" />\r\n                    <p />\r\n                </form>\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst PasswordField = ({ value, onChange }) => {\r\n    return <Fragment>\r\n        <label className=\"sr-only\">Password</label>\r\n        <input style={{ borderColor: 'rgb(9,26,78)' }} name=\"editPassword\" value={value} onChange={onChange} type=\"password\" id=\"inputPassword\" className=\"form-control\"\r\n            placeholder=\"Password\" required />\r\n    </Fragment>\r\n}\r\nconst UsernameField = ({ value, onChange }) => {\r\n    return (<Fragment>\r\n        <label className=\"sr-only\">Username</label>\r\n        <input style={{ borderColor: 'rgb(9,26,78)' }} name=\"username\" value={value} onChange={onChange} type=\"text\" id=\"username\" className=\"form-control\"\r\n            placeholder=\"Username\" required autoFocus />\r\n    </Fragment>)\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogin: (username: string, password: string, app: any) => dispatch(performLogin(username, password, app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Login))","import React, { ChangeEvent } from 'react'\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport PublicConferenceService from '../../../../../services/PublicConferenceService';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\n\r\nclass ChatFormState {\r\n    showChat: boolean = false; chatBody: string = \"\";  unreadCount: number = 0; loading: boolean = false;\r\n}\r\nclass ChatForm extends BaseComponent {\r\n    state: ChatFormState = new ChatFormState();\r\n    publicConferenceService: PublicConferenceService;\r\n    constructor(props) {\r\n        super(props, true);\r\n        this.publicConferenceService = this.getServices().publicConferenceService;\r\n    }\r\n    startLoading = () => { this.setState({ loading: true }) }\r\n    endLoading = () => { this.setState({ loading: false }) }\r\n    sendMessage = () => {\r\n        this.commonAjax(\r\n            this.publicConferenceService.sendChatMessage,\r\n            (e) => { this.setState({ chatBody: \"\" }); },\r\n            this.showCommonErrorAlert,\r\n            this.state.chatBody, this.props.roomCode\r\n        )\r\n    }\r\n    updateChatBody = (e: ChangeEvent) => {\r\n        this.setState({ chatBody: (e.target as HTMLInputElement).value });\r\n    }\r\n    render() {\r\n        return (\r\n            <form style={{ padding: 5 }} onSubmit={e => { e.preventDefault(); this.sendMessage() }}>\r\n\r\n                <div className=\"input-group\">\r\n                    <input required value={this.state.chatBody} className=\"form-control\" name=\"chatBody\" onChange={this.updateChatBody} />\r\n                    <div className=\"input-group-append\">\r\n                        <SubmitButton loading={this.state.loading} />\r\n                    </div>\r\n                </div>\r\n\r\n            </form>\r\n        )\r\n    }\r\n}\r\nconst SubmitButton = (props: { loading: boolean }) => {\r\n\r\n    if (props.loading) {\r\n        return <button className=\"btn btn-light btn-sm\" type=\"button\" disabled>\r\n            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n            <span className=\"sr-only\">Loading...</span>\r\n        </button>\r\n\r\n    }\r\n    return (\r\n        <button type=\"submit\" className=\"btn btn-light btn-sm\" >\r\n            <i className=\"fas fa-paper-plane\" />\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default connect(\r\n    mapCommonUserStateToProps\r\n)(ChatForm)","import React, { Component, Fragment } from 'react'\r\nimport ConferenceRoomModel from '../../../../../models/ConferenceRoomModel';\r\nimport './ChatPanel.css'\r\nimport ChatMessageModel from '../../../../../models/ChatMessageModel';\r\nimport AnchorWithIcon from '../../../../navigation/AnchorWithIcon';\r\nimport ChatForm from './ChatForm';\r\ninterface Props {\r\n    room: ConferenceRoomModel;\r\n}\r\nclass State {\r\n    showChat: boolean = false;\r\n    unreadCount: number = 0;\r\n}\r\nexport default class ChatMessagePanel extends Component<Props, State> {\r\n\r\n    state: State = new State();\r\n    chatCount: number = 0;\r\n    readCount: number = 0;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.chatCount = this.roomChatCount();\r\n\r\n        this.state.unreadCount = this.chatCount;\r\n    }\r\n    roomChatCount = () => this.props.room.chats.length;\r\n    componentDidUpdate() {\r\n        if (this.chatCount < this.roomChatCount() && this.state.unreadCount < this.roomChatCount() && this.state.showChat == false) {\r\n            // console.debug(\"this.chatCount: \", this.chatCount);\r\n            // console.debug(\" this.roomChatCount(): \",  this.roomChatCount());\r\n            // console.debug(\"this.state.unreadCount: \", this.state.unreadCount);\r\n            this.setState({\r\n                unreadCount: this.roomChatCount() - this.readCount\r\n            })\r\n            this.chatCount = this.roomChatCount();\r\n        }\r\n    }\r\n    getMessages = (): ChatMessageModel[] => this.props.room.chats;\r\n    toggleChat = () => {\r\n        if ((!this.state.showChat) == true) {\r\n            this.setState({ showChat: !this.state.showChat, unreadCount: 0 }, () => {\r\n                this.readCount = this.roomChatCount()\r\n            });\r\n        } else {\r\n            this.setState({ showChat: !this.state.showChat })\r\n        }\r\n    }\r\n    render() {\r\n        const showChat = this.state.showChat;\r\n        return (\r\n            <div className=\"chat-panel-position\">\r\n                <div className=\"chat-panel bg-success border border-success rounded\">\r\n                    {showChat ?\r\n                        <><ChatList chats={this.getMessages()} />\r\n                            <ChatForm roomCode={this.props.room.code} />\r\n                        </> : null\r\n                    }\r\n                    <div onClick={this.toggleChat} className=\"text-center\">\r\n                        <AnchorWithIcon className=\"btn btn-success\" iconClassName={showChat ? \"fas fa-angle-down\" : \"fas fa-angle-up\"} onClick={this.toggleChat} >\r\n                            Chat{this.state.unreadCount > 0 ? \" (\" + this.state.unreadCount + \")\" : null}\r\n                        </AnchorWithIcon>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nclass ChatList extends Component<{ chats: ChatMessageModel[] }, any>{\r\n\r\n    lastChatRef: React.RefObject<HTMLDivElement> = React.createRef();\r\n    componentDidMount() {\r\n        this.scrollToLastChat();\r\n    }\r\n    componentDidUpdate() {\r\n        this.scrollToLastChat();\r\n    }\r\n    scrollToLastChat = () => {\r\n        if (this.lastChatRef.current) {\r\n            this.lastChatRef.current.scrollIntoView();\r\n        }\r\n    }\r\n    render() {\r\n        const props = this.props;\r\n        return (\r\n            <div className=\"chat-list-wrapper bg-white border  border-success\">\r\n                <div style={{ padding: 2 }}>\r\n                    {props.chats.map((chat, i) => {\r\n                        return <Fragment key={\"chat-\" + i}>\r\n                            <div ref={i == props.chats.length - 1 ? this.lastChatRef : null} className=\"chat-item border rounded bg-light\" >\r\n                                <div style={{ width: '100%', fontSize: '0.5em' }} className=\"text-right  \"><strong>{chat.user?.displayName}</strong></div>\r\n                                <span>{chat.date?.toLocaleDateString()}</span>\r\n                                <p  >{chat.body}</p>\r\n                            </div>\r\n                            <p /></Fragment>\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","\r\nimport MemberVideoStream from '../../component/pages/conference/room/MemberVideoStream';\r\n/**\r\n * app.streaming.ice.iceStunServer=stun:206.253.167.195:3470\r\n#app.streaming.ice.iceStunServer=stun:stun2.1.google.com:19302\r\napp.streaming.ice.iceTurnServer=turn:206.253.167.195:3478\r\n#app.streaming.ice.iceTurnServer=206.253.167.195:2222\r\napp.streaming.ice.iceTurnServer.username=username1\r\napp.streaming.ice.iceTurnServer.password=password1\r\n */\r\n/**\r\n * stun1.l.google.com:19302\r\nstun2.l.google.com:19302\r\nstun3.l.google.com:19302\r\nstun4.l.google.com:19302\r\n */\r\nconst config: RTCConfiguration = {\r\n        \"iceServers\": [\r\n            { \"urls\": \"stun:stun.l.google.com:19302\" },\r\n            { \"urls\": \"stun:stun2.l.google.com:19302\" },\r\n            { \"urls\": \"stun:stun3.l.google.com:19302\" },\r\n            { \"urls\": \"stun:stun4.l.google.com:19302\" }\r\n            ,{\r\n                  \"urls\":\"turn:206.253.167.195:3478\",\r\n                  \"username\": \"username1\",\r\n                  \"credential\":\"password1\"\r\n                }\r\n        ]\r\n    };\r\nexport default class PeerConnection extends RTCPeerConnection {\r\n    performCreateAnswer(origin: string) {\r\n\r\n        this.createAnswer().then((answer: RTCSessionDescriptionInit) => {\r\n            \r\n            this.component.addLog(\"CREATE ANSWER TO :\" + origin);\r\n            this.setLocalDescription(answer).then((e) => {\r\n                this.component.sendHandshake('answer', answer, origin);\r\n            }).catch((e) => this.component.errorSessionDescription(e, \"ANSWER\"));\r\n\r\n        }).catch((e) => console.error(\"ERROR CREATE ANSWER: \", e));\r\n\r\n    }\r\n\r\n    memberCode: string;\r\n    created: Date = new Date();\r\n    updated?: Date;\r\n    private component: MemberVideoStream;\r\n    constructor( memberCode: string, comp: MemberVideoStream) {\r\n        super(config);\r\n        this.memberCode = memberCode;\r\n        this.component = comp;\r\n        this.initialize();\r\n    }\r\n    initialize = () => {\r\n        this.ontrack = (ev: RTCTrackEvent): any => {\r\n            console.debug(\"=========== ON TRACk =========\");\r\n            console.debug(\"ev.track: \", ev.track);\r\n            console.debug(\"stream: \", ev.streams);\r\n            this.component.addLog(\"ON TRACK\");\r\n            const vid = this.component.videoRef.current;\r\n            if (this.component.profileImageRef.current) {\r\n                this.component.profileImageRef.current.style.display = 'none';\r\n            }\r\n            if (vid) {\r\n                vid.srcObject = ev.streams[0];\r\n                vid.style.display = \"block\";\r\n                vid.addEventListener('canplay', function (ev) {\r\n                    this.play();\r\n                }, false);\r\n            } else {\r\n                console.debug(\"ON TRACK VIDEO NOT FOUND\");\r\n            }\r\n\r\n            // log(\"PeerConnection End Add Stream => \"+ requestId+\" vid: \"+(vid!=null));\r\n\r\n        };\r\n        this.onicecandidate = (event: RTCPeerConnectionIceEvent) => {\r\n            this.component.addLog(\"onicecandidate event\");\r\n            console.debug(\"peerConnection on ICE Candidate: \", event.candidate);\r\n            if (event.candidate) {\r\n                this.component.sendHandshake('candidate', event.candidate);\r\n            } else {\r\n                console.warn(\"Candiate is NULL: \", event);\r\n            }\r\n        };\r\n\r\n        this.onsignalingstatechange = (e: Event) => {\r\n            const state = this.signalingState;\r\n            console.debug(\"PEER CONNECTION Signaling state: \", state);\r\n            this.component.addLog(\"Peer SignalingState | \" + state);\r\n            if (state == 'stable') {\r\n                console.debug(\"STABLE RTCPeerConnection: \", this);\r\n            }\r\n        }\r\n\r\n        this.ondatachannel =   (e) => {\r\n            console.debug(\"ondatachannel: \", this.memberCode, e);\r\n            // initDataChannel(ev);\r\n        }\r\n        this.onicecandidateerror =  (e) => {\r\n            console.error(\"Error On Candidate: \", this.memberCode, e);\r\n        }\r\n        this.onconnectionstatechange = function (event) {\r\n            console.debug(\"Connection State: \", this.connectionState);\r\n            switch (this.connectionState) {\r\n                case \"connected\":\r\n                    // The connection has become fully connected\r\n                    break;\r\n                case \"disconnected\":\r\n                case \"failed\":\r\n                    // One or more transports has terminated unexpectedly or in an error\r\n                    break;\r\n                case \"closed\":\r\n                    // The connection has been closed\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    senderInfo = (): string => {\r\n        let info: string = \" Sender : \";\r\n        for (let i = 0; i < this.getSenders().length; i++) {\r\n            const sender = this.getSenders()[i];\r\n            try {\r\n                info += \" - KIND: \" + sender.track?.kind;\r\n            } catch (error) {\r\n\r\n            }\r\n        }\r\n        return info;\r\n    }\r\n\r\n    performCreateOffer(trackAdded: boolean) {\r\n\r\n        this.createOffer().then((offer: RTCSessionDescriptionInit) => {\r\n            this.component.addLog(\"CREATE OFFER TO :\" + this.memberCode + \"this.trackAdded: \" + trackAdded + this.senderInfo())//+ this.trackAdded + \" > \" + this.tracks.length);\r\n            this.setLocalDescription(offer).then((value) => {\r\n                this.component.sendHandshake('offer', offer);\r\n            }).catch((e) => this.component.errorSessionDescription(e, \"CREATE OFFER\"));\r\n            //  .updatePeerConnection(requestId,peerConnection );\r\n        }).catch((e) => {\r\n            console.error(\"ERROR CREATE OFFER: \", e);\r\n        });\r\n    }\r\n\r\n}","import React, { Component } from 'react'\r\nimport { uniqueId } from '../../../../../utils/StringUtil';\r\nimport AnchorWithIcon from '../../../../navigation/AnchorWithIcon';\r\nclass State {\r\n    logs: string[] = [];\r\n}\r\ninterface Props {\r\n    show:boolean\r\n }\r\nexport default class HandshakeLog extends Component<Props, State>{\r\n    state: State = new State();\r\n    id: string = uniqueId();\r\n    enabled:boolean = false;\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    clearLog = () => {\r\n        this.setState({ logs: [] })\r\n    }\r\n    setLogEnabled = (val:boolean) => {\r\n        this.enabled = val;\r\n        if (!val) {\r\n            this.clearLog();\r\n        }\r\n    }\r\n    addLog = (log: string) => {\r\n        const logs = this.state.logs;\r\n        if (this.enabled) {\r\n            logs.push(log);\r\n            this.setState({ logs: logs });\r\n        }\r\n    }\r\n    getMappedLog = () => {\r\n        const logs: string[] = this.state.logs;\r\n        const mappedLogs: Map<string, number> = new Map();\r\n        const result: string[] = new Array();\r\n        let index = 0;\r\n        for (let i = 0; i < logs.length; i++) {\r\n            let log = logs[i];\r\n            const existLogCount = mappedLogs.get(index + \"-\" + log);\r\n            if (existLogCount) {\r\n                mappedLogs.set(index + \"-\" + log, existLogCount + 1);\r\n            } else {\r\n                index++;\r\n                mappedLogs.set(index + \"-\" + log, 1);\r\n            }\r\n        }\r\n\r\n        mappedLogs.forEach((count, log) => {\r\n            if (count == 1) {\r\n                result.push(log);\r\n            } else {\r\n                result.push(log + \" (\" + count + \")\");\r\n            }\r\n        })\r\n\r\n        return result;\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return <></>\r\n        const mappedLog: string[] = this.getMappedLog();\r\n        return (\r\n            <ul className=\"text-left\" style={{ listStyleType: 'none', fontSize: '0.7em' }}>\r\n                <li><AnchorWithIcon className=\"btn btn-light btn-sm\" iconClassName=\"fas fa-trash\" onClick={this.clearLog} >Clear Log</AnchorWithIcon>\r\n                </li>\r\n                {mappedLog.map((log, i) => {\r\n                    return <li key={\"log-\" + i + \"-\" + this.id}>\r\n                        <code className=\"text-dark\" >{log}</code>\r\n                    </li>\r\n                })}\r\n            </ul>\r\n        )\r\n    }\r\n\r\n}","import React, { Component, Fragment } from 'react';\r\nimport UserModel from './../../../../models/UserModel';\r\nimport ConferenceRoomModel from './../../../../models/ConferenceRoomModel';\r\nimport { uniqueId } from './../../../../utils/StringUtil'; \r\nimport PeerConnection from '../../../../models/conference/PeerConnection';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport HandshakeLog from './helper/HandshakeLog';\r\nimport ToggleButton from '../../../navigation/ToggleButton';\r\nimport { baseImageUrl } from './../../../../constant/Url';\r\nimport { getServices } from '../../../../middlewares/Common';\r\ninterface Props {\r\n    user: UserModel, member: UserModel,\r\n    room: ConferenceRoomModel, redial(code: string): any\r\n}\r\nclass State {\r\n    videoVisible: boolean = false;\r\n    showLog: boolean = false;\r\n    enableLog: boolean = false;\r\n}\r\nexport default class MemberVideoStream extends Component<Props, State> {\r\n\r\n    trackAdded: boolean = false;\r\n    peerConnection?: PeerConnection;\r\n    logRef: React.RefObject<HandshakeLog> = React.createRef();\r\n    videoRef: React.RefObject<HTMLVideoElement> = React.createRef();\r\n    profileImageRef: React.RefObject<HTMLImageElement> = React.createRef();\r\n    tracks: MediaStreamTrack[] = new Array();\r\n    stream?: MediaStream;\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = new State();\r\n    }\r\n    trackExist = (id: string) => {\r\n        for (let i = 0; i < this.tracks.length; i++) {\r\n            const track = this.tracks[i];\r\n            if (track.id == id) { return true; }\r\n        }\r\n        return false;\r\n    }\r\n    setLogEnabled = (val: boolean) => {\r\n\r\n        this.setState({ enableLog: val }, () => {\r\n            if (this.logRef.current) {\r\n                this.logRef.current.setLogEnabled(val);\r\n            }\r\n        });\r\n    }\r\n\r\n    private addStream = (stream: MediaStream) => {\r\n        try {\r\n            const peerConnection = this.getConnection();\r\n            if (this.trackExist(stream.getTracks()[0].id) == false) {\r\n                this.tracks.push(stream.getTracks()[0]);\r\n                // console.debug(\"TRACK STREAM: \", stream.get)\r\n                peerConnection.addTrack(stream.getTracks()[0], stream); //audio\r\n                this.addLog(\"Add Track: \" + stream.getTracks()[0].kind);\r\n            }\r\n\r\n            if (this.trackExist(stream.getTracks()[1].id) == false) {\r\n                this.tracks.push(stream.getTracks()[1]);\r\n                peerConnection.addTrack(stream.getTracks()[1], stream); //video\r\n                this.addLog(\"Add Track: \" + stream.getTracks()[1].kind);\r\n            }\r\n            this.trackAdded = true;\r\n            this.stream = stream;\r\n        } catch (e) {\r\n            console.error(\"ERROR ADD TRACK: \", e);\r\n        }\r\n    }\r\n    addLog = (log: string) => {\r\n        if (this.logRef.current) {\r\n            this.logRef.current.addLog(log);\r\n        }\r\n    }\r\n    getConnection = (newInstance: boolean = false): PeerConnection => {\r\n        this.addLog(\"getPeerConnection newInstance: \" + newInstance);\r\n        if (this.peerConnection && newInstance != true) {\r\n            return this.peerConnection;\r\n        }\r\n        console.debug(\"generate new RTCPeer Connection\");\r\n        this.tracks = [];\r\n        this.peerConnection = new PeerConnection(this.getMember().code, this);\r\n        return this.peerConnection;\r\n    }\r\n\r\n    sendHandshake = (event: string, data: any, destination?: string) => {\r\n        send(this.props.user.code, destination ?? (this.getMember().code ?? \"UNDEFINED\"),\r\n            this.getRoom().code, {\r\n            event: event,\r\n            data: data\r\n        });\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if (this.videoRef.current) {\r\n            this.videoRef.current.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    createOffer = (stream: MediaStream) => {\r\n        const peerConnection = this.getConnection(true);\r\n        this.addStream(stream);\r\n        peerConnection.performCreateOffer(this.trackAdded);\r\n    }\r\n\r\n    errorSessionDescription = (error, type: string) => {\r\n        console.error(\"ERROR SET SESSION DESCRIPTION while \", type, \": \", error);\r\n    }\r\n    requestDial = () => {\r\n        this.addLog(\"REQUEST CALLING FROM :\" + this.getMember().code);\r\n        this.sendHandshake('dial', {});\r\n    }\r\n\r\n    handleOffer = (origin: string, offer, mediaStream?: MediaStream) => {\r\n        this.addLog(\"GET OFFER FROM :\" + origin + \", this.trackAdded: \" + this.trackAdded + \" > \" + this.tracks.length);\r\n        const peerConnection = this.getConnection(true);\r\n        if (mediaStream) {\r\n            this.addStream(mediaStream);\r\n        } else {\r\n            this.addLog(\"GET OFFER mediaStream missing\");\r\n        }\r\n        // this.reAddStream();\r\n        peerConnection.setRemoteDescription(offer).then((val) => {\r\n            this.createAnswer(origin);\r\n        }).catch((e) => this.errorSessionDescription(e, \"HANDLE OFFER\"));\r\n    }\r\n\r\n    createAnswer = (origin: string) => {\r\n        const peerConnection = this.getConnection();\r\n        peerConnection.performCreateAnswer(origin);\r\n    }\r\n\r\n    handleCandidate = (origin: string, candidate) => {\r\n        this.addLog(\"GET CANDIDATE FROM :\" + origin);\r\n        this.getConnection().addIceCandidate(new RTCIceCandidate(candidate))\r\n            .catch((e) => this.errorSessionDescription(e, \"HANDLE CANDIDATE\"));\r\n    }\r\n\r\n    handleAnswer = (origin: string, answer) => {\r\n        this.addLog(\"GET ANSWER FROM :\" + origin);\r\n        this.getConnection().setRemoteDescription((answer))\r\n            .catch((e) => this.errorSessionDescription(e, \"SET ANSWER\"));\r\n\r\n    }\r\n\r\n    toggleLog = (show: boolean) => { this.setState({ showLog: show }) }\r\n    isCurrentUser = (): boolean => this.props.user.code == this.props.member.code;\r\n    redial = () => this.props.redial(this.getMember().code);\r\n    getMember = (): UserModel => this.props.member\r\n    getRoom = (): ConferenceRoomModel => this.props.room;\r\n\r\n    render() {\r\n        if (!this.props.user) {\r\n            console.debug(\"LOGGED USER: \", this.props.user);\r\n            return <h3>NOT AUTHENTICATED</h3>\r\n        }\r\n        const room = this.getRoom();\r\n        const member = this.getMember();\r\n        return <div className=\"col-md-3 col-lg-2 text-center border border-dark rounded\">\r\n            <span style={{ fontSize: '0.6em', wordWrap: 'unset' }}>{member.displayName} {(room.isAdmin(member) ? <i className=\"fas fa-check-circle\" /> : \"\")}</span>\r\n            <hr />\r\n            <div>\r\n                {this.isCurrentUser() ?\r\n                    <h2>You</h2> :\r\n                    <Fragment>\r\n                        <video style={{ margin: 'auto' }} height={80} width={80} controls ref={this.videoRef} />\r\n                        <img ref={this.profileImageRef} className=\"border border-dark rounded-circle\" src={baseImageUrl() + member.profileImage} width={70} height={70} />\r\n                        <br />\r\n                        <AnchorWithIcon className=\"btn btn-light btn-sm\" iconClassName=\"fas fa-phone\" onClick={this.redial} >Dial</AnchorWithIcon>\r\n                    </Fragment>\r\n                }\r\n            </div>\r\n            {/* <p>{this.peerConnection?.senderInfo()}</p> */}\r\n            {/* <div>\r\n                    <p>local desc: {JSON.stringify(this.getPeerConnection().localDescription)}</p>\r\n                    <p>remote desc: {JSON.stringify(this.getPeerConnection().remoteDescription)}</p>\r\n                </div> */}\r\n            {this.state.enableLog ?\r\n                <>\r\n                    <label className=\"text-center\">Log Options</label>\r\n                    <ToggleButton yesLabel=\"Show\" active={this.state.showLog} onClick={this.toggleLog} noLabel=\"Hide\" />\r\n                    <HandshakeLog show={this.state.showLog} ref={this.logRef} />\r\n                </> : null}\r\n        </div>\r\n\r\n    }\r\n}\r\n\r\nconst send = (origin: string, destination: string, roomCode: string, msg) => {\r\n    const eventId = uniqueId();\r\n    console.debug(\"SEND WEBSOCKET, event: \", msg.event);\r\n    console.debug(\">> SEND WEBSOCKET from \", origin, \" to \" + destination + \" | \" + eventId + \" :\" + msg.event);\r\n    //console.info(\"Send Audio Data\");\r\n    getServices().websocketService. sendToWebsocket(\"/app/publicconference/webrtc\", {\r\n        realtimeHandshake: {\r\n            //\t\t\toriginId : requestId,\r\n            origin: origin,\r\n            roomCode: roomCode,\r\n            eventId: eventId,\r\n            destination: destination,\r\n            webRtcObject: (msg)\r\n        }\r\n    });\r\n}","import React, { Fragment, RefObject } from 'react'\r\nimport ConferenceRoomModel from '../../../../../models/ConferenceRoomModel';\r\nimport Card from '../../../../container/Card';\r\nimport FormGroup from '../../../../form/FormGroup';\r\nimport AnchorWithIcon from '../../../../navigation/AnchorWithIcon';\r\nimport ToggleButton from '../../../../navigation/ToggleButton';\r\nimport MemberVideoStream from '../MemberVideoStream';\r\nimport UserModel from '../../../../../models/UserModel';\r\nimport SimpleError from '../../../../alert/SimpleError';\r\nimport SimpleWarning from '../../../../alert/SimpleWarning';\r\nexport const MemberList = (props: {\r\n    room: ConferenceRoomModel, user: UserModel,\r\n    memberRefs: Map<string, React.RefObject<MemberVideoStream>>, dialPeerByCode(code: string): any\r\n}) => {\r\n    const user = props.user;\r\n    const members: UserModel[] = props.room.members;\r\n    return (\r\n        <Card title={\"Members (\" + (members.length) + \")\"}>\r\n            <div className=\"container-fluid\" style={{ overflow: 'scroll' }}>\r\n                <div className=\"row\">\r\n                    {members.map((member: UserModel, i) => {\r\n                        member = UserModel.clone(member);\r\n                        if (!props.memberRefs.get(member.getCode())) {\r\n                            props.memberRefs.set(member.getCode(), React.createRef());\r\n                        }\r\n                        return (\r\n                            <MemberVideoStream redial={props.dialPeerByCode} ref={props.memberRefs.get(member.getCode())}\r\n                                user={user} member={member}\r\n                                room={props.room} key={\"vid-stream-\" + member.code} />\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        </Card>\r\n    )\r\n}\r\nexport const InfoMediaStreamMessage = (props: { message?: string }) => {\r\n    if (!props.message) return null;\r\n    return (\r\n        <div className=\"alert alert-primary\">{props.message}</div>\r\n    )\r\n}\r\nexport const ErrorMediaStreamMessage = (props: { message?: string, retry(): any }) => {\r\n    if (!props.message) return null;\r\n    return (\r\n\r\n        <Fragment>\r\n            <SimpleError>Error: {props.message}</SimpleError>\r\n            <AnchorWithIcon iconClassName=\"fas fa-redo\" onClick={props.retry}>Retry Media</AnchorWithIcon>\r\n        </Fragment>\r\n\r\n    )\r\n}\r\nexport const RoomInfo = (props: { logEnabled: boolean, setLogEnabled(val: boolean): any, videoRef: React.RefObject<HTMLVideoElement>, redialAll(): any, memberRefs: Map<string, RefObject<MemberVideoStream>>, user: UserModel, room: ConferenceRoomModel, leaveRoom(): any }) => {\r\n    const room: ConferenceRoomModel = (props.room).clone();\r\n    const config = room.config;\r\n    return (\r\n        <Card >\r\n            <div className=\"row\">\r\n                <div className=\"col-md-4\">\r\n                    {room.started?\r\n                    <video muted ref={props.videoRef} height={200} width={200} controls />\r\n                    : <SimpleWarning>Please Start MEDIA</SimpleWarning>\r\n}\r\n                </div>\r\n                <div className=\"col-md-8\">\r\n                    <FormGroup label=\"Code\">{room.code}</FormGroup>\r\n                    <FormGroup label=\"Created\" >{room.createdDate ? new Date(room.createdDate).toLocaleString() : \"-\"}</FormGroup>\r\n                    <FormGroup label=\"Size\">{config.videoWidth} x {config.videoHeight}</FormGroup>\r\n                    <FormGroup label=\"Enable Log\">\r\n                        <ToggleButton active={props.logEnabled} onClick={props.setLogEnabled} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <AnchorWithIcon className=\"btn btn-outline-danger\" iconClassName=\"fas fa-sign-out-alt\" onClick={props.leaveRoom}>\r\n                            {props.room.isAdmin(props.user) ? \"Invalidate\" : \"Leave\"}</AnchorWithIcon>\r\n                            &nbsp;\r\n                        <AnchorWithIcon className=\"btn btn-outline-success\" iconClassName=\"fas fa-phone\" onClick={props.redialAll}>\r\n                            Redial</AnchorWithIcon>\r\n                    </FormGroup>\r\n                </div>\r\n            </div>\r\n        </Card>\r\n    )\r\n}","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Switch, Route } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport DashboardMain from '../pages/dashboard/main/DashboardMain';\r\nimport MasterDataMain from '../pages/masterdata/MasterDataMain';\r\nimport HomeMain from '../pages/home/HomeMain';\r\nimport BaseMainMenus from './BaseMainMenus';\r\nimport Menu from '../../models/settings/Menu';\r\nimport SettingsMain from '../pages/settings/SettingsMain';\r\nimport UserProfile from '../pages/settings/UserProfile';\r\nimport EditApplicationProfile from '../pages/settings/EditApplicationProfile';\r\nimport AboutUs from './../pages/home/AboutUs';\r\nimport Register from '../pages/login/Register';\r\nimport ConferenceMain from '../pages/conference/main/ConferenceMain';\r\nimport ConferenceRoom from '../pages/conference/room/ConferenceRoom';\r\nimport Login from '../pages/login/Login';\r\nimport ConferenceRoomSteaming from '../pages/conference/room/ConferenceRoomSteaming';\r\ninterface Props {\r\n    setSidebarMenus(menus: Menu[]): any\r\n}\r\nclass ApplicationContent extends Component<Props, any> {\r\n\r\n    ref: React.RefObject<BaseMainMenus> = React.createRef();\r\n    constructor(props: Props) {\r\n        super(props);\r\n    }\r\n    setSidebarMenus = (menus: Menu[]) => {\r\n        this.props.setSidebarMenus(menus);\r\n    }\r\n    render() {\r\n        return (\r\n            <Fragment>\r\n                <LoginRoute />\r\n                <Switch> \r\n                    {/* -------- home -------- */}\r\n                    <Route exact path=\"/home\" render={\r\n                        (props: any) =>\r\n                            <HomeMain />\r\n                    } />\r\n                    <Route exact path=\"/\" render={\r\n                        (props: any) =>\r\n                            <HomeMain />\r\n                    } />\r\n                    <Route exact path=\"/about\" render={\r\n                        (props: any) =>\r\n                            <AboutUs />\r\n                    } />\r\n\r\n\r\n                    {/* -------- masterdata -------- */}\r\n                    <Route exact path=\"/management\" render={\r\n                        (props: any) =>\r\n                            <MasterDataMain setSidebarMenus={this.setSidebarMenus} />\r\n                    } />\r\n                    <Route exact path=\"/management/:code\" render={\r\n                        (props: any) =>\r\n                            <MasterDataMain setSidebarMenus={this.setSidebarMenus} />\r\n                    } />\r\n\r\n\r\n                    {/* ///////// PUBLIC ///////// */}\r\n\r\n                </Switch>\r\n                <Settings />\r\n                <MemberQuiz /> \r\n                <Dashboard />\r\n                <Conference />\r\n            </Fragment>\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        // document.title = \"Login\";\r\n    }\r\n\r\n}\r\nconst Conference = (props) => {\r\n    return (\r\n        <Switch>\r\n            <Route exact path=\"/conference/main\" render={\r\n                (props: any) =>\r\n                    <ConferenceMain />\r\n            } />\r\n            <Route exact path=\"/conference\" render={\r\n                (props: any) =>\r\n                    <ConferenceMain />\r\n            } />\r\n            <Route exact path=\"/conference/room\" render={\r\n                (props: any) =>\r\n                    <ConferenceRoom />\r\n            } />\r\n            <Route exact path=\"/conference/room/:code\" render={\r\n                (props: any) =>\r\n                    <ConferenceRoom />\r\n            } />\r\n            <Route exact path=\"/conference/enterroom\" render={\r\n                (props: any) =>\r\n                    <ConferenceRoomSteaming />\r\n            } />\r\n        </Switch>\r\n    )\r\n}\r\nconst LoginRoute = (props) => {\r\n\r\n    return (\r\n        <Switch>\r\n            <Route exact path=\"/login\" render={\r\n                (props: any) =>\r\n                    <Login />\r\n            } />\r\n            <Route exact path=\"/register\" render={\r\n                (props: any) =>\r\n                    <Register />\r\n            } />\r\n        </Switch>\r\n    )\r\n}\r\nconst Dashboard = (props) => {\r\n    return (\r\n        <Switch>\r\n            {/* -------- dashboard -------- */}\r\n            <Route exact path=\"/dashboard\" render={\r\n                (props: any) =>\r\n                    <DashboardMain />\r\n            } />\r\n            <Route exact path=\"/dashboard/quizhistory\" render={\r\n                (props: any) =>\r\n                    <Fragment />    // <QuizHistoryPage />\r\n            } />\r\n        </Switch>\r\n    )\r\n}\r\n\r\nconst Settings = (props) => {\r\n    return (\r\n        <Switch>\r\n            {/* -------- settings --------- */}\r\n            <Route exact path=\"/settings\" render={\r\n                (props: any) =>\r\n                    <SettingsMain />\r\n            } />\r\n            <Route exact path=\"/settings/user-profile\" render={\r\n                (props: any) =>\r\n                    <UserProfile />\r\n            } />\r\n            <Route exact path=\"/settings/app-profile\" render={\r\n                (props: any) =>\r\n                    <EditApplicationProfile />\r\n            } />\r\n        </Switch>\r\n    )\r\n}\r\n\r\nconst MemberQuiz = (props) => {\r\n    return (\r\n        <Switch>\r\n\r\n        </Switch>\r\n    )\r\n}\r\n \r\nconst mapDispatchToProps = (dispatch: Function) => ({}) \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(ApplicationContent))","import React, { Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Menu from '../../models/settings/Menu';\r\nimport './SideBar.css'\r\n\r\nclass SideBar extends BaseComponent {\r\n    constructor(props: { brand: any, sidebarMenus?: Menu[] }) {\r\n        super(props, false);\r\n    }\r\n    isSidebarActive = (menu: Menu) => {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return false; }\r\n        const pathName = this.props.location.pathname;\r\n        return parentMenu.url + \"/\" + menu.url == pathName;\r\n    }\r\n    componentDidMount() {\r\n        window.addEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    handleScroll(event) {\r\n        let scrollTop = event.srcElement.body.scrollTop,\r\n            itemTranslate = Math.min(0, scrollTop / 3 - 60);\r\n        // console.debug(\"scrollTop: \", scrollTop);\r\n\r\n    }\r\n    render() {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return null }\r\n        const menus: Menu[] = this.props.sidebarMenus == null ? [] : this.props.sidebarMenus;\r\n        const user = this.getLoggedUser();\r\n        return (\r\n            <ul id=\"sidebar\" className=\"sidebar-nav bg-light\">\r\n                <Brand show={parentMenu != null} brand={parentMenu} />\r\n\r\n                {menus.map(menu => {\r\n                    if (menu.userAuthorized && !menu.userAuthorized(user)) return null;\r\n                    const isActive: boolean = this.isSidebarActive(menu);\r\n                    const menuClassName = isActive ? 'menu-active' : 'regular-menu';\r\n                    return (\r\n                        <li className={\"sidebar-item \" + menuClassName} key={\"SIDEBAR_\" + menu.code}><Link to={parentMenu.url + \"/\" + menu.url}>\r\n                            <span className=\"sidebar-icon\"><i className={Menu.getIconClassName(menu)}></i></span>\r\n                            <span className={'menu-label'} >{menu.name}</span>\r\n                        </Link></li>\r\n                    )\r\n                })\r\n                }\r\n            </ul >\r\n        )\r\n    }\r\n\r\n}\r\nconst Brand = (props) => {\r\n    if (props.show == false) return null;\r\n    return (\r\n        <Fragment>\r\n            <li id=\"sidebar-brand\" className=\"sidebar-brand\" style={{ marginBottom: '20px' }}>\r\n                <div style={{\r\n                    textAlign: 'center', paddingTop: '10px',\r\n                    paddingBottom: '10px'\r\n                }}>\r\n                    <h3 className=\"text-dark\">\r\n                        <i className={Menu.getIconClassName(props.brand)}></i>\r\n                    </h3>\r\n                    <Link to={props.brand.url} style={{ textDecoration: 'none' }}><h4 className=\"text-dark\">{props.brand.name}</h4></Link>\r\n                </div>\r\n            </li>\r\n            <li className={\"sidebar-item-brand \"} >\r\n                <Link to={props.brand.url}>\r\n                    <span className=\"sidebar-icon\"><i className={Menu.getIconClassName(props.brand)}></i></span>\r\n                </Link>\r\n            </li>\r\n        </Fragment>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(SideBar))","import React, { Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Header from '../navigation/Header';\r\nimport ApplicationContent from './ApplicationContent';\r\nimport SideBar from '../navigation/SideBar';\r\nimport './Layout.css';\r\nimport Menu from '../../models/settings/Menu';\r\nimport { getMenuByMenuPath, extractMenuPath } from './../../constant/Menus';\r\ninterface IState {\r\n    showSidebar: boolean;\r\n    activeMenuCode: any;\r\n    menu?: Menu;\r\n    sidebarMenus?: Menu[]\r\n};\r\nclass MainLayout extends BaseComponent {\r\n    state: IState = {\r\n        showSidebar: false,\r\n        activeMenuCode: null,\r\n        menu: undefined,\r\n        sidebarMenus: []\r\n    };\r\n    currentPathName: string = \"\";\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.state = {\r\n            ...this.state,\r\n        }\r\n    }\r\n    setMenuNull = () => {\r\n        console.warn(\"SET MENU NULL\");\r\n        this.setState({ menu: undefined, showSidebar: false, activeMenuCode: null, sidebarMenus: null });\r\n    }\r\n    setMenu = (menu: Menu) => {\r\n        if (menu == null) {\r\n            return;\r\n        }\r\n        console.debug(\"SET MENU: \", menu.code);\r\n        this.setState({ menu: menu, sidebarMenus: null, showSidebar: menu.showSidebar, activeMenuCode: menu.code });\r\n    }\r\n    setSidebarMenus = (menus: Menu[]) => {\r\n        // console.debug(\"Set sidebar menus: \", menus);\r\n        this.setState({ sidebarMenus: menus });\r\n    }\r\n    componentDidMount() {\r\n        this.setCurrentMenu();\r\n    }\r\n    componentDidUpdate() {\r\n        this.setCurrentMenu();\r\n    }\r\n    setCurrentMenu = () => {\r\n        const pathName = extractMenuPath(this.props.location.pathname);\r\n\r\n        if (pathName == this.currentPathName) {\r\n            return;\r\n        }\r\n        this.currentPathName = pathName;\r\n        const menu = getMenuByMenuPath(pathName);\r\n        if (menu == null) {\r\n            this.setMenuNull();\r\n        } else {\r\n            this.setMenu(menu);\r\n        }\r\n    }\r\n    getSubMenus = () :Menu[]|null => {\r\n        const menuState:Menu|undefined = this.state.menu;\r\n        if (menuState && menuState.subMenus != null && menuState.subMenus?.length > 0) {\r\n            return menuState.subMenus;\r\n        }\r\n        if (this.state.sidebarMenus) {\r\n            return this.state.sidebarMenus;\r\n        }\r\n        return null;\r\n    }\r\n    render() {\r\n        const showSidebar: boolean = this.state.showSidebar == true;\r\n        const className = showSidebar ? \"app-content\" : \"content\";\r\n        return (\r\n            <Fragment>\r\n                <Header setMenuNull={this.setMenuNull} activeMenuCode={this.state.activeMenuCode} setMenu={this.setMenu} />\r\n                <div id=\"content-wrapper\" className={\"container-fluid  \" + className}>\r\n                    <ApplicationContent setSidebarMenus={this.setSidebarMenus} />\r\n                </div>\r\n                {showSidebar ?\r\n                    <SideBar sidebarMenus={this.getSubMenus()} parentMenu={this.state.menu} />\r\n                    : null}\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(MainLayout))","\nimport React, { Component, Fragment, RefObject } from 'react';\nimport './App.css';\nimport { withRouter } from 'react-router-dom'\nimport * as actions from './redux/actionCreators'\nimport { connect } from 'react-redux'\nimport SockJsClient from 'react-stomp';\nimport * as url from './constant/Url';\nimport { mapCommonUserStateToProps } from './constant/stores';\nimport Loader from './component/loader/Loader';\nimport Alert from './component/alert/Alert';\nimport MainLayout from './component/layout/MainLayout';\nimport WebResponse from './models/WebResponse';\nimport Spinner from './component/loader/Spinner'; \nimport UserService from './services/UserService';\nimport AnchorWithIcon from './component/navigation/AnchorWithIcon';\nimport { time } from 'console';\nimport { doItLater, updateFavicon } from './utils/EventUtil'; \nimport SimpleError from './component/alert/SimpleError';\nimport WebSocketService from './services/WebSocketService';\n\nclass IState {\n  loading: boolean = false;\n  loadingPercentage: number = 0;\n  requestId?: string;\n  mainAppUpdated: Date = new Date();\n  showAlert: boolean = false;\n  realtime: boolean = false;\n  loadingAppStatus: string = \"loading application\";\n  errorAuthenticatingApp: boolean = false;\n}\nclass App extends Component<any, IState> {\n  wsConnected: boolean = false;\n  loadings: number = 0;\n  alertTitle: String = \"Info\";\n  alertBody: any = null;\n  alertIsYesOnly: boolean = true;\n  alertIsError: boolean = false;\n  alertOnYesCallback: Function = function (e) { };\n  alertOnCancelCallback: Function = function (e) { };\n  wsUpdateHandler: Function | undefined = undefined;\n  clientRef: RefObject<SockJsClient> = React.createRef();\n  userService: UserService;\n  wsService: WebSocketService;\n  // alertRef: RefObject<Alert> = React.createRef();\n  alertCallback = {\n    title: \"Info\", message: \"Info\", yesOnly: false,\n    onOk: () => { }, onNo: () => { }\n  }\n\n  constructor(props: any) {\n    super(props);\n    this.state = new IState();\n    this.userService = this.props.services.userService;\n    this.wsService = this.props.services.websocketService;\n\n    this.props.setMainApp(this);\n  }\n  refresh = () => { this.setState({ mainAppUpdated: new Date() }); }\n\n  requestAppId = () => {\n    this.setState({ loadingAppStatus: \"loading application\", errorAuthenticatingApp: false });\n    this.userService.requestApplicationId((response) => {\n      doItLater(() => {\n        this.props.setRequestId(response, this);\n        this.refresh();\n        this.setState({ errorAuthenticatingApp: false });\n      },  500);\n\n    }, this.retryRequestAppId)\n\n  }\n  retryRequestAppId = () => {\n    this.setState({ loadingAppStatus: \"loading application (Retrying)\", errorAuthenticatingApp: false });\n    this.userService.requestApplicationIdNoAuth((response) => {\n      doItLater(() => {\n        this.props.setRequestId(response, this);\n        this.setState({ errorAuthenticatingApp: false });\n      }, 500);\n    },\n      () =>\n        this.setState({ errorAuthenticatingApp: true }))\n\n  }\n  incrementLoadings() {\n    this.loadings++;\n  }\n\n  decrementLoadings() {\n    this.loadings--;\n    if (this.loadings < 0) {\n      this.loadings = 0;\n    }\n  }\n\n  startLoading(realtime: boolean = false) {\n    this.incrementLoadings();\n    this.setState({ loading: true, realtime: realtime });\n  }\n\n  endLoading() {\n    this.decrementLoadings();\n    if (this.loadings == 0) {\n      if (this.state.realtime) {\n        this.setState({ loadingPercentage: 100 }, this.smoothEndLoading);\n      } else {\n        this.setState({ loading: false, loadingPercentage: 0 });\n      }\n    }\n  }\n\n  smoothEndLoading = () => {\n    doItLater(() => {\n      this.setState({ loading: false, loadingPercentage: 0 });\n    }, 100);\n  }\n\n  handleProgress = (msg: WebResponse) => {\n    const percentageFloat: number = msg.percentage ?? 0;\n    let percentage = Math.floor(percentageFloat);\n    if (percentageFloat < 0 || percentageFloat > 100) {\n      this.endLoading();\n    }\n    this.setState({ loadingPercentage: percentage });\n  }\n\n  showAlert(title: string, body: any, yesOnly: boolean, yesCallback: Function, noCallback?: Function) {\n    this.alertTitle = title;\n    this.alertBody = body;\n    this.alertIsYesOnly = yesOnly;\n    const app = this;\n    this.alertOnYesCallback = function (e) {\n      app.dismissAlert();\n      yesCallback(e);\n    }\n    if (!yesOnly) {\n      this.alertOnCancelCallback = function (e) {\n        app.dismissAlert();\n        if (noCallback != null) {\n          noCallback(e);\n        }\n      };\n    }\n    this.setState({ showAlert: true });\n  }\n\n  dismissAlert() {\n    this.alertIsError = false;\n    this.setState({ showAlert: false })\n  }\n  showAlertError(title: string, body: any, yesOnly: boolean, yesCallback: Function, noCallback?: Function) {\n    this.alertIsError = true;\n    this.showAlert(title, body, yesOnly, yesCallback, noCallback)\n  }\n\n  componentDidUpdate() {\n    // console.debug(\"APP UPDATED\");\n    if (this.props.applicationProfile) {\n      updateFavicon(this.props.applicationProfile);\n    }\n    if (this.props.requestId && !this.wsConnected) {\n      this.initWebsocket();\n    }\n  }\n\n  componentDidMount() {\n    this.requestAppId();\n    this.setState({ loadingPercentage: 0 });\n  }\n\n  initWebsocket = () => {\n    this.wsService.setWebSocketUrl(url.contextPath() + 'realtime-app');\n    this.wsService.registerWebSocketCallbacks({\n      id: \"PROGRESS\",\n      subscribeUrl: \"/wsResp/progress/\" + this.props.requestId,\n      callback: this.handleProgress  //must use lambda\n    },\n      {\n        id: \"GENERAL_UPDATE\",\n        subscribeUrl: \"/wsResp/\" + this.props.requestId + \"/update\",\n        callback: (response) => this.handleWsUpdate(response)\n      });\n      this.wsService.performWebsocketConnection();\n    this.wsConnected = true;\n  }\n\n  private handleWsUpdate = (response: any) => {\n\n    if (this.wsUpdateHandler) {\n      this.wsUpdateHandler(response);\n    }\n  }\n\n  setWsUpdateHandler = (handler: Function | undefined) => {\n    this.wsUpdateHandler = handler;\n  }\n  resetWsUpdateHandler = () => {\n    this.setWsUpdateHandler(undefined);\n  }\n\n  render() {\n    if (!this.props.requestId) {\n      return (\n        <LoadingScreen error={this.state.errorAuthenticatingApp} message={this.state.loadingAppStatus} retry={this.retryRequestAppId} />\n      )\n    }\n    return (\n      <Fragment>\n        <Loading realtime={this.state.realtime} loading={this.state.loading} loadingPercentage={this.state.loadingPercentage} />\n        {this.state.showAlert ?\n          <Alert title={this.alertTitle}\n            isError={this.alertIsError}\n            onClose={(e) => this.setState({ showAlert: false })}\n            yesOnly={this.alertIsYesOnly}\n            onYes={this.alertOnYesCallback} onNo={this.alertOnCancelCallback}\n          >{this.alertBody}</Alert> :\n          null}\n        <MainLayout />\n        {/* <SockJsClient url={usedHost + 'realtime-app'} topics={['/wsResp/progress/' + this.props.requestId]}\n\n          onMessage={(msg: WebResponse) => { this.handleMessage(msg) }}\n          ref={this.clientRef} /> */}\n      </Fragment>\n    )\n  }\n}\n\nfunction Loading(props) {\n  if (props.loading == true) {\n    return (\n      <Loader realtime={props.realtime} progress={props.loadingPercentage} text=\"Please wait...\" type=\"loading\" />\n    );\n  }\n  return null;\n}\nconst LoadingScreen = (props: { error: boolean, retry(): any, message: string }) => {\n\n  return (\n    <div className=\"text-center\" >\n      <p/>\n      {props.error ?\n        <SimpleError>Loading Error</SimpleError> : <Spinner />}\n      <h4>{props.message}</h4>\n      {props.error ?\n        <AnchorWithIcon iconClassName=\"fas fa-redo\" onClick={props.retry} children=\"Retry\" /> :\n        null}\n    </div>\n  )\n}\n\nconst mapDispatchToProps = (dispatch: Function) => ({\n  setMainApp: (app: App) => dispatch(actions.setMainApp(app)),\n  setRequestId: (response: WebResponse, app: App) => dispatch(actions.setRequestId(response, app)),\n})\n\nexport default withRouter(connect(\n  mapCommonUserStateToProps,\n  mapDispatchToProps\n)(App))\n","import React from 'react'\r\nimport App from './App'\r\nimport configureStore from './redux/configureStore'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n \r\nconst Root = (props:any)  => {\r\n\r\n    const store = configureStore();\r\n\r\n    return (\r\n        <Provider store={store}>\r\n            <HashRouter>\r\n                <App/>\r\n            </HashRouter>\r\n        </Provider>  \r\n\r\n    );\r\n}\r\n\r\n\r\nexport default Root;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Root from './Root.tsx';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Root />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}