(this.webpackJsonplivestreaming=this.webpackJsonplivestreaming||[]).push([[0],{43:function(e,t,a){},47:function(e,t,a){e.exports=a(87)},52:function(e,t,a){},53:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(23),l=a.n(i),s=(a(52),a(2)),c=a(7),u=a(3),d=a(4),m=a(1),p=(a(53),a(9)),f=a(8),h=a(18),g={mainApp:void 0},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MAIN_APP":return Object(f.a)(Object(f.a)({},e),{},{mainApp:t.payload});default:return e}};!function(e){e[e.ROLE_ADMIN=0]="ROLE_ADMIN",e[e.ROLE_USER=1]="ROLE_USER"}(n||(n={}));var b=function e(){Object(m.a)(this,e),this.id=void 0,this.createdDate=void 0,this.modifiedDate=void 0,this.deleted=void 0,this.nulledFields=void 0},E=1,y=function(){var e=new String((new Date).getUTCMilliseconds()).toString();return++E+"-"+e};function C(e){if(""==e||null==e)return"0";var t=new String(e).includes("."),a=new String(e).startsWith("-");a&&(e=new String(e).replace("-",""));var n=t?parseInt(new String(e).split(".")[0]):parseInt(e),r=Math.abs(n).toString(),o="";if(r.length>3){for(var i=0,l=r.length-1;l>0;l--)i++,o=r[l]+o,3==i&&(o="."+o,i=0);o=r[0]+o}else o=e;return n<0?n:(t&&(o+=","+new String(e).split(".")[1]),a&&(o="-"+o),o)}var S=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).code=y(),e.name=void 0,e.description=void 0,e.url=void 0,e.pathVariables=void 0,e.iconUrl=void 0,e.color=void 0,e.fontColor=void 0,e.role=[],e.active=!1,e.menuClass="fas fa-folder",e.authenticated=!1,e.showSidebar=!1,e.subMenus=void 0,e.userAuthorized=function(t){if(0==e.role.length)return!0;if(!t)return!1;for(var a=0;a<e.role.length;a++){var r=e.role[a];if(t.role.toString()==n[r].toString())return!0}return console.debug("NOT AUTHORIZED",e.role,t.role),!1},e}return a}(b);S.defaultMenuIconClassName="fas fa-folder",S.getIconClassName=function(e){return void 0==e.menuClass?S.defaultMenuIconClassName:e.menuClass};var O=function(){for(var e=[],t=0;t<N.length;t++){var a=N[t],n=Object.assign(new S,a),r=[];if(a.subMenus){for(var o=0;o<a.subMenus.length;o++){var i=a.subMenus[o];r.push(Object.assign(new S,i))}n.subMenus=r}e.push(n)}return e},N=[{code:"home",name:"Home",url:"/home",menuClass:"fa fa-home",active:!1,authenticated:!1,showSidebar:!1,role:[]},{code:"dashboard",name:"Dashboard",url:"/dashboard",menuClass:"fas fa-tachometer-alt",active:!1,authenticated:!0,showSidebar:!0,role:[n.ROLE_ADMIN,n.ROLE_USER],subMenus:[]},{code:"CONFERENCE",name:"Conference",url:"/conference",menuClass:"fas fa-video",active:!1,authenticated:!0,showSidebar:!0,role:[n.ROLE_ADMIN,n.ROLE_USER],subMenus:[{code:"conf_main",name:"My Conference",url:"main",menuClass:"fas fa-list-alt",role:[n.ROLE_ADMIN,n.ROLE_USER]},{code:"conf_content",name:"Room",url:"room",menuClass:"fas fa-user-friends",role:[n.ROLE_ADMIN,n.ROLE_USER]}]},{code:"management",name:"Master Data",url:"/management",menuClass:"fa fa-database",active:!1,authenticated:!0,showSidebar:!0,role:[n.ROLE_ADMIN]},{code:"settings",name:"Setting",url:"/settings",menuClass:"fas fa-cogs",active:!1,authenticated:!0,showSidebar:!0,role:[n.ROLE_ADMIN,n.ROLE_USER],subMenus:[{code:"user_profile",name:"Profile",menuClass:"fas fa-user-cog",url:"user-profile",role:[n.ROLE_ADMIN,n.ROLE_USER]},{code:"app_profile",name:"Application Setting",menuClass:"fas fa-cog",url:"app-profile",role:[n.ROLE_ADMIN]}]}],k={loginKey:null,loginStatus:!1,loginFailed:!1,menus:O(),loggedUser:null,loginAttempt:!1,requestId:null,applicationProfile:{},assetsPath:""},w=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,n=arguments.length>1?arguments[1]:void 0,r={};switch(n.type){case"SET_REQUEST_ID":return console.debug("USER REDUCER:REQUEST_ID",n.payload.requestId),r=Object(f.a)(Object(f.a)({},a),{},{requestId:n.payload.requestId,masterHealthCenter:null!==(e=n.payload.masterHealthCenter)&&void 0!==e?e:{},applicationProfile:null!==(t=n.payload.applicationProfile)&&void 0!==t?t:{},assetsPath:n.payload.applicationProfile.assetsPath}),1==n.payload.loginStatus?(r.loggedUser=n.payload.user,r.loginStatus=!0):(r.loginStatus=!1,r.loggedUser=null),console.debug("result"),console.debug("action.payload.requestId: ",n.payload.requestId),console.debug("REQUEST_ID result.loginStatus:",r.loginStatus),n.payload.referer.refresh(),r;case"do_login":return r=Object(f.a)(Object(f.a)({},a),{},{loginAttempt:!0,loginStatus:n.payload.loginStatus,loginKey:n.payload.loginKey,loginFailed:0==n.payload.loginStatus,loggedUser:n.payload.loggedUser});case"do_logout":return r=Object(f.a)(Object(f.a)({},a),{},{loginStatus:!1,loggedUser:null}),re(null),r;case"refresh_login":return r=Object(f.a)(Object(f.a)({},a),{},{loginStatus:n.payload.loginStatus,loggedUser:n.payload.loggedUser,requestId:n.payload.requestId});case"get_logged_user":return r=Object(f.a)(Object(f.a)({},a),{},{loggedUser:n.payload.data});case"set_logged_user":return r=Object(f.a)(Object(f.a)({},a),{},{loggedUser:n.payload.user});case"SET_APPLICATION_PROFILE":return r=Object(f.a)(Object(f.a)({},a),{},{applicationProfile:n.payload.applicationProfile});default:return Object(f.a)({},a)}},R=function e(){Object(m.a)(this,e),this.name="",this.data=new Blob,this.dataUrl=""},j=a(32),D=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){j.post(e,a,{headers:$()}).then((function(e){ne(e);var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))},I=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){j.post(e,a,{headers:Z()}).then((function(e){var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))},A=function(){function e(){Object(m.a)(this,e),this.updateProfile=function(e){var t={user:e},a=ce().concat("api/member/account/updateprofile");return D(a,t)},this.saveUser=function(e){var t={user:e},a=ce().concat("api/public/register");return I(a,t)},this.requestApplicationId=function(e,t){var a=ce()+"api/public/requestid";D(a,{}).then((function(t){if("00"==t.code){var a=t.rawAxiosResponse;ne(a),console.debug("response header:",a.headers["access-token"]),e(t)}else alert("Error requesting app ID")})).catch((function(e){console.error("ERROR requestApplicationId: ",e),t()}))},this.requestApplicationIdNoAuth=function(e,t){var a=ce()+"api/public/requestid";I(a,{}).then((function(t){"00"==t.code?e(t):alert("Error requesting app ID")})).catch((function(e){console.error("ERROR requestApplicationIdNoAuth: ",e),t()}))}}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();A.instance=void 0;var P=a(14),L=function(){function e(){Object(m.a)(this,e),this.managementProperties=[],this.entityPropertyMap=new Map,this.updateApplicationProfile=function(e){var t={profile:e},a=ce().concat("api/app/setting/updateprofile");return D(a,t)}}return Object(s.a)(e,[{key:"setEntityProperty",value:function(e,t){t&&this.entityPropertyMap.set(e,t)}},{key:"getEntityProperty",value:function(e){if(void 0!=e)return this.entityPropertyMap.get(e)}},{key:"loadManagementProperties",value:function(e){var t=ce().concat("api/app/entity/managementpages");return D(t,{})}},{key:"generateReport",value:function(e){return function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){j.post(e,a,{responseType:"blob",headers:$()}).then((function(e){ne(e);var a=e.data;a.rawAxiosResponse=e,console.debug("axiosResponse.headers: ",e.headers);var n=e.headers["content-disposition"].split("filename=")[1],r=n.split("."),o=r[r.length-1],i=new Blob([a],{type:o}),l=window.URL.createObjectURL(i),s=new R;s.name=n,s.data=i,s.dataUrl=l,t(s)})).catch((function(e){console.error(e),n(e)}))}))}(ce().concat("api/app/report/records"),e)}},{key:"loadEntityProperty",value:function(e){console.debug("Load entity prop: ",e);var t={entity:e},a=ce().concat("api/app/entity/configv2");return D(a,t)}},{key:"loadEntities",value:function(e){var t=ce().concat("api/app/entity/get");return D(t,e)}},{key:"loadAllEntities",value:function(e){var t={entity:e,filter:{limit:0,page:0}},a=ce().concat("api/app/entity/get");return D(a,t)}},{key:"getById",value:function(e,t){var a={entity:e,filter:{exacts:!0,limit:1,page:0,fieldsFilter:{id:t}}},n=ce().concat("api/app/entity/get");return D(n,a)}},{key:"getBy",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n={entity:e,filter:{exacts:!0,limit:a,page:0,fieldsFilter:t}},r=ce().concat("api/app/entity/get");return D(r,n)}},{key:"delete",value:function(e,t){var a={entity:e,filter:{fieldsFilter:{id:t}}},n=ce().concat("api/app/entity/delete");return D(n,a)}},{key:"save",value:function(e,t,a){var n,r=Object(P.a)({entity:e},e,t);return n=a?ce().concat("api/app/entity/update"):ce().concat("api/app/entity/add"),D(n,r)}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();L.instance=void 0;var T=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).destinationType=void 0,e.destination=void 0,e.body=void 0,e.date=void 0,e.user=void 0,e.roomCode=void 0,e}return a}(b),M=function(){function e(){Object(m.a)(this,e),this.getRoom=function(){var e=ce().concat("api/member/conference/getuserroom");return D(e,{})},this.generateRoom=function(){var e=ce().concat("api/member/conference/generateroom");return D(e,{})},this.getRoomByCode=function(e){var t=ce().concat("api/member/conference/getroom/"+e);return D(t,{})},this.enterRoom=function(e){var t=ce().concat("api/member/conference/enterroom/"+e);return D(t,{})},this.leaveRoom=function(e){var t=ce().concat("api/member/conference/leaveroom/"+e);return D(t,{})},this.removeRoomMember=function(e){var t=ce().concat("api/member/conference/removeroommember/"+e);return D(t,{})},this.setActiveStatus=function(e){var t=ce().concat("api/member/conference/updateactivestatus/"+(1==e?"true":"false"));return D(t,{})},this.sendChatMessage=function(e,t){var a=ce().concat("api/member/conference/sendchat/"),n=new T;return n.body=e,n.roomCode=t,D(a,{chatMessage:n})},this.cleanMediaStreamResources=function(e){e&&(console.debug("this.videoStream.getTracks(): ",e.getTracks()),e.getTracks().forEach((function(e){e.stop(),console.debug("Clean track : ",e.kind)})))}}return Object(s.a)(e,[{key:"nofityUserEnter",value:function(e){console.debug("nofityUserEnter: ",e);var t=ce().concat("api/member/conference/notifyuserenterroom/"+e);return D(t,{})}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();M.instance=void 0;var F=function(e,t){var a=setTimeout((function(){e(),clearTimeout(a)}),t)},_=function(){function e(){var t=this;Object(m.a)(this,e),this.stompClient=void 0,this.wsConnected=!1,this.websocketUrl=void 0,this.onConnectCallbacks=new Array,this.subscriptionCallbacks=new Array,this.isWsConnected=function(){return 1==t.wsConnected},this.setWebSocketUrl=function(e){t.websocketUrl=e},this.sendToWebsocket=function(e,a){if(!t.wsConnected||!t.stompClient)return console.info("Connecting"),!1;console.debug("SEND WEBSOCKET");try{return t.stompClient.send(e,{},JSON.stringify(a)),!0}catch(n){return console.error("ERROR SEND WEBSOCKET TO",e,n),!1}},this.removeOnConnecCallbacks=function(){for(var e=0;e<arguments.length;e++)t.removeOnConnecCallback(e<0||arguments.length<=e?void 0:arguments[e])},this.removeOnConnecCallback=function(e){for(var a=0;a<t.onConnectCallbacks.length;a++){if(t.onConnectCallbacks[a].id==e){t.onConnectCallbacks.splice(a,1);break}}},this.onConnectCallbackExist=function(e){for(var a=0;a<t.onConnectCallbacks.length;a++){if(t.onConnectCallbacks[a].id==e.id)return!0}return!1},this.addOnWsConnectCallbacks=function(){for(var e=0;e<arguments.length;e++){var a=e<0||arguments.length<=e?void 0:arguments[e];a.id?t.onConnectCallbackExist(a)||(console.debug("REgister on connect callback: ",a.id),t.onConnectCallbacks.push(a)):console.warn("WS Onconncec callback must have ID!")}},this.performWebsocketConnection=function(){var e=window,a=new e.SockJS(t.websocketUrl);try{t.stompClient&&t.stompClient.disconnect()}catch(n){}t.stompClient=e.Stomp.over(a),t.stompClient.connect({},(function(e){t.wsConnected=!0,console.debug("subscriptionCallbacks :",t.subscriptionCallbacks.length);for(var a=function(e){var a=t.subscriptionCallbacks[e];if(a)try{t.stompClient.subscribe(a.subscribeUrl,(function(e){var t=JSON.parse(e.body);try{a.callback(t)}catch(n){console.error("ERROR SUBSCRIBE CALLBACK: ",a.id,n)}}))}catch(n){console.error("ERROR SUBSCRIBE: ",n)}},n=0;n<t.subscriptionCallbacks.length;n++)a(n);for(var r=0;r<t.onConnectCallbacks.length;r++){var o=t.onConnectCallbacks[r];if(o&&o.callback)try{o.callback(e)}catch(i){console.error("ERROR ONCONNECT CALLBACK: ",o.id,i)}}}),(function(e){console.warn("Error connection websocket, reconnect"),F(t.performWebsocketConnection,2e3)}))},this.removeWebsocketCallback=function(e){console.debug("Remove WS Callback: ",e);for(var a=0;a<t.subscriptionCallbacks.length;a++){if(t.subscriptionCallbacks[a].id==e){t.subscriptionCallbacks.splice(a,1);break}}},this.registerWebSocketCallbacks=function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];if(null!=a)for(var r=0;r<a.length;r++){var o=a[r];t.subscriptionCallbackExist(o)||(console.debug(" register callback id: ",o.id),t.subscriptionCallbacks.push(o))}},this.subscriptionCallbackExist=function(e){for(var a=0;a<t.subscriptionCallbacks.length;a++){if(t.subscriptionCallbacks[a].id==e.id)return!0}return!1}}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();_.instance=void 0;var U={services:new function e(){Object(m.a)(this,e),this.userService=A.getInstance(),this.masterDataService=L.getInstance(),this.publicConferenceService=M.getInstance(),this.websocketService=_.getInstance()}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return e},B=Object(h.c)({appState:v,userState:w,servicesState:x}),W={appState:g,userState:k,servicesState:U},H=a(32),Y=function(e){return function(t){return function(a){if(!a.meta||"do_login"!==a.meta.type)return t(a);var n=a.meta.app;H.post(a.meta.url,{},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){var n=t.data,r="",o=!1;null!=n.code&&"00"==n.code&&(r=t.headers["access-token"],console.log("api_token: ",r),o=!0);var i=Object.assign({},a,{payload:{loginStatus:o,loginKey:r,loggedUser:n.user}});ne(t),delete i.meta,e.dispatch(i)})).catch(console.log).finally((function(){n.endLoading()}))}}},q=function(e){return function(t){return function(a){if(!a.meta||"get_logged_user"!==a.meta.type)return t(a);var n=$();H.post(a.meta.url,a.payload,{headers:n}).then((function(t){var n=t.data;if(n){var r=Object.assign({},a,{payload:{data:n}});delete r.meta,e.dispatch(r)}else alert("Error performing request")})).catch(console.log).finally((function(e){a.meta.app.endLoading(),a.meta.app.refresh()}))}}},V=function(e){return function(t){return function(a){if(!a.meta||"do_logout"!==a.meta.type)return t(a);var n=a.meta.app;H.post(a.meta.url,a.payload,{headers:$()}).then((function(t){var n=!1;"00"==t.data.code?n=!0:alert("Logout Failed");var r=Object.assign({},a,{payload:{loginStatus:!n}});delete r.meta,e.dispatch(r)})).catch(console.log).finally((function(e){return n.endLoading()}))}}},G=function(e){return function(t){return function(a){if(!a.meta||"set_logged_user"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},z=function(e){return function(t){return function(a){if(!a.meta||"GET_MESSAGE"!==a.meta.type)return t(a);fetch(a.meta.url,{method:"post",body:JSON.stringify(a.payload),headers:$()}).then((function(e){return e.json()})).then((function(t){console.debug("sendChatMessageMiddleware Response:",t);var n=Object.assign({},a,{payload:t});delete n.meta,e.dispatch(n)})).catch((function(e){return console.log(e)})).finally((function(e){return a.meta.app.endLoading()}))}}},K=function(e){return function(t){return function(a){if(!a.meta||"store_message"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},X=null,Q=function(){return X},J=function(){return X=Object(h.d)(B,W,Object(h.a)(Y,V,q,G,K,z))},$=function(){return{"Content-Type":"application/json",requestId:te(),Authorization:"Bearer "+ae()}},Z=function(){return{"Content-Type":"application/json",requestId:te()}},ee="arabic-club-login-key",te=function(){var e=Q();return null==e?"":e.getState().userState.requestId},ae=function(){return ie(ee)},ne=function(e){if(e&&e.headers&&e.headers["access-token"]){var t=e.headers["access-token"];oe(ee,t)}},re=function(e){oe(ee,e)},oe=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},ie=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},le="${contextPath}"==document.getElementById("rootPath").value||""==document.getElementById("rootPath").value,se=le?"/universal-good-shop/":document.getElementById("rootPath").value+"/",ce=function(){var e=le?"http://localhost:8080".concat(se):se;return e},ue=function(){return function(){var e=Q();return null==e?"":e.getState().userState.assetsPath}()+"images/"},de=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).username=void 0,e.displayName=void 0,e.editPassword=void 0,e.profileImage=void 0,e.role=n.ROLE_USER,e.mainRole=void 0,e.code=y(),e.requestId=void 0,e.getCode=function(){return e.code.trim()},e}return Object(s.a)(a,null,[{key:"clone",value:function(e){return Object.assign(new a,e)}}]),a}(b),me=ce(),pe=me+"api/member/account/",fe=function(e){return e.startLoading(),{type:"do_logout",payload:{},meta:{app:e,type:"do_logout",url:pe.concat("logout")}}},he=a(5),ge=function(e){return{applicationProfile:e.userState.applicationProfile,loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,requestId:e.userState.requestId,services:e.servicesState.services,mainApp:e.appState.mainApp}};a(76);function ve(e){return e.realtime?o.a.createElement("div",{className:"row container-fluid bg-light",style:{margin:0,position:"fixed",zIndex:100}},o.a.createElement("div",{className:"col-1"},o.a.createElement("span",{style:{marginBottom:"3px"},className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})),o.a.createElement("div",{className:"col-11 progress",style:{padding:0,marginTop:"7px",height:"10px"}},o.a.createElement("div",{className:"bg-primary",style:{width:e.progress+"%",transitionDuration:"50ms",margin:0}}))):o.a.createElement("button",{className:"btn btn-dark ",type:"button",disabled:!0},o.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),o.a.createElement("span",{className:" "},"Loading..."))}var be=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={timer:130,intervalId:0},n.update=function(){n.state.timer<0&&clearInterval(n.state.intervalId),console.log("tick"),n.setState({timer:n.state.timer-1}),n.state.timer<0&&n.props.endMessage&&n.props.endMessage()},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(1==this.props.withTimer){var e=setInterval(this.update,1,null);this.setState({intervalId:e})}}},{key:"render",value:function(){var e="message message-"+this.props.type;return 1==this.props.realtime?o.a.createElement(ve,{progress:this.props.progress,realtime:this.props.realtime}):o.a.createElement("div",{className:e},o.a.createElement(ve,{progress:this.props.progress,realtime:this.props.realtime}))}}]),a}(r.Component);function Ee(e){return o.a.createElement("div",{className:"modal-backdrop",style:{backgroundColor:"rgba(100,100,100,0.7)"}})}function ye(e){return o.a.createElement("div",{className:"modal-footer "+e.className},o.a.createElement("button",{ref:e.yesButtonRef,type:"button",onClick:e.onYes,className:"btn btn-outline-primary"},"Yes"),e.yesOnly?null:o.a.createElement("button",{ref:e.noButtonRef,type:"button",onClick:e.onNo,className:"btn btn-outline-secondary"},"No"))}function Ce(e){return o.a.createElement("div",{className:"modal-header "+e.className},o.a.createElement("h5",{className:"modal-title "+e.fontClassName,id:"exampleModalCenterTitle"},e.title),o.a.createElement("button",{onClick:e.onClose,type:"button",className:"close"},o.a.createElement("span",{"aria-hidden":"true",className:e.fontClassName},o.a.createElement("i",{className:"fas fa-times"}))))}var Se=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).yesButtonRef=o.a.createRef(),n.noButtonRef=o.a.createRef(),n.onYes=function(e){n.props.onYes&&n.props.onYes(e)},n.onNo=function(e){n.props.onNo&&n.props.onNo(e)},n.onClose=function(e){n.props.onClose&&n.props.onClose(e)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=1==this.props.isError;!e&&this.yesButtonRef.current?this.yesButtonRef.current.focus():e&&this.noButtonRef.current?this.noButtonRef.current.focus():e&&this.yesButtonRef.current&&this.yesButtonRef.current.focus()}},{key:"render",value:function(){var e=this.props.title?this.props.title:"Info",t=1==this.props.yesOnly,a=1==this.props.isError?"bg-danger":"bg-info";return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ee,null),o.a.createElement("div",{className:"modal fade show",style:{display:"block"},id:"exampleModalCenter",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},o.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement(Ce,{fontClassName:"text-light",className:a,title:e,onClose:this.onClose}),o.a.createElement("div",{className:"modal-body"}," ",this.props.children),o.a.createElement(ye,{noButtonRef:this.noButtonRef,yesButtonRef:this.yesButtonRef,yesOnly:t,onYes:this.onYes,onNo:this.onNo})))))}}]),a}(r.Component),Oe=function(e){return document.getElementById(e)};var Ne=function(e){return new Promise((function(t,a){try{var n=new FileReader;n.readAsDataURL(e.files[0]),console.debug("fileInput.files[0]: ",e.files[0]),n.onload=function(){t(new String(n.result).toString())},n.onerror=function(e){a(e)}}catch(r){a(r)}}))};var ke,we=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name=void 0,e.appCode=void 0,e.shortDescription=void 0,e.about=void 0,e.welcomingMessage=void 0,e.address=void 0,e.contact=void 0,e.website=void 0,e.iconUrl=void 0,e.pageIcon=void 0,e.backgroundUrl=void 0,e.footerIconClass=void 0,e.color=void 0,e.fontColor=void 0,e.assetsPath=void 0,e.FooterIconClassValue=void 0,e}return a}(b),Re=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(m.a)(this,a),(r=t.call(this,e)).parentApp=void 0,r.authenticated=!0,r.state={updated:new Date},r.websocketService=void 0,r.validateLoginStatus=function(){return 0==r.authenticated||(!r.isLoggedUserNull()||(r.backToLogin(),!1))},r.sendWebSocket=function(e,t){r.websocketService.sendToWebsocket(e,t)},r.setWsUpdateHandler=function(e){r.parentApp&&r.parentApp.setWsUpdateHandler(e)},r.addWebsocketSubscriptionCallback=function(){var e;(e=r.websocketService).registerWebSocketCallbacks.apply(e,arguments)},r.connectWs=function(){r.websocketService.performWebsocketConnection()},r.addOnWsConnectCallbacks=function(){var e;(e=r.websocketService).addOnWsConnectCallbacks.apply(e,arguments)},r.removeWSSubscriptionCallback=function(){for(var e=0;e<arguments.length;e++)r.websocketService.removeWebsocketCallback(e<0||arguments.length<=e?void 0:arguments[e]);r.websocketService.performWebsocketConnection()},r.resetWsUpdateHandler=function(){r.parentApp&&r.parentApp.resetWsUpdateHandler()},r.handleInputChange=function(e){var t=e.target,a="checkbox"==t.type?t.checked:t.value;r.setState(Object(P.a)({},t.name,a)),console.debug("input changed: ",t.name,a)},r.isAdmin=function(){var e=r.getLoggedUser();return!!e&&e.role==n.ROLE_ADMIN},r.showConfirmation=function(e){var t=Object(c.a)(r);return new Promise((function(a,n){t.parentApp.showAlert("Confirmation",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))},r.showConfirmationDanger=function(e){var t=Object(c.a)(r);return new Promise((function(a,n){t.parentApp.showAlertError("Confirmation",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))},r.showInfo=function(e){r.parentApp.showAlert("Info",e,!0,(function(){}))},r.showError=function(e){r.parentApp.showAlertError("Error",e,!0,(function(){}))},r.showCommonErrorAlert=function(e){var t;console.error(e),t=e.response&&e.response.data?e.response.data.message:e,r.showError("Operation Failed: "+t)},r.getServices=function(){return Q().getState().servicesState.services},r.websocketService=r.getServices().websocketService,r.authenticated=o,r.state=Object(f.a)({},r.state),r.parentApp=r.props.mainApp,r}return Object(s.a)(a,[{key:"getApplicationProfile",value:function(){return null==this.props.applicationProfile?new we:this.props.applicationProfile}},{key:"focusToActiveField",value:function(){if(null!=this.state.activeId&&null!=Oe(this.state.activeId)){var e=Oe(this.state.activeId);null!=e&&e.focus()}}},{key:"startLoading",value:function(e){this.parentApp.startLoading(e)}},{key:"endLoading",value:function(){this.parentApp.endLoading()}},{key:"doAjax",value:function(e,t,a,n){var r=this;this.startLoading(t);for(var o=arguments.length,i=new Array(o>4?o-4:0),l=4;l<o;l++)i[l-4]=arguments[l];e.apply(void 0,i).then((function(e){a&&a(e)})).catch((function(e){n?n(e):("string"==typeof e&&alert("Operation Failed: "+e),alert("resource not found"))})).finally((function(){r.endLoading()}))}},{key:"commonAjax",value:function(e,t,a){for(var n=arguments.length,r=new Array(n>3?n-3:0),o=3;o<n;o++)r[o-3]=arguments[o];this.doAjax.apply(this,[e,!1,t,a].concat(r))}},{key:"commonAjaxWithProgress",value:function(e,t,a){for(var n=arguments.length,r=new Array(n>3?n-3:0),o=3;o<n;o++)r[o-3]=arguments[o];this.doAjax.apply(this,[e,!0,t,a].concat(r))}},{key:"getLoggedUser",value:function(){var e=this.props.loggedUser;if(e)return e.editPassword="^_^",Object.assign(new de,e)}},{key:"isLoggedUserNull",value:function(){return 0==this.props.loginStatus||null==this.props.loggedUser}},{key:"isUserLoggedIn",value:function(){return 1==this.props.loginStatus&&null!=this.props.loggedUser}},{key:"backToLogin",value:function(){null!=this.props.history&&this.props.history.push("/login")}},{key:"refresh",value:function(){this.setState({updated:new Date})}},{key:"componentDidMount",value:function(){this.validateLoginStatus()}},{key:"componentDidUpdate",value:function(){1==this.authenticated&&this.isLoggedUserNull()&&(console.debug(typeof this,"BACK TO LOGIN"),this.validateLoginStatus())}}]),a}(r.Component),je=a(6),De=(a(77),function e(){Object(m.a)(this,e),this.showNavLinks=!1}),Ie=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state=new De,n.buttonToggleNavRef=o.a.createRef(),n.toggleNavLinks=function(){n.setState({showNavLinks:!n.state.showNavLinks})},n.onLogout=function(e){var t=Object(c.a)(n);t.showConfirmation("Logout?").then((function(e){e&&t.props.performLogout(t.parentApp)}))},n.setMenu=function(e){n.state.showNavLinks&&n.buttonToggleNavRef.current&&n.buttonToggleNavRef.current.click(),n.props.setMenu(e)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state.showNavLinks,a=O(),n=this.getLoggedUser();return o.a.createElement("div",{className:"bg-dark container-fluid",style:{position:"fixed",zIndex:55,padding:0,margin:0}},o.a.createElement(Ae,{label:this.getApplicationProfile().name}),o.a.createElement("nav",{id:"navbar",className:"navbar navbar-expand-lg navbar-dark bg-dark",style:{width:"100%"}},o.a.createElement("a",{id:"navbar-brand",className:"navbar-brand",href:"#"},this.getApplicationProfile().name),o.a.createElement("button",{ref:this.buttonToggleNavRef,onClick:this.toggleNavLinks,className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarToggler","aria-controls":"navbarToggler","aria-expanded":"false","aria-label":"Toggle navigation"},o.a.createElement("i",{className:t?"fas fa-times":"fas fa-bars"})),o.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarToggler"},o.a.createElement("ul",{id:"navbar-top",className:"navbar-nav mr-auto mt-2 mt-lg-0"},a.map((function(t){if(null==t||t.authenticated&&!n)return null;if(t.userAuthorized&&0==t.userAuthorized(n))return null;var a=e.props.activeMenuCode==t.code;return o.a.createElement("li",{key:"header-menu-"+new String(t.code),className:"nav-item "+(a?"active nav-active":"nav-inactive")},o.a.createElement(je.b,{onClick:function(){return e.setMenu(t)},className:"nav-link  ",to:t.url},o.a.createElement("span",null,t.name)))}))),o.a.createElement("form",{className:"form-inline my-2 my-lg-0"},o.a.createElement(Pe,{setMenuNull:this.props.setMenuNull,onLogout:this.onLogout,user:n})))))}}]),a}(Re),Ae=function(e){return o.a.createElement("div",{id:"navbar-brand-top",style:{paddingLeft:"0.5rem"},className:"container-fluid"},o.a.createElement("a",{style:{fontSize:"15px"},className:"text-white navbar-brand",href:"#"},o.a.createElement("strong",null,e.label)))},Pe=function(e){return e.user?o.a.createElement(r.Fragment,null,o.a.createElement(je.b,{onClick:e.setMenuNull,style:{marginRight:"5px"},className:"btn btn-light btn-sm my-2 my-sm-0",to:"/settings/user-profile"},o.a.createElement("img",{width:"20",src:ue()+e.user.profileImage,className:"rounded rounded-circle"}),"\xa0",e.user.displayName),o.a.createElement("a",{style:{marginRight:"5px"},className:"btn btn-danger btn-sm  my-2 my-sm-0",onClick:e.onLogout},o.a.createElement("i",{className:"fas fa-sign-out-alt"}),"\xa0Logout")):o.a.createElement(je.b,{style:{marginRight:"5px"},onClick:e.setMenuNull,className:"btn btn-sm btn-info my-2 my-sm-0",to:"/login"}," ",o.a.createElement("i",{className:"fas fa-sign-in-alt"}),"\xa0Login")},Le=Object(p.f)(Object(he.b)(ge,(function(e){return{performLogout:function(t){return e(fe(t))}}}))(Ie)),Te=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(m.a)(this,a),(r=t.call(this,e,o)).title="",r.title=n,r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.authenticated&&this.validateLoginStatus(),document.title=this.title}}]),a}(Re),Me=(a(79),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",Object.assign({},this.props.attributes,{className:"card "+this.props.className}),this.props.title?o.a.createElement("div",{className:"card-header"},this.props.title):null,o.a.createElement("div",{className:"card-body"},this.props.children),void 0!=this.props.footerContent?o.a.createElement("div",{className:"card-footer"},this.props.footerContent):null)}}]),a}(r.Component)),Fe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,"Dashboard",!0)}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this.getLoggedUser();return t?o.a.createElement("div",{id:"DashboardMain",className:"section-body container-fluid"},o.a.createElement("h2",null,"Dashboard"),o.a.createElement("div",{className:"row"},o.a.createElement(Me,{className:"col-md-3 bg-light border border-dark container-fluid text-dark"},"Welcome,",o.a.createElement("p",null,o.a.createElement("strong",null,t.displayName,"  ")),o.a.createElement("p",{className:"badge badge-dark"},null===(e=t.role)||void 0===e?void 0:e.toString().toLowerCase().split("_")[1])),o.a.createElement(Me,{className:"col-md-3 bg-light border border-primary container-fluid text-center"},o.a.createElement(je.b,{to:"/conference",className:"text-primary "},o.a.createElement("h1",null,o.a.createElement("i",{className:"fas fa-video"})),o.a.createElement("h3",null,"My Room"))),o.a.createElement(Me,{className:"col-md-3 bg-light border border-success container-fluid text-center"},o.a.createElement(je.b,{to:"/conference/room",className:"text-success "},o.a.createElement("h1",null,o.a.createElement("i",{className:"fas fa-users"})),o.a.createElement("h3",null,"Join Room"))))):null}}]),a}(Te),_e=Object(p.f)(Object(he.b)(ge)(Fe)),Ue=a(17),xe=a(11),Be=a(25),We=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.className)&&void 0!==e?e:"btn btn-outline-secondary";return o.a.createElement("a",Object.assign({style:this.props.style},this.props.attributes,{onClick:this.props.onClick,className:t}),this.props.iconClassName?o.a.createElement("span",{style:this.props.children?{marginRight:"5px"}:{}},o.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children)}}]),a}(r.Component),He=function e(){Object(m.a)(this,e),this.show=!0},Ye=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=new He,n.hideModal=function(){n.setState({show:!1})},n.showModal=function(){n.setState({show:!0})},n}return Object(s.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.title)&&void 0!==e?e:"Title";if(1==this.props.toggleable&&0==this.state.show)return o.a.createElement(We,{style:{marginBottom:"10px"},onClick:this.showModal,iconClassName:"fas fa-angle-down"},"Show ",t);var a=function(e){e.style,e.show,e.footerContent,e.toggleable;return Object(Be.a)(e,["style","show","footerContent","toggleable"])}(this.props);return o.a.createElement("div",Object.assign({},a,{className:"modal-content ",style:Object(f.a)(Object(f.a)({},a.style),{},{marginBottom:"10px"})}),o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title"},t),this.props.toggleable?o.a.createElement("button",{type:"button",className:"btn btn-sm",onClick:this.hideModal,"aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},o.a.createElement("i",{className:"fas fa-times"}))):null),o.a.createElement("div",{className:"modal-body"},this.props.children),this.props.footerContent||1==this.props.showFooter?o.a.createElement("div",{className:"modal-footer"},this.props.footerContent):null)}}]),a}(r.Component),qe=function e(){Object(m.a)(this,e),this.limit=void 0,this.page=void 0,this.orderType=void 0,this.orderBy=void 0,this.contains=void 0,this.exacts=void 0,this.day=void 0,this.year=void 0,this.month=void 0,this.fieldsFilter=void 0,this.availabilityCheck=void 0,this.dayTo=void 0,this.monthTo=void 0,this.yearTo=void 0,this.maxValue=void 0,this.useExistingFilterPage=void 0};!function(e){e.FIELD_TYPE_TEXT="FIELD_TYPE_TEXT",e.FIELD_TYPE_IMAGE="FIELD_TYPE_IMAGE",e.FIELD_TYPE_CURRENCY="FIELD_TYPE_CURRENCY",e.FIELD_TYPE_NUMBER="FIELD_TYPE_NUMBER",e.FIELD_TYPE_HIDDEN="FIELD_TYPE_HIDDEN",e.FIELD_TYPE_COLOR="FIELD_TYPE_COLOR",e.FIELD_TYPE_CHECKBOX="FIELD_TYPE_CHECKBOX",e.FIELD_TYPE_FIXED_LIST="FIELD_TYPE_FIXED_LIST",e.FIELD_TYPE_DYNAMIC_LIST="FIELD_TYPE_DYNAMIC_LIST",e.FIELD_TYPE_TEXTAREA="FIELD_TYPE_TEXTAREA",e.FIELD_TYPE_PLAIN_LIST="FIELD_TYPE_PLAIN_LIST",e.FIELD_TYPE_DATE="FIELD_TYPE_DATE",e.FIELD_TYPE_TEXTEDITOR="FIELD_TYPE_TEXTEDITOR",e.FIELD_TYPE_DATETIME="FIELD_TYPE_DATETIME"}(ke||(ke={}));var Ve=function(){function e(){Object(m.a)(this,e),this.groupNames=void 0,this.entityName=void 0,this.alias=void 0,this.fieldNames=void 0,this.idField=void 0,this.detailFieldName=void 0,this.formInputColumn=void 0,this.editable=!0,this.creatable=!0,this.elements=new Array,this.fieldNameList=void 0,this.withProgressWhenUpdated=!1}return Object(s.a)(e,null,[{key:"getRecordId",value:function(e,t){for(var a=t.elements,n=0;n<a.length;n++){var r=a[n];if(r.identity)return e[r.id]}return null}}]),e}();Ve.getEntityElement=function(e,t){for(var a=0;a<e.elements.length;a++){var n=e.elements[a];if(n.id==t)return n}},Ve.getHeaderLabels=function(e){var t=new Array;if(void 0==e.elements)return t;for(var a=e.elements,n=0;n<a.length;n++){var r=a[n],o={label:r.labelName,value:r.id,isDate:"date"==r.type,filterable:r.filterable};t.push(o)}return t},Ve.hasTextEditorField=function(e){for(var t=0;t<e.length;t++)if(e[t].fieldType==ke.FIELD_TYPE_TEXTEDITOR)return!0;return!1};a(80);var Ge=function(){function e(){Object(m.a)(this,e)}return Object(s.a)(e,null,[{key:"parseValues",value:function(e,t){for(var a=new Array,n=t.elements,r=0;r<n.length;r++){var i=n[r],l=i.id,s=e[l];if(null!=s){switch(i.fieldType){case ke.FIELD_TYPE_DATE:s=new Date(s).toDateString();break;case ke.FIELD_TYPE_DATETIME:s=new Date(s).toLocaleString();break;case ke.FIELD_TYPE_IMAGE:var c=new String(s).split("~")[0];s=o.a.createElement("img",{src:ue()+c,width:"50",height:"50"});break;case ke.FIELD_TYPE_COLOR:s=o.a.createElement("strong",{style:{color:s}},s);break;case ke.FIELD_TYPE_NUMBER:s=C(s);break;case ke.FIELD_TYPE_TEXTEDITOR:s=o.a.createElement("div",{dangerouslySetInnerHTML:{__html:new String(s).length>100?new String(s).substring(0,100)+"...":s}});break;case ke.FIELD_TYPE_CHECKBOX:s=1==s?o.a.createElement("i",null,"true"):o.a.createElement("i",null,"false");break;case ke.FIELD_TYPE_FIXED_LIST:case ke.FIELD_TYPE_DYNAMIC_LIST:default:var u;if(i.optionItemName&&""!=i.optionItemName)s=e[l][null!==(u=i.optionItemName)&&void 0!==u?u:"id"];else s=e[l]}a.push(s)}else a.push(s)}return a}}]),e}(),ze=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=Ke(this.props.limit,this.props.totalData,this.props.activePage);if(0==t.length)return null;var a=t[t.length-1],n=this.props.activePage+1>=a?0:this.props.activePage+1,r=this.props.activePage-1<0?a-1:this.props.activePage-1;return o.a.createElement("div",null,o.a.createElement("nav",{"aria-label":"Page navigation example"},o.a.createElement("ul",{className:"pagination"},o.a.createElement("li",{className:"page-item"},o.a.createElement("a",{className:"page-link",onClick:function(t){return e.props.onClick(r)}},"Previous")),t.map((function(t,a){return o.a.createElement("li",{key:"NAV-"+y(),className:"page-item "+(t-1==e.props.activePage?"active":"")},o.a.createElement("a",{className:"page-link ",onClick:function(a){return e.props.onClick(t-1)}},t))})),o.a.createElement("li",{className:"page-item"},o.a.createElement("a",{className:"page-link",onClick:function(t){return e.props.onClick(n)}},"Next")))))}}]),a}(r.Component),Ke=function(e,t,a){var n=[],r=Math.ceil(t/e),o=a-1,i=a+3;r>1&&n.push(1);for(var l=o;l<=i;l++)l>1&&l<=r&&n.push(l);return i<r&&n.push(r),n},Xe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).prepopulateForm=function(){},n.getEntityElement=function(){return n.props.entityElement},n.getRequiredAttr=function(){return{required:1==n.getEntityElement().required}},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.prepopulateForm()}}]),a}(Re),Qe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={singlePreviewData:void 0,showInputFile:!1},n.ref=o.a.createRef(),n.changeSingleImageData=function(e){var t=Object(c.a)(n);Ne(e.target).then((function(e){t.setState({singlePreviewData:e})}))},n.removeImage=function(e){var t=Object(c.a)(n);n.showConfirmationDanger("Remove image?").then((function(e){e&&t.doRemoveImage()}))},n.doRemoveImage=function(){n.ref.current&&(n.ref.current.value=null),n.setState({singlePreviewData:void 0,showInputFile:!1})},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.props.recordToEdit[n.getEntityElement().id];if(e){var t=ue()+e;n.setState({singlePreviewData:t,showInputFile:!0})}}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement();return o.a.createElement(o.a.Fragment,null,this.state.showInputFile?o.a.createElement("input",{ref:this.ref,onChange:this.changeSingleImageData,type:"file",accept:"image/*",className:"form-control"}):o.a.createElement(r.Fragment,null,o.a.createElement("p",null),o.a.createElement(We,{onClick:function(t){return e.setState({showInputFile:!0})},iconClassName:"fas fa-plus",className:"btn btn-info btn-sm"},"Add Image"),o.a.createElement("input",{type:"hidden",name:t.id,value:"NULLED"})),o.a.createElement("input",{value:this.state.singlePreviewData,type:"hidden",name:t.id}),o.a.createElement(Je,{imageData:this.state.singlePreviewData}),o.a.createElement(We,{show:void 0!=this.state.singlePreviewData,onClick:this.removeImage,iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove"))}}]),a}(Xe),Je=function(e){return 0!=e.show&&e.imageData?o.a.createElement("img",{className:"image",style:{margin:"3px"},src:e.imageData,width:"50",height:"50"}):null},$e=Object(p.f)(Object(he.b)(ge)(Qe)),Ze=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={previewData:new Map,inputElements:[1]},n.ref=o.a.createRef(),n.setImageData=function(e,t){var a=Object(c.a)(n);Ne(e.target).then((function(e){var n=a.state.previewData;n.set(t,e),a.setState({previewData:n})}))},n.addInputElement=function(e){var t=n.state.inputElements;0==t.length?t.push(1):t.push(t[t.length-1]+1),n.setState({inputElements:t})},n.removeInputElement=function(e){var t=Object(c.a)(n);n.showConfirmationDanger("Delete image?").then((function(a){a&&t.doRemoveInputElement(e)}))},n.doRemoveInputElement=function(e){for(var t=n.state.previewData,a=n.state.inputElements,r=0;r<a.length;r++){a[r]==e&&(a.splice(r,1),t.delete(e))}n.setState({inputElements:a,previewData:t})},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.props.recordToEdit[n.getEntityElement().id];if(e&&""!=new String(e).trim()){for(var t=n.state.previewData,a=new String(e).split("~"),r=new Array,o=0;o<a.length;o++){var i=a[o];t.set(o,i),r.push(o)}n.setState({previewData:t,inputElements:r})}}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement();return o.a.createElement(o.a.Fragment,null,this.state.inputElements.map((function(a){var n=e.state.previewData.get(a),i=void 0==n||""==new String(n).trim(),l=!i&&et(n);return o.a.createElement(r.Fragment,{key:"IMG"+a+t.id},i?o.a.createElement("input",{onChange:function(t){return e.setImageData(t,a)},type:"file",accept:"image/*",name:t.id,className:"form-control"}):null,l?o.a.createElement("div",null,o.a.createElement("input",{value:n,type:"hidden",name:t.id}),o.a.createElement(tt,{imageData:n})):i?null:o.a.createElement("div",null,o.a.createElement("input",{value:n,type:"hidden",name:t.id,className:"form-control"}),o.a.createElement(tt,{imageData:ue()+n}),o.a.createElement("p",{className:"badge badge-warning"},n)),o.a.createElement(We,{show:void 0!=e.state.previewData,onClick:function(t){return e.removeInputElement(a)},iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove ",a))})),o.a.createElement("p",null),o.a.createElement(We,{iconClassName:"fas fa-plus",onClick:this.addInputElement},"Add"))}}]),a}(Xe),et=function(e){return e&&e.startsWith("data:image")},tt=function(e){return 0!=e.show&&e.imageData?o.a.createElement("img",{className:"image",style:{margin:"3px"},src:e.imageData,width:"50",height:"50"}):null},at=Object(p.f)(Object(he.b)(ge)(Ze)),nt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state={inputList:[],singlePreviewData:void 0},n.ref=o.a.createRef(),n.inputListLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error("Not found");n.setState({inputList:e.entities}),n.prepopulateForm()},n.loadInputList=function(){var e=n.getEntityElement().entityReferenceClass;n.commonAjax(n.masterDataService.loadAllEntities,n.inputListLoaded,n.showCommonErrorAlert,e)},n.isNotReady=function(){return 0==n.state.inputList.length},n.validateInputType=function(){console.debug("validateInputType"),n.isNotReady()&&n.loadInputList()},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];if(t){var a;if(0!=n.state.inputList.length){var r=n.getEntityElement().optionValueName;r&&(a=t[r])&&(n.ref.current.value=a)}}}},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.validateInputType()}},{key:"componentDidMount",value:function(){this.validateInputType(),this.prepopulateForm()}},{key:"render",value:function(){var e=this.getEntityElement();if(this.isNotReady())return o.a.createElement("div",{className:"form-group"},"Loading...");var t=this.state.inputList;return o.a.createElement("select",{ref:this.ref,className:"form-control",name:e.id},t.map((function(t){var a=e.optionValueName,n=e.optionItemName;return n&&a?o.a.createElement("option",{key:"fid-"+y()+"-",value:t[a]},t[n]):null})))}}]),a}(Xe),rt=Object(p.f)(Object(he.b)(ge)(nt)),ot=(a(81),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.className)&&void 0!==e?e:"btn btn-outline-secondary";return this.props.to?o.a.createElement(je.b,Object.assign({},this.props.attributes,{to:this.props.to,style:this.props.style,onClick:this.props.onClick,className:t}),this.props.iconClassName?o.a.createElement("span",{style:{marginRight:"5px"}},o.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children):o.a.createElement("a",Object.assign({},this.props.attributes,{tyle:this.props.style,onClick:this.props.onClick,className:t}),this.props.iconClassName?o.a.createElement("span",{style:{marginRight:"5px"}},o.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children)}}]),a}(r.Component)),it=function e(){Object(m.a)(this,e),this.editMode=!1,this.fieldValue="",this.updated=!1},lt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state=new it,n.contentRef=o.a.createRef(),n.formatDoc=function(e,t){var a=n.contentRef.current;if(a){if(console.debug("commmand: ",e),n.validateMode()){var r=document.execCommand(e,!1,t);console.debug("EXECUTED: ",r," editable: ",a.contentEditable),a.focus()}}else console.debug("oDOc is missing")},n.validateMode=function(){return!n.state.editMode||(alert('Uncheck "Show HTML".'),n.contentRef.current&&n.contentRef.current.focus(),!1)},n.setValue=function(e){n.contentRef.current&&n.setState({fieldValue:n.contentRef.current.innerHTML,updated:!0})},n.setDocMode=function(e){var t=n.contentRef.current;if(t){var a;if(e){a=document.createTextNode(t.innerHTML),t.innerHTML="";var r=document.createElement("pre");t.contentEditable="false",r.id="sourceText",r.contentEditable="true",r.appendChild(a),t.appendChild(r)}else document.all?t.innerHTML=t.innerText:((a=document.createRange()).selectNodeContents(t.firstChild),t.innerHTML=a.toString()),t.contentEditable="true";t.focus()}},n.printDoc=function(){n.validateMode()},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.contentRef.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&(n.contentRef.current.innerHTML=t,n.setState({fieldValue:t,updated:!0}))}},n.setEditMode=function(e){n.setDocMode(e),n.setState({editMode:e})},n.paleteCommand=function(e){var t=e.target,a=t.dataset.command,r=t.dataset.value;"clean"==a?n.clean():n.formatDoc(a,r)},n.clean=function(){var e=Object(c.a)(n);n.showConfirmationDanger("Clean content?").then((function(t){t&&e.contentRef.current&&(e.contentRef.current.innerHTML="")}))},n.contentOnChange=function(e){n.setState({updated:!1})},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){console.debug("component updated")}},{key:"render",value:function(){var e=this,t=this.getEntityElement();return o.a.createElement("div",null,o.a.createElement("input",{type:"hidden",value:this.state.fieldValue,name:t.id}),o.a.createElement("div",{id:"toolBar1",className:"input-group"},o.a.createElement(dt,{onChange:this.formatDoc}),o.a.createElement(mt,{onChange:this.formatDoc}),o.a.createElement(st,{onChange:this.formatDoc}),o.a.createElement(ut,{onChange:this.formatDoc}),o.a.createElement(ct,{onChange:this.formatDoc})),o.a.createElement("div",{id:"toolBar2"},o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"clean",className:"palete fas fa-broom"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},className:"palete fas fa-print "}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"undo",className:"palete fas fa-undo"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"redo",className:"palete fas fa-redo"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"removeFormat",className:"palete fas fa-times"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"bold",className:"palete fas fa-bold"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"italic",className:"palete fas fa-italic"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"underline",className:"palete fas fa-underline"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifyleft",className:"palete fas fa-align-left"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifycenter",className:"palete fas fa-align-center"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifyright",className:"palete fas fa-align-right"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"insertorderedlist",className:"palete fas fa-list-ol"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"insertonorderedlist",className:"palete fas fa-list-ul"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"formatblock","data-value":"blockquote",className:"palete fas fa-quote-left"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"outdent",className:"palete"},"+ Indentation"),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"indent",className:"palete"},"- Indentation"),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},className:"palete fas fa-link",onClick:function(t){var a=prompt("Write the URL here","http://");a&&""!=a&&"http://"!=a&&e.formatDoc("createlink",a)}}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"cut",className:"palete fas fa-cut"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"copy",className:"palete fas fa-copy"}),o.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"paste",className:"palete fas fa-paste"})),o.a.createElement("div",{onInput:this.contentOnChange,className:"container-fluid",ref:this.contentRef,id:"textBox",contentEditable:"true"},o.a.createElement("p",null,"Fill content")),o.a.createElement("p",null),o.a.createElement(ot,{show:0==this.state.updated,style:{marginRight:"5px"},iconClassName:"fas fa-exclamation-circle",className:"btn btn-warning btn-sm",onClick:this.setValue},"Update Content"),o.a.createElement(ot,{show:1==this.state.updated,style:{marginRight:"5px"},iconClassName:"fas fa-check",className:"btn btn-primary btn-sm"},"Content Updated"),o.a.createElement(ot,{className:"btn btn-secondary btn-sm",attributes:{onMouseDown:function(e){return e.preventDefault()}},onClick:function(t){return e.setEditMode(!1)},show:1==this.state.editMode},"Hide Html"),o.a.createElement(ot,{className:"btn btn-secondary btn-sm",attributes:{onMouseDown:function(e){return e.preventDefault()}},onClick:function(t){return e.setEditMode(!0)},show:0==this.state.editMode},"Show Html"))}}]),a}(Xe),st=function(e){return o.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("fontsize",a.value),a.value="-"}},o.a.createElement("option",{value:"-",className:"heading",selected:!0},"- size -"),o.a.createElement("option",{value:"1"},"Very small"),o.a.createElement("option",{value:"2"},"A bit small"),o.a.createElement("option",{value:"3"},"Normal"),o.a.createElement("option",{value:"4"},"Medium-large"),o.a.createElement("option",{value:"5"},"Big"),o.a.createElement("option",{value:"6"},"Very big"),o.a.createElement("option",{value:"7"},"Maximum"))},ct=function(e){return o.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("backcolor",a.value),a.value="-"}},o.a.createElement("option",{value:"-",className:"heading",selected:!0},"- background -"),o.a.createElement("option",{value:"red"},"Red"),o.a.createElement("option",{value:"green"},"Green"),o.a.createElement("option",{value:"black"},"Black"))},ut=function(e){return o.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("forecolor",a.value),a.value="-"}},o.a.createElement("option",{className:"heading",value:"-",selected:!0},"- color -"),o.a.createElement("option",{value:"red"},"Red"),o.a.createElement("option",{value:"blue"},"Blue"),o.a.createElement("option",{value:"green"},"Green"),o.a.createElement("option",{value:"black"},"Black"))},dt=function(e){return o.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("formatblock",a.value),a.value="-"}},o.a.createElement("option",{value:"-",selected:!0},"- formatting -"),o.a.createElement("option",{value:"h1"},"Title 1 <h1>"),o.a.createElement("option",{value:"h2"},"Title 2 <h2>"),o.a.createElement("option",{value:"h3"},"Title 3 <h3>"),o.a.createElement("option",{value:"h4"},"Title 4 <h4>"),o.a.createElement("option",{value:"h5"},"Title 5 <h5>"),o.a.createElement("option",{value:"h6"},"Subtitle <h6>"),o.a.createElement("option",{value:"p"},"Paragraph <p>"),o.a.createElement("option",{value:"pre"},"Preformatted <pre>"))},mt=function(e){return o.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("fontname",a.value),a.value="-"}},o.a.createElement("option",{value:"-",className:"heading",selected:!0},"- font -"),o.a.createElement("option",{value:"Arial"},"Arial"),o.a.createElement("option",{value:"Arial Black"},"Arial Black"),o.a.createElement("option",{value:"Courier New"},"Courier New"),o.a.createElement("option",{value:"Times New Roman"},"Times New Roman"))},pt=Object(p.f)(Object(he.b)(ge)(lt)),ft=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={checked:!1},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&n.setState({checked:1==t})}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement(),a=this.state.checked;return o.a.createElement(r.Fragment,null,o.a.createElement("input",{type:"hidden",name:t.id,value:a?"true":"false"}),o.a.createElement("div",{className:"btn-group"},o.a.createElement("a",{className:a?"btn btn-dark":"btn btn-light",onClick:function(t){return e.setState({checked:!0})}},"Yes"),o.a.createElement("a",{className:a?"btn btn-light":"btn btn-dark",onClick:function(t){return e.setState({checked:!1})}},"No")))}}]),a}(Xe);var ht,gt=function(e){return e>=10?e.toString():"0"+e},vt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).ref=o.a.createRef(),n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement(),t=e.id,a=n.props.recordToEdit[t];if(void 0!=a){var r,o=void 0;switch(e.fieldType){case ke.FIELD_TYPE_DATE:var i=new Date(a);if(!i)break;o=[(r=i).getFullYear(),gt(r.getMonth()+1),gt(r.getDate())].join("-");break;case ke.FIELD_TYPE_NUMBER:o=new String(a);break;default:o=a}if(o)if(e.optionItemName&&""!=e.optionItemName){var l,s=o;n.ref.current.value=s[null!==(l=e.optionItemName)&&void 0!==l?l:"id"]}else n.ref.current.value=o}else console.debug(t," is undefined",n.props.recordToEdit,n.props.recordToEdit[t])}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=this.getRequiredAttr();if(1==e.identity||0==e.editable)return o.a.createElement("input",Object.assign({},t,{value:"Generated",ref:this.ref,className:"form-control",name:e.id,disabled:!0}));var a=o.a.createElement("p",null,e.fieldType);switch(e.fieldType){case ke.FIELD_TYPE_PLAIN_LIST:a=o.a.createElement("select",Object.assign({},t,{ref:this.ref,className:"form-control",name:e.id}),e.plainListValues.map((function(t,a){return o.a.createElement("option",{key:"s-"+e.id+"-o-"+a,value:t},t)})));break;case ke.FIELD_TYPE_TEXTAREA:a=o.a.createElement("textarea",Object.assign({},t,{ref:this.ref,className:"form-control",name:e.id}));break;default:a=o.a.createElement("input",Object.assign({type:e.type},t,{ref:this.ref,className:"form-control",name:e.id}))}return a}}]),a}(Xe),bt=function e(){Object(m.a)(this,e),this.inputList=[],this.searchValue=""},Et=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state=new bt,n.ref=o.a.createRef(),n.inputRef=o.a.createRef(),n.inputListLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error(n.getEntityElement().labelName+" Not found");n.setState({inputList:e.entities},(function(){n.inputRef.current&&n.inputRef.current.focus()}))},n.loadInputList=function(){var e,t=n.getEntityElement(),a=t.entityReferenceClass,r=t.optionItemName;if(r){var o={entity:a,filter:{limit:0,page:0,fieldsFilter:Object(P.a)({},r,null===(e=n.inputRef.current)||void 0===e?void 0:e.innerHTML)}};n.commonAjax(n.masterDataService.loadEntities,n.inputListLoaded,n.showCommonErrorAlert,o)}},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&n.setState({inputList:[t],searchValue:""},(function(){var e,a=n.getEntityElement().optionValueName;a&&(e=t[a])&&(n.ref.current.value=e)}))}},n.search=function(e){if(13==e.keyCode){if(n.inputRef.current){var t=n.inputRef.current;t.innerHTML=new String(t.innerText).trim()}return e.preventDefault(),n.loadInputList(),!1}},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=e.optionValueName,a=e.optionItemName,n=this.state.inputList;console.debug("options: ",n);var r=e.entityReferenceClass+" "+a;return o.a.createElement("div",null,o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("div",{className:"input-group-append"},o.a.createElement("span",{className:"input-group-text"},r)),o.a.createElement("div",{onKeyDown:this.search,ref:this.inputRef,contentEditable:!0,className:"form-control"}),o.a.createElement("div",{className:"input-group-append"},o.a.createElement(ot,{onClick:this.loadInputList,className:"btn btn-secondary",children:"Search"}),o.a.createElement(ot,{show:void 0!=this.props.recordToEdit,onClick:this.prepopulateForm,iconClassName:"fas fa-sync-alt",className:"btn btn-secondary"}))),o.a.createElement("select",Object.assign({},this.getRequiredAttr(),{ref:this.ref,className:"form-control",name:e.id}),n.map((function(e){return a&&t?o.a.createElement("option",{key:"fid-"+y()+"-",value:e[t]},e[a]):null}))))}}]),a}(Xe),yt=Object(p.f)(Object(he.b)(ge)(Et)),Ct=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){if(0==this.props.show)return null;var e="vertical"==this.props.orientation?"vertical":"horizontal";return o.a.createElement("div",{className:"form-group "+this.props.className+" "+("vertical"==e?"":"row")},o.a.createElement("label",{className:"vertical"==e?"":"col-sm-3"},o.a.createElement("strong",null,this.props.label?this.props.label:null)),o.a.createElement("div",{className:"vertical"==e?"":"col-sm-9"},this.props.children))}}]),a}(r.Component),St=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).getEntityElement=function(){return n.props.entityElement},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=o.a.createElement("p",null,e.fieldType);switch(e.fieldType){case ke.FIELD_TYPE_DYNAMIC_LIST:t=o.a.createElement(yt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case ke.FIELD_TYPE_FIXED_LIST:t=o.a.createElement(rt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case ke.FIELD_TYPE_TEXTEDITOR:t=o.a.createElement(pt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case ke.FIELD_TYPE_IMAGE:t=e.multiple?o.a.createElement(at,{recordToEdit:this.props.recordToEdit,entityElement:e}):o.a.createElement($e,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case ke.FIELD_TYPE_CHECKBOX:t=o.a.createElement(ft,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case ke.FIELD_TYPE_PLAIN_LIST:case ke.FIELD_TYPE_TEXTAREA:default:t=o.a.createElement(vt,{recordToEdit:this.props.recordToEdit,entityElement:e})}var a=o.a.createElement("span",null,e.labelName,e.editable&&e.required?o.a.createElement("i",{className:"text-danger"},"*"):null);return o.a.createElement(Ct,{orientation:"vertical",label:a},t)}}]),a}(Re),Ot=Object(p.f)(Object(he.b)(ge)(St)),Nt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.editMode=!1,n.recordToEdit=void 0,n.formRef=o.a.createRef(),n.onSubmit=function(e){if(e.preventDefault(),n.formRef.current){var t=n.formRef.current,a=Object(c.a)(n);n.showConfirmation("Save data?").then((function(e){e&&a.submit(t)}))}},n.submit=function(e){var t=new FormData(e),a={},r=new Array,o=[],i=!1;t.forEach((function(e,t){console.debug("Form data ",t),a[t]||(a[t]=new Array);var r=n.getEntityElement(t);if(!r)return!1;switch(r.fieldType){case ke.FIELD_TYPE_CHECKBOX:a[t].push("true"==e);break;case ke.FIELD_TYPE_DYNAMIC_LIST:case ke.FIELD_TYPE_FIXED_LIST:var l=r.optionValueName;l&&a[t].push(Object(P.a)({},l,e));break;case ke.FIELD_TYPE_IMAGE:console.debug(t," is image"),"NULLED"==e?(console.debug("NULLED VALUE ADDED: ",t),o.push(t)):(new String(e).startsWith("data:image")&&(i=!0),a[t].push(e));break;default:a[t].push(e)}return!0})),Promise.all(r).then((function(e){var t=n.generateRequestPayload(a,o);console.debug("Record object to save: ",t,"realtimeProgress: ",i),n.ajaxSubmit(t,i)}))},n.generateRequestPayload=function(e,t){var a=n.editMode&&n.recordToEdit?Object(f.a)(Object(f.a)({},n.recordToEdit),{},{nulledFields:t}):{nulledFields:new Array};for(var r in e){var o=e[r];console.debug(r," length: ",o.length),1==o.length?a[r]=o[0]:o.length>1&&(a[r]=o.join("~"))}return a.nulledFields=t,a},n.ajaxSubmit=function(e,t){1==n.getEntityProperty().withProgressWhenUpdated||t?n.commonAjaxWithProgress(n.masterDataService.save,n.recordSaved,n.showCommonErrorAlert,n.getEntityProperty().entityName,e,n.editMode):n.commonAjax(n.masterDataService.save,n.recordSaved,n.showCommonErrorAlert,n.getEntityProperty().entityName,e,n.editMode)},n.recordSaved=function(e){n.showInfo("Record saved")},n.masterDataService=n.getServices().masterDataService,e.recordToEdit&&(n.editMode=!0,n.recordToEdit=e.recordToEdit),n}return Object(s.a)(a,[{key:"getEntityProperty",value:function(){return this.props.entityProperty}},{key:"componentDidUpdate",value:function(){0!=this.getEntityProperty().editable&&0!=this.getEntityProperty().creatable||this.props.onClose()}},{key:"getEntityElement",value:function(e){return Ve.getEntityElement(this.getEntityProperty(),e)}},{key:"render",value:function(){var e=this.getEntityProperty(),t=this.editMode?o.a.createElement("span",{className:"badge badge-warning"},"Edit Mode"):"";return o.a.createElement("div",{id:"MasterDataForm"},o.a.createElement(We,{style:{marginBottom:"5px"},onClick:this.props.onClose,iconClassName:"fas fa-angle-left"},"Back"),o.a.createElement("form",{ref:this.formRef,onSubmit:this.onSubmit,id:"record-form"},o.a.createElement(Ye,{title:o.a.createElement("span",null,e.alias," Record Form ",t),footerContent:o.a.createElement(kt,null)},o.a.createElement(wt,{app:this.parentApp,recordToEdit:this.recordToEdit,entityProperty:e}))))}}]),a}(Re),kt=function(e){return o.a.createElement("div",{className:"btn-group"},o.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),o.a.createElement("input",{type:"reset",className:"btn btn-warning"}))},wt=function(e){var t=e.entityProperty.elements,a=new Array,n=0,r=Ve.hasTextEditorField(t);a.push(new Array);for(var i=0;i<t.length;i++){var l=t[i];!r&&i>0&&i%5==0&&(n++,a.push(new Array)),a[n].push(l)}return o.a.createElement("div",{className:"row"},a.map((function(t,a){return o.a.createElement("div",{key:"GROUPED_ELEMENT_"+a,className:r?"col-lg-12":"col-lg-6"},t.map((function(t){var a="form-input-for-"+e.entityProperty.entityName+"-"+t.id;return o.a.createElement(Ot,{key:a,recordToEdit:e.recordToEdit,entityElement:t})})))})))},Rt=Object(p.f)(Object(he.b)(ge)(Nt)),jt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props;if(0==e.show)return null;var t="",a=e.entityProperty.entityName;return"quiz"!=a?"quizhistory"==a?o.a.createElement(We,{onClick:e.delete,className:"btn btn-danger btn-sm",iconClassName:"fas fa-times"}):null:(t="/quizmanagement/detail/"+e.record.id,o.a.createElement(ot,{className:"btn btn-dark btn-sm",iconClassName:"fas fa-edit",to:t,attributes:{target:"_blank"}}))}}]),a}(r.Component),Dt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.delete=function(e){var t=Object(c.a)(n);n.showConfirmationDanger("Delete record?").then((function(e){e&&t.doDelete()}))},n.doDelete=function(){var e=n.props.record,t=n.props.entityProperty,a=Ve.getRecordId(e,t);t.withProgressWhenUpdated?n.commonAjaxWithProgress(n.masterDataService.delete,n.recordDeleted,n.showCommonErrorAlert,t.entityName,a):n.commonAjax(n.masterDataService.delete,n.recordDeleted,n.showCommonErrorAlert,t.entityName,a)},n.getRecordById=function(){var e=n.props.record,t=n.props.entityProperty,a=Ve.getRecordId(e,t);n.commonAjax(n.masterDataService.getById,n.recordLoaded,n.showCommonErrorAlert,t.entityName,a)},n.recordLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error("Record not found");n.props.showEditForm&&n.props.showEditForm(e)},n.recordDeleted=function(e){n.showInfo("Record deleted"),n.props.reload()},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.entityProperty;if(0==this.props.show)return null;var t=o.a.createElement(jt,{delete:this.delete,record:this.props.record,entityProperty:e});return 0==e.editable?t:o.a.createElement("div",{className:"btn-group"},t,o.a.createElement(We,{onClick:this.getRecordById,iconClassName:"fas fa-edit",className:"btn btn-warning btn-sm"}),o.a.createElement(We,{onClick:this.delete,className:"btn btn-danger btn-sm",iconClassName:"fas fa-times"}))}}]),a}(Re),It=Object(p.f)(Object(he.b)(ge,(function(e){return{}}))(Dt)),At=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.headerProps,a=e.fieldsFilter;return o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"No"),t.map((function(t,n){var i,l,s,c,u=t.isDate,d=t.value;if(!t.filterable)return o.a.createElement("th",{key:"dth-"+n+"-"+d},o.a.createElement("p",null,t.label));var m="form-control input-filter";return o.a.createElement("th",{key:"dth-"+n+"-"+d},o.a.createElement("p",null,t.label),o.a.createElement("div",{style:{minWidth:"200px"},className:"input-group"},u?o.a.createElement(r.Fragment,null,o.a.createElement("input",{key:"filter-day-"+d,autoComplete:"off",value:null!==(i=a[d+"-day"])&&void 0!==i?i:"",onChange:e.filterOnChange,name:d+"-day",className:m,placeholder:"day"}),o.a.createElement("input",{key:"filter-month-"+d,autoComplete:"off",value:null!==(l=a[d+"-month"])&&void 0!==l?l:"",onChange:e.filterOnChange,name:d+"-month",className:m,placeholder:"month"}),o.a.createElement("input",{key:"filter-year-"+d,autoComplete:"off",value:null!==(s=a[d+"-year"])&&void 0!==s?s:"",onChange:e.filterOnChange,name:d+"-year",className:m,placeholder:"year"})):o.a.createElement("input",{key:"filter-common-"+d,autoComplete:"off",value:null!==(c=a[d])&&void 0!==c?c:"",onChange:e.filterOnChange,placeholder:t.label,className:m,name:d}),o.a.createElement("div",{className:"input-group-append btn-group"},o.a.createElement("button",{"data-ordertype":"asc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"btn btn-outline-secondary btn-sm"},o.a.createElement("i",{"data-ordertype":"asc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"fas fa-angle-up"})),o.a.createElement("button",{"data-ordertype":"desc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"btn btn-outline-secondary btn-sm"},o.a.createElement("i",{"data-ordertype":"desc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"fas fa-angle-down"})))))})),o.a.createElement("th",null,"Action")))}}]),a}(r.Component),Pt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e;return 0==this.props.show?null:o.a.createElement("div",{style:this.props.style,className:"alert alert-danger"},null!==(e=this.props.children)&&void 0!==e?e:"Error Occured")}}]),a}(r.Component),Lt=(a(82),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){for(var e=new Array,t=0;t<=11;t++)e.push(o.a.createElement("div",{key:"spinner-item-"+t}));return o.a.createElement("div",{style:Object(f.a)({width:"85px",height:"85px",display:"block"},this.props.style),className:"container-fluid text-center"},o.a.createElement("div",{style:{visibility:0==this.props.show?"hidden":"visible"},className:"lds-spinner"},e))}}]),a}(r.Component)),Tt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a=this,n=this.props,r=this.props.active;return o.a.createElement("div",{className:"btn-group"},o.a.createElement(We,{className:"btn  btn-sm "+(r?"btn-dark":"btn-outline-dark"),onClick:function(e){return a.props.onClick(!0)}},null!==(e=n.yesLabel)&&void 0!==e?e:"Yes"),o.a.createElement(We,{className:"btn  btn-sm "+(0==r?"btn-dark":"btn-outline-dark"),onClick:function(e){return a.props.onClick(!1)}},null!==(t=n.noLabel)&&void 0!==t?t:"No"))}}]),a}(r.Component),Mt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.state=void 0,n.recordToEdit=void 0,n.entityProperty=void 0,n.headerProps=void 0,n.adjustFilter=function(e){var t=e.fieldsFilter;for(var a in t){var n=t[a];void 0!=n&&null!=n&&0!=new String(n).length||void 0!=e.fieldsFilter&&delete e.fieldsFilter[a]}return e},n.loadEntities=function(e){var t=Object.assign(new qe,n.state.filter),a=n.entityProperty.entityName;t.page=null!==e&&void 0!==e?e:t.page;var r={entity:a,filter:n.adjustFilter(t)};n.commonAjax(n.masterDataService.loadEntities,n.entitiesLoaded,n.showCommonErrorAlert,r)},n.entitiesLoaded=function(e){n.setState({recordData:e,filter:e.filter})},n.checkDefaultData=function(){n.state.loading||n.entityProperty.entityName==n.props.entityProperty.entityName&&void 0!=n.state.recordData||(n.entityProperty=n.props.entityProperty,n.headerProps=Ve.getHeaderLabels(n.props.entityProperty),n.loadEntities(0))},n.getRecordNumber=function(e){var t,a;return(null!==(t=n.state.filter.page)&&void 0!==t?t:0)*(null!==(a=n.state.filter.limit)&&void 0!==a?a:5)+e+1},n.filterFormSubmit=function(e){var t=n.state.filter.useExistingFilterPage?n.state.filter.page:0;n.loadEntities(t)},n.filterOnChange=function(e){e.preventDefault();var t=e.target,a=t.name,r=t.value,o=n.state.filter;void 0==o.fieldsFilter&&(o.fieldsFilter={}),o.fieldsFilter[a]=r,n.setState({filter:o})},n.setExactSearch=function(e){var t=n.state.filter;t.exacts=e,n.setState({filter:t})},n.filterReset=function(e){var t=n.state.filter;t.fieldsFilter={},t.limit=5,n.setState({filter:t})},n.orderButtonOnClick=function(e){var t=e.target.dataset,a=n.state.filter;a.orderBy=t.orderby,a.orderType=t.ordertype,n.setState({filter:a}),n.loadEntities(0)},n.showEditForm=function(e){e.entities&&(n.recordToEdit=e.entities[0],n.setState({showForm:!0}))},n.showCreateForm=function(e){n.recordToEdit=void 0,n.setState({showForm:!0})},n.updateFilterPage=function(e){var t=n.state.filter;t.useExistingFilterPage=!0,t.page=parseInt(e)-1,n.setState({filter:t})},n.updateFilterLimit=function(e){var t=n.state.filter;t.limit=parseInt(e),n.setState({filter:t})},n.getFilter=function(){return n.state.filter},n.printRecord=function(){n.props.printRecord(n.state.filter)},n.masterDataService=n.getServices().masterDataService,n.entityProperty=n.props.entityProperty,n.headerProps=Ve.getHeaderLabels(n.props.entityProperty),n.state={showForm:!1,loading:!1,filter:{limit:5,page:0,fieldsFilter:{}}},n}return Object(s.a)(a,[{key:"startLoading",value:function(){this.setState({loading:!0})}},{key:"endLoading",value:function(){this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.checkDefaultData()}},{key:"componentDidMount",value:function(){this.checkDefaultData()}},{key:"render",value:function(){var e,t,a,n,r=this;if(void 0==this.state.recordData)return o.a.createElement(Lt,null);var i=this.headerProps,l=1==this.state.filter.exacts,s=this.state.recordData.entities?this.state.recordData.entities:[];return void 0==i||void 0==s?o.a.createElement(Pt,null):1==this.state.showForm?o.a.createElement(Rt,{recordToEdit:this.recordToEdit,entityProperty:this.entityProperty,onClose:function(e){r.setState({showForm:!1})}}):o.a.createElement("div",{id:"MasterDataList"},o.a.createElement("div",{className:"btn-group",style:{marginBottom:"5px"}},o.a.createElement(We,{show:1==this.entityProperty.creatable&&1==this.entityProperty.editable,onClick:this.showCreateForm,iconClassName:"fas fa-plus"},"Add Record"),o.a.createElement(We,{onClick:this.printRecord,iconClassName:"fas fa-file"},"Print Record")),o.a.createElement("form",{id:"filter-form",onSubmit:function(e){e.preventDefault()}},o.a.createElement(Ye,{title:"Filter",toggleable:!0},o.a.createElement("div",null,o.a.createElement("div",{className:"form-group row"},o.a.createElement("div",{className:"col-6"},o.a.createElement("input",{value:(null!==(e=this.state.filter.page)&&void 0!==e?e:0)+1,onChange:function(e){r.updateFilterPage(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"go to page"})),o.a.createElement("div",{className:"col-6"},o.a.createElement("input",{value:this.state.filter.limit,onChange:function(e){return r.updateFilterLimit(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"record per page"})),o.a.createElement("div",{className:"col-12"},o.a.createElement("p",null)),o.a.createElement("div",{className:"col-3"},o.a.createElement(Tt,{active:l,yesLabel:"exact",noLabel:"not exact",onClick:function(e){return r.setExactSearch(e)}})),o.a.createElement("div",{className:"col-3"},o.a.createElement(_t,{onSubmit:this.filterFormSubmit,onReset:this.filterReset}))))),o.a.createElement(ze,{limit:null!==(t=this.state.filter.limit)&&void 0!==t?t:5,totalData:null!==(a=this.state.recordData.totalData)&&void 0!==a?a:0,activePage:null!==(n=this.state.filter.page)&&void 0!==n?n:0,onClick:this.loadEntities}),o.a.createElement(Ye,{title:"Data List"},this.state.loading?o.a.createElement(Ft,{loading:this.state.loading}):null,o.a.createElement("div",{className:"container-fluid",style:{overflow:"scroll"}},o.a.createElement("table",{className:"table"},o.a.createElement(At,{fieldsFilter:this.state.filter.fieldsFilter,orderButtonOnClick:this.orderButtonOnClick,filterOnChange:this.filterOnChange,headerProps:i}),o.a.createElement("tbody",null,s.map((function(e,t){var a=r.getRecordNumber(t),n=Ge.parseValues(e,r.props.entityProperty);return o.a.createElement("tr",{key:"tr-result-"+t},o.a.createElement("td",null,a),n.map((function(e){try{return o.a.createElement("td",{key:"td-u-"+y()},e)}catch(t){return o.a.createElement("td",{key:"td-u-"+y()},"-")}})),o.a.createElement("td",null,o.a.createElement(It,{showEditForm:r.showEditForm,record:e,entityProperty:r.entityProperty,reload:function(){return r.loadEntities(void 0)}})))}))))))))}}]),a}(Re),Ft=function(e){var t=e.loading;return o.a.createElement("div",{style:{width:"100%",height:"100%",paddingTop:"2rem",backgroundColor:"rgb(240,240,240,0.5)",marginLeft:"-1rem",marginTop:"-1rem",position:"absolute"}},o.a.createElement(Lt,{show:t}))},_t=function(e){return o.a.createElement("div",{className:"btn-group"},o.a.createElement("button",{onClick:e.onSubmit,className:"btn btn-dark btn-sm"},o.a.createElement("span",{className:"icon"},o.a.createElement("i",{className:"fas fa-play-circle"})),"Apply Filter"),o.a.createElement("button",{onClick:e.onReset,type:"reset",className:"btn btn-dark btn-sm"},o.a.createElement("span",{className:"icon"},o.a.createElement("i",{className:"fas fa-sync-alt"})),"Reset"))},Ut=Object(p.f)(Object(he.b)(ge)(Mt)),xt=function e(){Object(m.a)(this,e),this.entityProperty=void 0},Bt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.code="",n.loadingEntityProperty=!1,n.entityProperty=void 0,n.state=new xt,n.entityPropertyLoaded=function(e){n.loadingEntityProperty=!1,void 0!=e.entityProperty&&(n.masterDataService.setEntityProperty(n.props.code,e.entityProperty),n.setState({entityProperty:e.entityProperty}),n.setTitle(e.entityProperty))},n.setTitle=function(e){document.title=new String(null===e||void 0===e?void 0:e.alias).toString()},n.printRecord=function(e){var t=n.state.entityProperty;t&&n.showConfirmation("Print record? ").then((function(a){if(a){var r={entity:t.entityName,filter:e};n.commonAjaxWithProgress(n.masterDataService.generateReport,n.reportCreated,n.showCommonErrorAlert,r)}}))},n.reportCreated=function(e){n.showConfirmation("Save File "+e.name+" ?").then((function(t){t&&Object.assign(document.createElement("a"),{target:"_blank",download:e.name,style:{display:"none"},href:e.dataUrl}).click()}))},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){void 0!=this.props.code&&this.code!=this.props.code&&(this.code=this.props.code,this.loadEntityProperty()),console.debug("updated this.props.code: ",this.props.code)}},{key:"componentDidMount",value:function(){void 0!=this.props.code&&this.code!=this.props.code&&(this.code=this.props.code,this.loadEntityProperty())}},{key:"startLoading",value:function(e){1==e&&Object(Ue.a)(Object(xe.a)(a.prototype),"startLoading",this).call(this,e)}},{key:"loadEntityProperty",value:function(){var e=this;if(void 0!=this.code||1!=this.loadingEntityProperty){var t=this.masterDataService.getEntityProperty(this.code);if(void 0!=t)return this.loadingEntityProperty=!1,this.setState({entityProperty:t}),void this.setTitle(t);this.loadingEntityProperty=!0,this.setState({entityProperty:void 0}),this.commonAjax(this.masterDataService.loadEntityProperty,this.entityPropertyLoaded,(function(t){e.loadingEntityProperty=!1,e.showCommonErrorAlert(t)}),this.code)}}},{key:"render",value:function(){if(void 0==this.state.entityProperty)return o.a.createElement("div",{className:" container-fluid section-body",style:{paddingTop:"20px"}},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-4 text-right"},o.a.createElement("div",{className:"spinner-border",role:"status"})),o.a.createElement("div",{className:"col-8"},o.a.createElement("h4",null,"Loading configuration"))));this.state.entityProperty;return o.a.createElement("div",{id:"MasterDataManagement",className:"container-fluid section-body"},o.a.createElement("h2",null,this.state.entityProperty.alias),o.a.createElement(Ut,{printRecord:this.printRecord,entityProperty:this.state.entityProperty}))}}]),a}(Re),Wt=Object(p.f)(Object(he.b)(ge)(Bt)),Ht=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e,"Master Data",!0)).masterDataService=void 0,r.state={code:void 0},r.managementPropertiesLoaded=function(e){r.masterDataService.managementProperties=e.generalList?e.generalList:[],r.setSidebarMenus(),r.refresh()},r.setSidebarMenus=function(){for(var e=[],t=r.masterDataService.managementProperties,a=0;a<t.length;a++){var o=t[a];e.push({role:[n.ROLE_ADMIN],name:o.label,url:o.entityName,code:o.entityName,menuClass:o.iconClassName})}console.debug("this.props.setSidebarMenus: ",r.props.setSidebarMenus),r.props.setSidebarMenus&&r.props.setSidebarMenus(e)},r.loadManagamenetPages=function(){if(r.masterDataService.managementProperties.length>0)return r.setSidebarMenus(),void r.refresh();r.commonAjax(r.masterDataService.loadManagementProperties,r.managementPropertiesLoaded,r.showCommonErrorAlert)},r.getCode=function(){return r.props.match.params.code},r.masterDataService=r.getServices().masterDataService,console.debug("PROPS: ",r.props),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(Ue.a)(Object(xe.a)(a.prototype),"componentDidMount",this).call(this),this.loadManagamenetPages()}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.setSidebarMenus(),this.state.code!=this.getCode()&&this.setState({code:this.getCode()})}},{key:"render",value:function(){if(void 0!=this.getCode()&&null!=this.getCode()&&""!=this.getCode())return o.a.createElement(Wt,{code:this.getCode()});if(0==this.masterDataService.managementProperties.length)return o.a.createElement("div",{className:"container-fluid  section-body"},o.a.createElement(Lt,null));var e=this.masterDataService.managementProperties;return o.a.createElement("div",{className:"container-fluid section-body"},o.a.createElement("h2",null,"Master Data Page"),o.a.createElement("div",{className:"row"},e.map((function(e){return o.a.createElement("div",{key:"mngmnt-page-item-"+e.entityName,className:"col-md-2 text-center",style:{marginBottom:"10px"}},o.a.createElement("h2",null,o.a.createElement(je.b,{className:"btn btn-warning btn-lg",to:"/management/"+e.entityName},o.a.createElement("i",{className:e.iconClassName}))),o.a.createElement("p",null,e.label))}))))}}]),a}(Te),Yt=Object(p.f)(Object(he.b)(ge)(Ht)),qt=(a(83),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,!1)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Home"}},{key:"render",value:function(){var e=this.getApplicationProfile(),t=ue()+e.backgroundUrl;return o.a.createElement("div",{style:{backgroundColor:e.color},className:"text-center container-fluid home-wrapper"},o.a.createElement("div",{className:" bg",style:{backgroundImage:'url("'+t+'")'}},"   "),o.a.createElement("p",null),o.a.createElement(je.b,{to:"/login",className:"btn btn-dark btn-lg"},"Login to continue"),o.a.createElement("p",null))}}]),a}(Re)),Vt=Object(p.f)(Object(he.b)(ge)(qt)),Gt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,"Settings",!0)}return Object(s.a)(a,[{key:"render",value:function(){var e;return o.a.createElement("div",{id:"SettingsMain",className:"section-body container-fluid"},o.a.createElement("h2",null,"Settings"),o.a.createElement("div",{className:"alert alert-info"},"Welcome, ",o.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName)))}}]),a}(Te),zt=Object(p.f)(Object(he.b)(ge,(function(e){return{}}))(Gt)),Kt=function(e){var t=e.edit,a=e.name,n=e.toggleInput,r=e.value,i=e.updateProperty,l=Object(Be.a)(e,["edit","name","toggleInput","value","updateProperty"]);return 1==t?o.a.createElement(Xt,{updateProperty:i,name:a,toggleInput:n,value:r,type:l.type}):o.a.createElement(Qt,{name:a,toggleInput:n,value:r,type:l.type})},Xt=function(e){var t=e.name,a=e.toggleInput,n=e.value,r=e.updateProperty,i=e.type;return o.a.createElement("div",{className:"row"},o.a.createElement("p",{className:"col-md-10"},o.a.createElement("input",{type:null!==i&&void 0!==i?i:"text",name:t,onChange:r,value:n,className:"form-control"})),o.a.createElement("div",{className:"col-md-2"},o.a.createElement(We,{attributes:{"data-name":t,"data-enabled":"false"},onClick:a,className:"btn btn-secondary btn-sm"},"cancel")))},Qt=function(e){var t=e.name,a=e.toggleInput,n=e.value,r=e.type;return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-10"},o.a.createElement("p",{style:{backgroundColor:"color"==r?n:"#fff"}},"color"==r?"Sample Color":n),"color"==r?o.a.createElement("p",null,n):null),o.a.createElement("div",{className:"col-md-2"},o.a.createElement(We,{attributes:{"data-name":t,"data-enabled":"true"},onClick:a,className:" btn btn-info btn-sm"},"edit")))},Jt=function(e){var t=e.name,a=e.edit,n=e.toggleInput,i=e.updateProperty;return a?o.a.createElement(r.Fragment,null,o.a.createElement("div",null,o.a.createElement(We,{attributes:{"data-name":t,"data-enabled":"false"},onClick:n,className:" btn btn-secondary btn-sm"},"cancel")),o.a.createElement("input",{onChange:i,className:"form control",accept:"image/*",type:"file",name:t})):o.a.createElement("div",null,o.a.createElement(We,{attributes:{"data-name":t,"data-enabled":"true"},onClick:n,className:" btn btn-info btn-sm"},"edit image"))},$t=function e(){var t=this;Object(m.a)(this,e),this.user=void 0,this.editFields={username:!1,displayName:!1,editPassword:!1,profileImage:!1},this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},Zt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).userService=void 0,n.state=new $t,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.user;a&&(a[t.name]=t.value,n.setState({user:a}))}},n.updateProfleImage=function(e){var t=e.target;if(null!=t){var a=Object(c.a)(n);(t.files?t.files[0].name:void 0)&&Ne(t).then((function(e){a.setProfileImage(e)})).catch(console.error)}},n.setProfileImage=function(e){var t=n.state.user;t&&(t.profileImage=e,n.setState({user:t}))},n.toggleInput=function(e){var t=e.target,a=n.state.user,r=n.getLoggedUser();if(null!=t&&a&&r){var o=t.getAttribute("data-name");if(null!=o){var i="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[o]=i,i||(a[o]=r[o]),n.setState({user:a,editFields:l})}}},n.saveRecord=function(e){if(e.preventDefault(),0!=n.state.fieldChanged()){var t=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&t.doSaveRecord()}))}},n.doSaveRecord=function(){var e=n.getUserEditedData();e&&(e.profileImage?n.commonAjaxWithProgress(n.userService.updateProfile,n.profileSaved,n.showCommonErrorAlert,e):n.commonAjax(n.userService.updateProfile,n.profileSaved,n.showCommonErrorAlert,e))},n.getUserEditedData=function(){var e,t=n.state.user,a=n.state.editFields;if(t){var r=new de;for(var o in a){a[o]&&"profileImage"!=o&&(r[o]=t[o])}return a.profileImage&&(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))&&(r.profileImage=t.profileImage),r}},n.profileSaved=function(e){n.showInfo("Success"),n.props.setLoggedUser(e.user);var t=n.state.editFields;for(var a in t)t[a]=!1;n.setState({editFields:t})},n.userService=n.getServices().userService,n.state.user=Object.assign(new de,n.getLoggedUser()),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),document.title="User Profile"}},{key:"render",value:function(){var e,t=this.state.user;if(!t)return null;var a=this.state.editFields;return o.a.createElement("div",{id:"UserProfile",className:"section-body container-fluid"},o.a.createElement("h2",null,"User Profile"),o.a.createElement(Me,{title:"Profile Data"},o.a.createElement("form",{onSubmit:this.saveRecord},o.a.createElement("div",{className:"container-fluid text-center",style:{marginBottom:"10px"}},o.a.createElement("img",{style:{marginBottom:"10px"},width:"100",height:"100",className:"rounded-circle border border-primary",src:(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))?t.profileImage:ue()+t.profileImage}),o.a.createElement(Jt,{name:"profileImage",edit:a.profileImage,updateProperty:this.updateProfleImage,toggleInput:this.toggleInput})),o.a.createElement(Ct,{label:"User Name"},o.a.createElement(Kt,{edit:a.username,updateProperty:this.updateProfileProperty,name:"username",toggleInput:this.toggleInput,value:t.username})),o.a.createElement(Ct,{label:"Name"},o.a.createElement(Kt,{edit:a.displayName,updateProperty:this.updateProfileProperty,name:"displayName",toggleInput:this.toggleInput,value:t.displayName})),o.a.createElement(Ct,{label:"Password"},o.a.createElement(Kt,{edit:a.editPassword,updateProperty:this.updateProfileProperty,name:"editPassword",toggleInput:this.toggleInput,value:t.editPassword})),o.a.createElement(Ct,null,this.state.fieldChanged()?o.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save"}):null))))}}]),a}(Re),ea=Object(p.f)(Object(he.b)(ge,(function(e){return{setLoggedUser:function(t){return e(function(e){return{type:"set_logged_user",payload:{user:Object.assign(new de,e)},meta:{type:"set_logged_user"}}}(t))}}}))(Zt)),ta=function e(){Object(m.a)(this,e),this.name=!1,this.pageIcon=!1,this.welcomingMessage=!1,this.contact=!1,this.shortDescription=!1,this.backgroundUrl=!1,this.address=!1,this.about=!1,this.color=!1,this.fontColor=!1},aa=function e(){var t=this;Object(m.a)(this,e),this.applicationProfile=void 0,this.editFields=new ta,this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},na=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.state=new aa,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.applicationProfile;a&&(a[t.name]=t.value,n.setState({applicationProfile:a}))}},n.updateImageField=function(e){var t=e.target;if(null!=t){var a=e.target.getAttribute("name");if(null!=a){var r=Object(c.a)(n);(t.files?t.files[0].name:void 0)&&Ne(t).then((function(e){r.setAppProfileField(a,e)})).catch(console.error)}}},n.setAppProfileField=function(e,t){var a=n.state.applicationProfile;a&&(a[e]=t,n.setState({applicationProfile:a}))},n.toggleInput=function(e){var t=e.target,a=n.state.applicationProfile,r=n.getApplicationProfile();if(null!=t&&a&&r){var o=t.getAttribute("data-name");if(null!=o){var i="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[o]=i,i||(a[o]=r[o]),n.setState({applicationProfile:a,editFields:l})}}},n.saveRecord=function(e){if(e.preventDefault(),0!=n.state.fieldChanged()){var t=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&t.doSaveRecord()}))}},n.doSaveRecord=function(){var e=n.getApplicationEditedData();e&&(e.backgroundUrl||e.pageIcon?n.commonAjaxWithProgress(n.masterDataService.updateApplicationProfile,n.profileSaved,n.showCommonErrorAlert,e):n.commonAjax(n.masterDataService.updateApplicationProfile,n.profileSaved,n.showCommonErrorAlert,e))},n.getApplicationEditedData=function(){var e,t,a=n.state.applicationProfile,r=n.state.editFields;if(a){var o=new we;for(var i in r){r[i]&&"backgroundUrl"!=i&&"pageIcon"!=i&&(o[i]=a[i])}return r.backgroundUrl&&(null===(e=a.backgroundUrl)||void 0===e?void 0:e.startsWith("data:image"))&&(o.backgroundUrl=a.backgroundUrl),r.pageIcon&&(null===(t=a.pageIcon)||void 0===t?void 0:t.startsWith("data:image"))&&(o.pageIcon=a.pageIcon),o}},n.profileSaved=function(e){n.showInfo("Success"),n.props.setApplicationProfile(e.applicationProfile);var t=n.state.editFields;for(var a in t)t[a]=!1;n.setState({editFields:t})},n.masterDataService=n.getServices().masterDataService,n.state.applicationProfile=Object.assign(new we,n.getApplicationProfile()),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),document.title="ApplicationProfileModel Profile"}},{key:"render",value:function(){var e,t,a=this.state.applicationProfile;if(!a)return null;var n=this.state.editFields,r=null!==(e=a.backgroundUrl)&&void 0!==e?e:"",i=null!==(t=a.pageIcon)&&void 0!==t?t:"";return o.a.createElement("div",{id:"ApplicationProfileModel",className:"section-body container-fluid"},o.a.createElement("h2",null,"Application Profile"),o.a.createElement(Me,{title:"Profile Data"},o.a.createElement("form",{onSubmit:this.saveRecord},o.a.createElement("div",{className:"container-fluid text-center",style:{marginBottom:"10px"}},o.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:r.startsWith("data:image")?r:ue()+r}),o.a.createElement(Jt,{name:"backgroundUrl",edit:n.backgroundUrl,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),o.a.createElement(Ct,{label:"Name"},o.a.createElement(Kt,{edit:n.name,updateProperty:this.updateProfileProperty,name:"name",toggleInput:this.toggleInput,value:a.name})),o.a.createElement(Ct,{label:"Welcoming Message"},o.a.createElement(Kt,{edit:n.welcomingMessage,updateProperty:this.updateProfileProperty,name:"welcomingMessage",toggleInput:this.toggleInput,value:a.welcomingMessage})),o.a.createElement(Ct,{label:"Short Description"},o.a.createElement(Kt,{edit:n.shortDescription,updateProperty:this.updateProfileProperty,name:"shortDescription",toggleInput:this.toggleInput,value:a.shortDescription})),o.a.createElement(Ct,{label:"Address"},o.a.createElement(Kt,{edit:n.address,updateProperty:this.updateProfileProperty,name:"address",toggleInput:this.toggleInput,value:a.address})),o.a.createElement(Ct,{label:"About"},o.a.createElement(Kt,{edit:n.about,updateProperty:this.updateProfileProperty,name:"about",toggleInput:this.toggleInput,value:a.about})),o.a.createElement(Ct,{label:"Contact"},o.a.createElement(Kt,{edit:n.contact,updateProperty:this.updateProfileProperty,name:"contact",toggleInput:this.toggleInput,value:a.contact})),o.a.createElement(Ct,{label:"Background Color"},o.a.createElement(Kt,{type:"color",edit:n.color,updateProperty:this.updateProfileProperty,name:"color",toggleInput:this.toggleInput,value:a.color})),o.a.createElement(Ct,{label:"Font Color"},o.a.createElement(Kt,{type:"color",edit:n.fontColor,updateProperty:this.updateProfileProperty,name:"fontColor",toggleInput:this.toggleInput,value:a.fontColor})),o.a.createElement(Ct,{label:"Page Icon"},o.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:i.startsWith("data:image")?i:ue()+i}),o.a.createElement(Jt,{name:"pageIcon",edit:n.pageIcon,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),o.a.createElement(Ct,null,this.state.fieldChanged()?o.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save"}):null))))}}]),a}(Re),ra=Object(p.f)(Object(he.b)(ge,(function(e){return{setApplicationProfile:function(t){return e(function(e){return{type:"SET_APPLICATION_PROFILE",payload:{applicationProfile:e},meta:{type:"SET_APPLICATION_PROFILE"}}}(t))}}}))(na)),oa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,!1)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="About Us"}},{key:"render",value:function(){var e=this.getApplicationProfile();return o.a.createElement("div",{className:"container-fluid",style:{marginTop:"20px"}},o.a.createElement("h2",null,"About Us"),o.a.createElement(Me,{title:"Application"},o.a.createElement(Ct,{label:"Name"},e.name),o.a.createElement(Ct,null,o.a.createElement("i",null,e.shortDescription)),o.a.createElement(Ct,{label:"Contact"},e.contact),o.a.createElement(Ct,{label:"Address"},e.address)),o.a.createElement("p",null),o.a.createElement(Me,{title:"Development Mode"}),o.a.createElement("p",null))}}]),a}(Re),ia=Object(p.f)(Object(he.b)(ge)(oa)),la=(a(43),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("svg",{viewBox:"0 0 600 600",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},o.a.createElement("g",{className:"icon-svg-long",stroke:"black",fill:"transparent","stroke-width":"2"}," ",o.a.createElement("path",{fill:"none","stroke-width":"6",stroke:"rgb(0,176,80)",d:"M 204 178 Q 332 108 422 215Q 489 313 413 414Q 336 494 228 452Q 113 387 144 258"}),o.a.createElement("path",{fill:"none","stroke-width":"6",stroke:"rgb(0,176,80)",d:"M 169 143 Q 315 53 440 161Q 508 229 497 342"}),o.a.createElement("path",{fill:"none","stroke-width":"6",stroke:"rgb(0,176,80)",d:"M 442 455 Q 329 554 195 491Q 71 413 92 268Q 107 213 135 178"}),o.a.createElement("path",{fill:"none","stroke-width":"6",stroke:"rgb(0,176,80)",d:"M 497 342 L 497 342 L 497 521.6000061035156 L 442 455 "}),o.a.createElement("path",{fill:"none","stroke-width":"6",stroke:"rgb(0,176,80)",d:"M 169 143 L 169 143 L 204 178 "}),o.a.createElement("path",{fill:"none","stroke-width":"6",stroke:"rgb(0,176,80)",d:"M 135 178 L 135 178 L 300 341 L 300 191.60000610351562 L 348.75 191.60000610351562 L 348.75 410.6000061035156 L 301.75 410.6000061035156 L 144 258 "})))}}]),a}(r.Component)),sa=function e(){Object(m.a)(this,e),this.loading=!1,this.displayName="",this.username="",this.editPassword="",this.editPasswordRepeat=""},ca=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state=new sa,n.userService=void 0,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.saveUser=function(){var e=new de;e.editPassword=n.state.editPassword.trim(),e.username=n.state.username.trim(),e.displayName=n.state.displayName.trim(),n.commonAjax(n.userService.saveUser,n.userSaved,n.showCommonErrorAlert,e)},n.userSaved=function(e){n.showConfirmation("Success").then((function(e){n.backToLogin()}))},n.passwordMatch=function(){return""!=n.state.editPassword.trim()&&n.state.editPassword.trim()==n.state.editPasswordRepeat.trim()},n.fieldComplete=function(){return""!=n.state.displayName.trim()&&""!=n.state.username.trim()&&""!=n.state.editPassword.trim()&&""!=n.state.editPasswordRepeat.trim()},n.userService=n.getServices().userService,n}return Object(s.a)(a,[{key:"register",value:function(e){if(e.preventDefault(),this.fieldComplete()){if(0==this.passwordMatch())return void this.showCommonErrorAlert("Password mismatch");this.saveUser()}else this.showCommonErrorAlert("Field is not complete")}},{key:"componentDidMount",value:function(){document.title="Register",this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"componentDidUpdate",value:function(){this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"RegisterForm",className:"Register-wrapper",style:{margin:0,padding:0}},o.a.createElement("div",{className:"text-center",style:{marginTop:"25px"}},o.a.createElement(la,null)),o.a.createElement("form",{name:"Register",onSubmit:function(t){e.register(t)},method:"POST",className:"form-signin text-center"},o.a.createElement(da,{name:"username",value:this.state.username,onChange:this.handleInputChange}),o.a.createElement(da,{name:"displayName",value:this.state.displayName,onChange:this.handleInputChange}),o.a.createElement(ua,{name:"editPassword",value:this.state.editPassword,onChange:this.handleInputChange}),o.a.createElement(ua,{name:"editPasswordRepeat",value:this.state.editPasswordRepeat,onChange:this.handleInputChange}),this.state.loading?o.a.createElement(Lt,null):o.a.createElement("button",{className:"btn text-light",style:{backgroundColor:"rgb(9,26,78)"},type:"submit"},"Register"),o.a.createElement("p",null)))}}]),a}(Re),ua=function(e){var t=e.name,a=e.value,n=e.onChange;return o.a.createElement(r.Fragment,null,o.a.createElement("label",{className:"sr-only"},"Password"),o.a.createElement("input",{style:{borderColor:"rgb(9,26,78)"},name:t,value:a,onChange:n,type:"password",id:"inputPassword",className:"form-control",placeholder:t,required:!0}),o.a.createElement("p",null))},da=function(e){var t=e.name,a=e.value,n=e.onChange;return o.a.createElement(r.Fragment,null,o.a.createElement("label",{className:"sr-only"},"Username"),o.a.createElement("input",{style:{borderColor:"rgb(9,26,78)"},name:t,value:a,onChange:n,type:"text",id:"username",className:"form-control",placeholder:t,required:!0,autoFocus:!0}),o.a.createElement("p",null))},ma=Object(p.f)(Object(he.b)(ge,(function(e){return{}}))(ca)),pa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).videoWidth=40,e.videoHeight=40,e}return a}(b);!function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO_AUDIO=1]="VIDEO_AUDIO"}(ht||(ht={}));var fa,ha=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getMediaStreamConfig=function(){console.debug("this.mediaShare: ",e.mediaShare);var t={width:{ideal:e.config.videoWidth},height:{ideal:e.config.videoHeight}};return{video:e.mediaShare==ht.VIDEO_AUDIO&&t,audio:!0}},e.mediaShare=ht.VIDEO_AUDIO,e.started=!0,e.code=y(),e.active=!1,e.user=void 0,e.members=[],e.chats=[],e.config=new pa,e.addMember=function(t){return e.members.push(t),Object(c.a)(e)},e.isAdmin=function(t){var a;return!!t&&(null===(a=e.user)||void 0===a?void 0:a.id)==t.id},e.removeMember=function(t){for(var a=0;a<e.members.length;a++){var n=e.members[a];if(t.code==n.code){e.members.splice(a,1);break}}return Object(c.a)(e)},e.addMessage=function(t){return e.chats.push(t),Object(c.a)(e)},e.clone=function(){return Object.assign(new a,Object(c.a)(e))},e}return Object(s.a)(a,null,[{key:"clone",value:function(e){return Object.assign(new a,e)}}]),a}(b),ga=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e,t;return 0==this.props.show?null:o.a.createElement("div",{style:this.props.style,className:"alert alert-warning "+(null!==(e=this.props.className)&&void 0!==e?e:"")},null!==(t=this.props.children)&&void 0!==t?t:"Error Occured")}}]),a}(r.Component),va=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return o.a.createElement("thead",null,o.a.createElement("tr",null,t.map((function(e){return o.a.createElement("th",{key:y()},e)}))))},ba=function e(){Object(m.a)(this,e),this.loading=!1,this.room=void 0},Ea=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,"Conference",!0)).state=new ba,n.publicConferenceService=void 0,n.recordLoaded=function(e){e.conferenceRoom&&n.setState({room:Object.assign(new ha,e.conferenceRoom)})},n.startLoading=function(){n.setState({loading:!0})},n.endLoading=function(){n.setState({loading:!1})},n.getRoom=function(){n.commonAjax(n.publicConferenceService.getRoom,n.recordLoaded,n.showCommonErrorAlert)},n.createRoom=function(){n.commonAjax(n.publicConferenceService.generateRoom,n.recordLoaded,n.showCommonErrorAlert)},n.setActiveStatus=function(e){n.commonAjax(n.publicConferenceService.setActiveStatus,(function(){n.activeStatusChanged(e)}),n.showCommonErrorAlert,e)},n.activeStatusChanged=function(e){var t=n.state.room;t&&(t.active=e,n.setState({room:t}))},n.enterRoom=function(){n.state.room&&n.props.history.push({pathname:"/conference/enterroom",state:{roomCode:n.state.room.code}})},n.removeMember=function(e){n.showConfirmationDanger("Remove "+e.displayName+"?").then((function(t){t&&n.doRemoveMember(e)}))},n.memberRemoved=function(e,t){var a=n.state.room;a&&(a.removeMember(t),n.setState({room:a}))},n.doRemoveMember=function(e){n.commonAjax(n.publicConferenceService.removeRoomMember,(function(t){return n.memberRemoved(t,e)}),n.showCommonErrorAlert,e.code)},n.publicConferenceService=n.getServices().publicConferenceService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(Ue.a)(Object(xe.a)(a.prototype),"componentDidMount",this).call(this),this.getRoom()}},{key:"render",value:function(){var e=this.getLoggedUser();if(!e)return null;var t=this.state.room;return o.a.createElement("div",{id:"ConferenceMain",className:"section-body container-fluid"},o.a.createElement("h2",null,"Conference Main"),o.a.createElement("div",{className:"alert alert-info"},"Welcome, ",o.a.createElement("strong",null,e.displayName,"  ")),o.a.createElement(Me,{title:"My Room"},this.state.loading?o.a.createElement(Lt,{style:{marginBottom:150}}):o.a.createElement(r.Fragment,null,t?o.a.createElement(ya,{enterRoom:this.enterRoom,removeMember:this.removeMember,setActiveStatus:this.setActiveStatus,room:t}):o.a.createElement(ga,{className:"text-center"},o.a.createElement("h4",null,"No Data"),o.a.createElement(ot,{iconClassName:"fas fa-video",children:"Create",onClick:this.createRoom})),o.a.createElement(ot,{iconClassName:"fas fa-sync",children:"Reload",onClick:this.getRoom}))))}}]),a}(Te),ya=function(e){var t=Object.assign(new ha,e.room);return o.a.createElement("div",null,o.a.createElement(Ct,{label:"Code"},t.code),o.a.createElement(Ct,{label:"Created"},t.createdDate?new Date(t.createdDate).toLocaleString():"-"),o.a.createElement(Ct,{label:"Active"},o.a.createElement(Tt,{active:t.active,onClick:e.setActiveStatus})),t.active?o.a.createElement(Ct,null,o.a.createElement(ot,{className:"btn btn-warning btn-sm",onClick:e.enterRoom,children:"Enter Room"})):null,o.a.createElement(Ct,{label:"Members"}),o.a.createElement(Ca,{removeMember:e.removeMember,members:t.members,room:t}))},Ca=function(e){return o.a.createElement("table",{className:"table"},va("No","Name","Action"),o.a.createElement("tbody",null,e.members.map((function(t,a){var n=e.room.isAdmin(t);return o.a.createElement("tr",{key:"room_member_"+a},o.a.createElement("td",null,a+1),o.a.createElement("td",null,t.displayName,n?o.a.createElement("i",null,"\xa0- admin"):""),o.a.createElement("td",null,n?null:o.a.createElement(ot,{onClick:function(a){return e.removeMember(t)},iconClassName:"fas fa-times",className:"btn btn-danger btn-sm",children:"Remove"})))}))))},Sa=Object(p.f)(Object(he.b)(ge)(Ea)),Oa=function e(){Object(m.a)(this,e),this.roomCode=void 0,this.room=void 0,this.loading=!1},Na=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,"Conference",!0)).state=new Oa,n.publicConferenceService=void 0,n.recordLoaded=function(e){n.hasCodeOnURI()?n.enterRoom():n.setState({room:e.conferenceRoom})},n.startLoading=function(){n.setState({loading:!0})},n.endLoading=function(){n.setState({loading:!1})},n.getRoom=function(e){e&&e.preventDefault(),n.state.roomCode&&n.commonAjax(n.publicConferenceService.getRoomByCode,n.recordLoaded,n.showCommonErrorAlert,n.state.roomCode)},n.enterRoom=function(){n.state.roomCode&&n.props.history.push({pathname:"/conference/enterroom",state:{roomCode:n.state.roomCode}})},n.hasCodeOnURI=function(){return void 0!=n.props.match.params.code},n.publicConferenceService=n.getServices().publicConferenceService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(Ue.a)(Object(xe.a)(a.prototype),"componentDidMount",this).call(this),this.hasCodeOnURI()&&this.setState({roomCode:this.props.match.params.code},this.getRoom)}},{key:"render",value:function(){var e=this.getLoggedUser();return e?o.a.createElement("div",{id:"ConferenceRoom",className:"section-body container-fluid"},o.a.createElement("h2",null,"Conference Room"),o.a.createElement("div",{className:"alert alert-info"},"Welcome, ",o.a.createElement("strong",null,e.displayName,"  "),o.a.createElement("form",{onSubmit:this.getRoom},o.a.createElement(Ct,{label:"Code"},o.a.createElement("input",{required:!0,className:"form-control",name:"roomCode",onChange:this.handleInputChange})),o.a.createElement(Ct,null,o.a.createElement("input",{type:"submit",className:"btn btn-success"})))),this.state.loading?o.a.createElement(Lt,null):this.state.room?o.a.createElement(ka,{enterRoom:this.enterRoom,room:this.state.room}):o.a.createElement(ga,{children:"No Data"})):null}}]),a}(Te),ka=function(e){var t=Object.assign(new ha,e.room);return o.a.createElement(Me,null,o.a.createElement(Ct,{label:"Code"},t.code),o.a.createElement(Ct,{label:"Created"},t.createdDate?new Date(t.createdDate).toLocaleString():"-"),o.a.createElement(Ct,{label:"Active"},1==t.active?"Yes":"No"),o.a.createElement(Ct,null,o.a.createElement(ot,{onClick:e.enterRoom},"Enter Room")),o.a.createElement(Ct,{label:"Members"}),o.a.createElement(wa,{members:t.members,room:t}))},wa=function(e){return o.a.createElement("table",{className:"table"},va("No","Name","Action"),o.a.createElement("tbody",null,e.members.map((function(t,a){return o.a.createElement("tr",{key:"room_member_"+a},o.a.createElement("td",null,a+1),o.a.createElement("td",null,t.displayName,e.room.isAdmin(t)?o.a.createElement("i",null,"\xa0- admin"):""),o.a.createElement("td",null))}))))},Ra=Object(p.f)(Object(he.b)(ge)(Na)),ja=function e(){Object(m.a)(this,e),this.loading=!1,this.username="",this.editPassword=""},Da=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state=new ja,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.updateCredentialProperty=function(e){var t=e.target,a=t.getAttribute("name");null!=a&&n.setState(Object(P.a)({},a,t.value))},n}return Object(s.a)(a,[{key:"login",value:function(e){e.preventDefault(),this.props.performLogin(this.state.username,this.state.editPassword,this)}},{key:"componentDidMount",value:function(){document.title="Login",this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"componentDidUpdate",value:function(){console.debug("Login update"),console.debug("logged in : ",this.props.loginStatus),console.debug("logged user : ",this.getLoggedUser()),this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"LoginForm",className:"login-wrapper",style:{margin:0,padding:0}},o.a.createElement("div",{className:"text-center",style:{marginTop:"25px"}},o.a.createElement(la,null)),o.a.createElement("form",{name:"login",onSubmit:function(t){e.login(t)},method:"POST",className:"form-signin text-center"},o.a.createElement(Aa,{value:this.state.username,onChange:this.updateCredentialProperty}),o.a.createElement("p",null),o.a.createElement(Ia,{value:this.state.editPassword,onChange:this.updateCredentialProperty}),o.a.createElement("p",null),this.state.loading?o.a.createElement(Lt,null):o.a.createElement(r.Fragment,null,o.a.createElement("button",{className:"btn text-light",style:{marginRight:"5px",backgroundColor:"rgb(9,26,78)"},type:"submit"},"Sign in"),o.a.createElement(ot,{className:"btn btn-light border border-dark ",to:"register",children:"Register"})),o.a.createElement("input",{name:"transport_type",type:"hidden",value:"rest"}),o.a.createElement("p",null)))}}]),a}(Re),Ia=function(e){var t=e.value,a=e.onChange;return o.a.createElement(r.Fragment,null,o.a.createElement("label",{className:"sr-only"},"Password"),o.a.createElement("input",{style:{borderColor:"rgb(9,26,78)"},name:"editPassword",value:t,onChange:a,type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0}))},Aa=function(e){var t=e.value,a=e.onChange;return o.a.createElement(r.Fragment,null,o.a.createElement("label",{className:"sr-only"},"Username"),o.a.createElement("input",{style:{borderColor:"rgb(9,26,78)"},name:"username",value:t,onChange:a,type:"text",id:"username",className:"form-control",placeholder:"Username",required:!0,autoFocus:!0}))},Pa=Object(p.f)(Object(he.b)(ge,(function(e){return{performLogin:function(t,a,n){return e(function(e,t,a){return a.startLoading(),{type:"do_login",payload:{},meta:{type:"do_login",url:ce().concat("login?username="+e+"&password="+t+"&transport_type=rest"),app:a}}}(t,a,n))}}}))(Da)),La=(a(84),function e(){Object(m.a)(this,e),this.showChat=!1,this.chatBody="",this.unreadCount=0,this.loading=!1}),Ta=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).state=new La,n.publicConferenceService=void 0,n.startLoading=function(){n.setState({loading:!0})},n.endLoading=function(){n.setState({loading:!1})},n.sendMessage=function(){n.commonAjax(n.publicConferenceService.sendChatMessage,(function(e){n.setState({chatBody:""})}),n.showCommonErrorAlert,n.state.chatBody,n.props.roomCode)},n.updateChatBody=function(e){n.setState({chatBody:e.target.value})},n.publicConferenceService=n.getServices().publicConferenceService,n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("form",{style:{padding:5},onSubmit:function(t){t.preventDefault(),e.sendMessage()}},o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{required:!0,value:this.state.chatBody,className:"form-control",name:"chatBody",onChange:this.updateChatBody}),o.a.createElement("div",{className:"input-group-append"},o.a.createElement(Ma,{loading:this.state.loading}))))}}]),a}(Re),Ma=function(e){return e.loading?o.a.createElement("button",{className:"btn btn-light btn-sm",type:"button",disabled:!0},o.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),o.a.createElement("span",{className:"sr-only"},"Loading...")):o.a.createElement("button",{type:"submit",className:"btn btn-light btn-sm"},o.a.createElement("i",{className:"fas fa-paper-plane"}))},Fa=Object(he.b)(ge)(Ta),_a=function e(){Object(m.a)(this,e),this.showChat=!1,this.unreadCount=0},Ua=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=new _a,n.chatCount=0,n.readCount=0,n.roomChatCount=function(){return n.props.room.chats.length},n.getMessages=function(){return n.props.room.chats},n.toggleChat=function(){1==!n.state.showChat?n.setState({showChat:!n.state.showChat,unreadCount:0},(function(){n.readCount=n.roomChatCount()})):n.setState({showChat:!n.state.showChat})},n.chatCount=n.roomChatCount(),n.state.unreadCount=n.chatCount,n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.chatCount<this.roomChatCount()&&this.state.unreadCount<this.roomChatCount()&&0==this.state.showChat&&(this.setState({unreadCount:this.roomChatCount()-this.readCount}),this.chatCount=this.roomChatCount())}},{key:"render",value:function(){var e=this.state.showChat;return o.a.createElement("div",{style:{position:"absolute"}},o.a.createElement("div",{className:"chat-panel bg-success border border-success rounded"},e?o.a.createElement(o.a.Fragment,null,o.a.createElement(xa,{chats:this.getMessages()}),o.a.createElement(Fa,{roomCode:this.props.room.code})):null,o.a.createElement("div",{onClick:this.toggleChat,className:"text-center"},o.a.createElement(ot,{className:"btn btn-success",iconClassName:e?"fas fa-angle-down":"fas fa-angle-up",onClick:this.toggleChat},"Chat",this.state.unreadCount>0?" ("+this.state.unreadCount+")":null))))}}]),a}(r.Component),xa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).lastChatRef=o.a.createRef(),e.scrollToLastChat=function(){e.lastChatRef.current&&e.lastChatRef.current.scrollIntoView()},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.scrollToLastChat()}},{key:"componentDidUpdate",value:function(){this.scrollToLastChat()}},{key:"render",value:function(){var e=this,t=this.props;return o.a.createElement("div",{className:"chat-list-wrapper bg-white border  border-success"},o.a.createElement("div",{style:{padding:2}},t.chats.map((function(a,n){var i,l;return o.a.createElement(r.Fragment,{key:"chat-"+n},o.a.createElement("div",{ref:n==t.chats.length-1?e.lastChatRef:void 0,className:"chat-item border rounded bg-light"},o.a.createElement("div",{style:{width:"100%",fontSize:"0.5em"},className:"text-right  "},o.a.createElement("strong",null,null===(i=a.user)||void 0===i?void 0:i.displayName)),o.a.createElement("span",null,null===(l=a.date)||void 0===l?void 0:l.toLocaleDateString()),o.a.createElement("p",null,a.body)),o.a.createElement("p",null))}))))}}]),a}(r.Component),Ba=a(46),Wa={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"turn:206.253.167.195:3478",username:"username1",credential:"password1"}]},Ha=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(m.a)(this,a),(r=t.call(this,Wa)).memberCode=void 0,r.created=new Date,r.updated=void 0,r.component=void 0,r.initialize=function(){r.ontrack=function(e){console.debug("=========== ON TRACk ========="),console.debug("ev.track: ",e.track),console.debug("stream: ",e.streams),r.component.addLog("ON TRACK");var t=r.component.videoRef.current;r.component.profileImageRef.current&&(r.component.profileImageRef.current.style.display="none"),t?(t.srcObject=e.streams[0],t.style.display="block",t.addEventListener("canplay",(function(e){this.play()}),!1)):console.debug("ON TRACK VIDEO NOT FOUND")},r.onicecandidate=function(e){r.component.addLog("onicecandidate event"),console.debug("peerConnection on ICE Candidate: ",e.candidate),e.candidate?r.component.sendHandshake("candidate",e.candidate):console.warn("Candiate is NULL: ",e)},r.onsignalingstatechange=function(e){var t=r.signalingState;console.debug("PEER CONNECTION Signaling state: ",t),r.component.addLog("Peer SignalingState | "+t),"stable"==t&&console.debug("STABLE RTCPeerConnection: ",Object(c.a)(r))},r.ondatachannel=function(e){console.debug("ondatachannel: ",r.memberCode,e)},r.onicecandidateerror=function(e){console.error("Error On Candidate: ",r.memberCode,e)},r.onconnectionstatechange=function(e){console.debug("Connection State: ",this.connectionState),this.connectionState}},r.senderInfo=function(){for(var e=" Sender : ",t=0;t<r.getSenders().length;t++){var a=r.getSenders()[t];try{var n;e+=" - KIND: "+(null===(n=a.track)||void 0===n?void 0:n.kind)}catch(o){}}return e},r.memberCode=e,r.component=n,r.initialize(),r}return Object(s.a)(a,[{key:"performCreateAnswer",value:function(e){var t=this;this.createAnswer().then((function(a){t.component.addLog("CREATE ANSWER TO :"+e),t.setLocalDescription(a).then((function(n){t.component.sendHandshake("answer",a,e)})).catch((function(e){return t.component.errorSessionDescription(e,"ANSWER")}))})).catch((function(e){return console.error("ERROR CREATE ANSWER: ",e)}))}}]),Object(s.a)(a,[{key:"performCreateOffer",value:function(e){var t=this;this.createOffer().then((function(a){t.component.addLog("CREATE OFFER TO :"+t.memberCode+"this.trackAdded: "+e+t.senderInfo()),t.setLocalDescription(a).then((function(e){t.component.sendHandshake("offer",a)})).catch((function(e){return t.component.errorSessionDescription(e,"CREATE OFFER")}))})).catch((function(e){console.error("ERROR CREATE OFFER: ",e)}))}}]),a}(Object(Ba.a)(RTCPeerConnection)),Ya=function e(){Object(m.a)(this,e),this.logs=[]},qa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=new Ya,n.id=y(),n.enabled=!1,n.clearLog=function(){n.setState({logs:[]})},n.setLogEnabled=function(e){n.enabled=e,e||n.clearLog()},n.addLog=function(e){var t=n.state.logs;n.enabled&&(t.push(e),n.setState({logs:t}))},n.getMappedLog=function(){for(var e=n.state.logs,t=new Map,a=new Array,r=0,o=0;o<e.length;o++){var i=e[o],l=t.get(r+"-"+i);l?t.set(r+"-"+i,l+1):(r++,t.set(r+"-"+i,1))}return t.forEach((function(e,t){1==e?a.push(t):a.push(t+" ("+e+")")})),a},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;if(0==this.props.show)return o.a.createElement(o.a.Fragment,null);var t=this.getMappedLog();return o.a.createElement("ul",{className:"text-left",style:{listStyleType:"none",fontSize:"0.7em"}},o.a.createElement("li",null,o.a.createElement(ot,{className:"btn btn-light btn-sm",iconClassName:"fas fa-trash",onClick:this.clearLog},"Clear Log")),t.map((function(t,a){return o.a.createElement("li",{key:"log-"+a+"-"+e.id},o.a.createElement("code",{className:"text-dark"},t))})))}}]),a}(r.Component),Va=function e(){Object(m.a)(this,e),this.videoVisible=!1,this.showLog=!1,this.enableLog=!1},Ga=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).trackAdded=!1,n.peerConnection=void 0,n.logRef=o.a.createRef(),n.videoRef=o.a.createRef(),n.profileImageRef=o.a.createRef(),n.tracks=new Array,n.stream=void 0,n.trackExist=function(e){for(var t=0;t<n.tracks.length;t++){if(n.tracks[t].id==e)return!0}return!1},n.setLogEnabled=function(e){n.setState({enableLog:e},(function(){n.logRef.current&&n.logRef.current.setLogEnabled(e)}))},n.addStream=function(e){try{var t=n.getConnection();0==n.trackExist(e.getTracks()[0].id)&&(n.tracks.push(e.getTracks()[0]),t.addTrack(e.getTracks()[0],e),n.addLog("Add Track: "+e.getTracks()[0].kind)),0==n.trackExist(e.getTracks()[1].id)&&(n.tracks.push(e.getTracks()[1]),t.addTrack(e.getTracks()[1],e),n.addLog("Add Track: "+e.getTracks()[1].kind)),n.trackAdded=!0,n.stream=e}catch(a){console.error("ERROR ADD TRACK: ",a)}},n.addLog=function(e){n.logRef.current&&n.logRef.current.addLog(e)},n.getConnection=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return n.addLog("getPeerConnection newInstance: "+e),n.peerConnection&&1!=e||(console.debug("generate new RTCPeer Connection"),n.tracks=[],n.peerConnection=new Ha(n.getMember().code,Object(c.a)(n))),n.peerConnection},n.sendHandshake=function(e,t,a){var r;za(n.props.user.code,null!==a&&void 0!==a?a:null!==(r=n.getMember().code)&&void 0!==r?r:"UNDEFINED",n.getRoom().code,{event:e,data:t})},n.componentDidMount=function(){n.videoRef.current&&(n.videoRef.current.style.display="none")},n.createOffer=function(e){var t=n.getConnection(!0);n.addStream(e),t.performCreateOffer(n.trackAdded)},n.errorSessionDescription=function(e,t){console.error("ERROR SET SESSION DESCRIPTION while ",t,": ",e)},n.requestDial=function(){n.addLog("REQUEST CALLING FROM :"+n.getMember().code),n.sendHandshake("dial",{})},n.handleOffer=function(e,t,a){n.addLog("GET OFFER FROM :"+e+", this.trackAdded: "+n.trackAdded+" > "+n.tracks.length);var r=n.getConnection(!0);a?n.addStream(a):n.addLog("GET OFFER mediaStream missing"),r.setRemoteDescription(t).then((function(t){n.createAnswer(e)})).catch((function(e){return n.errorSessionDescription(e,"HANDLE OFFER")}))},n.createAnswer=function(e){n.getConnection().performCreateAnswer(e)},n.handleCandidate=function(e,t){n.addLog("GET CANDIDATE FROM :"+e),n.getConnection().addIceCandidate(new RTCIceCandidate(t)).catch((function(e){return n.errorSessionDescription(e,"HANDLE CANDIDATE")}))},n.handleAnswer=function(e,t){n.addLog("GET ANSWER FROM :"+e),n.getConnection().setRemoteDescription(t).catch((function(e){return n.errorSessionDescription(e,"SET ANSWER")}))},n.toggleLog=function(e){n.setState({showLog:e})},n.isCurrentUser=function(){return n.props.user.code==n.props.member.code},n.redial=function(){return n.props.redial(n.getMember().code)},n.getMember=function(){return n.props.member},n.getRoom=function(){return n.props.room},n.state=new Va,n}return Object(s.a)(a,[{key:"render",value:function(){if(!this.props.user)return console.debug("LOGGED USER: ",this.props.user),o.a.createElement("h3",null,"NOT AUTHENTICATED");var e=this.getRoom(),t=this.getMember();return o.a.createElement("div",{className:"col-md-3 col-lg-2 text-center border border-dark rounded"},o.a.createElement("span",{style:{fontSize:"0.6em",wordWrap:"unset"}},t.displayName," ",e.isAdmin(t)?o.a.createElement("i",{className:"fas fa-check-circle"}):""),o.a.createElement("hr",null),o.a.createElement("div",null,this.isCurrentUser()?o.a.createElement("h2",null,"You"):o.a.createElement(r.Fragment,null,o.a.createElement("video",{style:{margin:"auto"},height:80,width:80,controls:!0,ref:this.videoRef}),o.a.createElement("img",{ref:this.profileImageRef,className:"border border-dark rounded-circle",src:ue()+t.profileImage,width:70,height:70}),o.a.createElement("br",null),o.a.createElement(ot,{className:"btn btn-light btn-sm",iconClassName:"fas fa-phone",onClick:this.redial},"Dial"))),this.state.enableLog?o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:"text-center"},"Log Options"),o.a.createElement(Tt,{yesLabel:"Show",active:this.state.showLog,onClick:this.toggleLog,noLabel:"Hide"}),o.a.createElement(qa,{show:this.state.showLog,ref:this.logRef})):null)}}]),a}(r.Component),za=function(e,t,a,n){var r=y();console.debug("SEND WEBSOCKET, event: ",n.event),console.debug(">> SEND WEBSOCKET from ",e," to "+t+" | "+r+" :"+n.event),Q().getState().servicesState.services.websocketService.sendToWebsocket("/app/publicconference/webrtc",{realtimeHandshake:{origin:e,roomCode:a,eventId:r,destination:t,webRtcObject:n}})},Ka=function(e){var t=e.user,a=e.room.members;return o.a.createElement(Me,{title:"Members ("+a.length+")"},o.a.createElement("div",{className:"container-fluid",style:{overflow:"scroll"}},o.a.createElement("div",{className:"row"},a.map((function(a,n){return a=de.clone(a),e.memberRefs.get(a.getCode())||e.memberRefs.set(a.getCode(),o.a.createRef()),o.a.createElement(Ga,{redial:e.dialPeerByCode,ref:e.memberRefs.get(a.getCode()),user:t,member:a,room:e.room,key:"vid-stream-"+a.code})})))))},Xa=function(e){return e.message?o.a.createElement("div",{className:"alert alert-primary"},e.message):null},Qa=function(e){return e.message?o.a.createElement(r.Fragment,null,o.a.createElement(Pt,null,"Error: ",e.message),o.a.createElement(ot,{iconClassName:"fas fa-redo",onClick:e.retry},"Retry Media")):null},Ja=function(e){var t=e.room.clone(),a=t.config;return o.a.createElement(Me,null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-4"},t.started?o.a.createElement("video",{muted:!0,ref:e.videoRef,height:200,width:200,controls:!0}):o.a.createElement(ga,null,"Please Start MEDIA")),o.a.createElement("div",{className:"col-md-8"},o.a.createElement(Ct,{label:"Code"},t.code),o.a.createElement(Ct,{label:"Created"},t.createdDate?new Date(t.createdDate).toLocaleString():"-"),o.a.createElement(Ct,{label:"Size"},a.videoWidth," x ",a.videoHeight),o.a.createElement(Ct,{label:"Enable Log"},o.a.createElement(Tt,{active:e.logEnabled,onClick:e.setLogEnabled})),o.a.createElement(Ct,null,o.a.createElement(ot,{className:"btn btn-outline-danger",iconClassName:"fas fa-sign-out-alt",onClick:e.leaveRoom},e.room.isAdmin(e.user)?"Invalidate":"Leave"),"\xa0",o.a.createElement(ot,{className:"btn btn-outline-success",iconClassName:"fas fa-phone",onClick:e.redialAll},"Redial")))))};!function(e){e[e.CAMERA=0]="CAMERA",e[e.SCREEN=1]="SCREEN"}(fa||(fa={}));var $a=function e(){Object(m.a)(this,e),this.roomCode=void 0,this.room=void 0,this.loading=!1,this.streamType=fa.CAMERA,this.errorMessage=void 0,this.logEnabled=!1,this.mediaStreamReady=!1},Za={video:{width:{ideal:40},height:{ideal:40}},audio:!0},en=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).state=new $a,n.publicConferenceService=void 0,n.memberRefs=new Map,n.videoRef=o.a.createRef(),n.videoStream=void 0,n.videoStreamError=!1,n.peerToDials=new Array,n.offersToHandle=new Map,n.wsService=void 0,n.handshakeHandler=function(e,t,a){switch(e){case"offer":n.handleOffer(t,a);break;case"answer":n.handleAnswer(t,a);break;case"candidate":n.handleCandidate(t,a);break;case"dial":n.handleDial(t,a);break;default:console.warn("NO HANDLER FOR: ",e)}},n.setLogEnabled=function(e){n.setState({logEnabled:e},(function(){return n.memberRefs.forEach((function(t){t.current&&t.current.setLogEnabled(e)}))}))},n.getMemberRef=function(e){return new Promise((function(t,a){var r;e==(null===(r=n.getLoggedUser())||void 0===r?void 0:r.code)&&a(new Error("Not allowed"));var o=n.memberRefs.get(e);if(console.debug("get memberRef code: ",e," = ",o),!o||!o.current)return console.debug("memberRef not exist, trying one second later"),void F((function(){if(!o||!o.current)return console.debug("memberRef not exist"),void a(new Error("Member ref not found"));t(o.current)}),1e3);t(o.current)}))},n.handleDial=function(e,t){console.debug("HANDLE ",t.event," FROM : ",e),n.getMemberRef(e).then((function(a){n.videoStream?a.createOffer(n.videoStream):n.offersToHandle.set(e,t.data)}))},n.handleOffer=function(e,t){console.debug("HANDLE ",t.event," FROM : ",e),n.getMemberRef(e).then((function(a){a.handleOffer(e,t.data,n.videoStream),n.videoStream||(a.addLog("No VideoStream at offer: "+e),n.offersToHandle.set(e,t.data))})).catch(console.error)},n.handleAnswer=function(e,t){console.debug("HANDLE ",t.event," FROM : ",e),n.getMemberRef(e).then((function(a){a.handleAnswer(e,t.data)})).catch(console.error)},n.handleCandidate=function(e,t){console.debug("HANDLE ",t.event," FROM : ",e),n.getMemberRef(e).then((function(a){a.handleCandidate(e,t.data)})).catch(console.error)},n.resetWsCallbacks=function(){n.removeWSSubscriptionCallback("CONFERENCE_STREAMING","PEER_HANDSHAKE"),n.wsService.removeOnConnecCallbacks("USER_JOIN","INIT_MEDIA_STREAM")},n.cleanMediaResources=function(){n.publicConferenceService.cleanMediaStreamResources(n.videoStream)},n.recordLoaded=function(e){e.conferenceRoom?n.setState({room:ha.clone(e.conferenceRoom)},n.initialize):alert("Unexpected Error: ROOM NOT FOUND")},n.initialize=function(){var e;n.addOnWsConnectCallbacks({id:"USER_JOIN",callback:n.notifyUserEnterRoom},{id:"INIT_MEDIA_STREAM",callback:n.initMediaStream}),n.addWebsocketSubscriptionCallback({id:"CONFERENCE_STREAMING",subscribeUrl:"/wsResp/conference/"+n.state.roomCode,callback:n.wsSubscriptionCallback},{id:"PEER_HANDSHAKE",subscribeUrl:"/wsResp/webrtcpublicconference/"+n.state.roomCode+"/"+(null===(e=n.getLoggedUser())||void 0===e?void 0:e.getCode()),callback:n.webRtcHandshake}),n.connectWs()},n.notifyUserEnterRoom=function(){n.commonAjax(n.publicConferenceService.nofityUserEnter,(function(e){}),n.showCommonErrorAlert,n.state.roomCode)},n.webRtcHandshake=function(e){var t,a=e.realtimeHandshake;console.debug("BEGIN webRtcHandshake "),a?a.origin!=(null===(t=n.getLoggedUser())||void 0===t?void 0:t.code)&&n.handleWebRtcHandshake(a.eventId,a.origin,a.webRtcObject):console.debug("realtimeHandshake object not found")},n.handleWebRtcHandshake=function(e,t,a){console.info("webRtcHandshake: ",a.event," FROM ",t),n.handshakeHandler(a.event,t,a),n.videoStream?(console.info("handleStream ",a.event),n.handleStream(n.videoStream)):console.info("VIDEO STREAM NOT AVAILABLE for : ",a.event)},n.wsSubscriptionCallback=function(e){switch(console.info("response.conferenceUpdate: ",e.conferenceUpdate),e.conferenceUpdate){case"PEER_NEW":n.addNewRoomMember(e);break;case"PEER_LEAVE":n.removeRoomMember(e);break;case"PEER_ENTER":n.dialPeer(e);break;case"ROOM_INVALIDATED":n.showInfo("Room Has been invalidated"),n.backToRoomMain();break;case"CHAT_MESSAGE":e.entity&&n.addChatMessage(e.entity)}},n.addChatMessage=function(e){var t=n.state.room;t&&n.setState({room:t.addMessage(e)})},n.dialPeer=function(e){var t,a=n.state.room;if(a){var r=e.user;r&&r.code!=(null===(t=n.getLoggedUser())||void 0===t?void 0:t.code)?(console.info("DIAL MEMBER: ",r.code),a.removeMember(r),n.setState({room:a},(function(){n.reAddMemberAndDial(r)}))):console.info("Prevent Dial MEMBER: ",null===r||void 0===r?void 0:r.code)}},n.reAddMemberAndDial=function(e){var t=n.state.room;t&&(t.addMember(e),n.setState({room:t},(function(){n.videoStream||0!=n.videoStreamError?n.dialPeerByCode(e.code):(console.info("PUSH ",e.code," TO WAITING"),n.peerToDials.push(e.code))})))},n.dialPeerByCode=function(e){var t,a=n.memberRefs.get(e);a&&a.current&&e!=(null===(t=n.getLoggedUser())||void 0===t?void 0:t.code)?n.videoStream||0!=n.videoStreamError?n.videoStream?(console.debug("Will Create OFFER to: ",e),a.current.createOffer(n.videoStream)):a.current.requestDial():n.peerToDials.push(e):console.warn("DIAL MEMBER not allowed")},n.addNewRoomMember=function(e){var t=n.state.room;t&&e.user&&n.updateRoomState(t.addMember(e.user))},n.removeRoomMember=function(e){var t=n.state.room;t&&e.user&&n.updateRoomState(t.removeMember(e.user))},n.updateRoomState=function(e){n.setState({room:ha.clone(e)})},n.backToRoomMain=function(){n.props.history.push("/conference/room")},n.getRoomCodeFromProps=function(){if(n.props.location.state){var e=n.props.location.state.roomCode;e?(document.title="ROOM: "+e,n.setState({roomCode:e},n.getRoom)):n.backToRoomMain()}else n.backToRoomMain()},n.startLoading=function(){n.setState({loading:!0})},n.endLoading=function(){n.setState({loading:!1})},n.getRoom=function(e){e&&e.preventDefault(),n.state.roomCode&&n.commonAjax(n.publicConferenceService.enterRoom,n.recordLoaded,n.showCommonErrorAlert,n.state.roomCode)},n.getMediaStreamConfig=function(){return n.state.room?n.state.room.getMediaStreamConfig():Za},n.initMediaStream=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.debug("INIT MEDIA STREAM video:",n.getMediaStreamConfig().video);var t=window.navigator.mediaDevices.getUserMedia(n.getMediaStreamConfig());t.then((function(t){n.setState({errorMessage:void 0,mediaStreamReady:!0},(function(){n.handleStream(t,!0),1==e&&n.notifyUserEnterRoom()}))})).catch((function(e){console.error("ERROR INIT MEDIA STREAM: ",e),n.videoStreamError=!0,n.setState({errorMessage:new String(e).toString(),mediaStreamReady:!1})}))},n.handleStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.debug("START HANDLE STREAM, update videoSRC: ",t),t&&(n.videoRef.current?n.videoRef.current.srcObject=e:(F((function(){n.videoRef.current?n.videoRef.current.srcObject=e:console.debug("this.videoRef.current not found")}),1e3),console.debug("this.videoRef.current not found, retrying in 1 sec"))),n.videoStream=e,n.videoStreamError=!1,n.checkDialWaiting(),n.checkOffersWaiting(),console.debug("END HANDKE STREAM")},n.checkOffersWaiting=function(){console.debug("this.offersToHandle: ",n.offersToHandle.size),n.offersToHandle.forEach((function(e,t){n.dialPeerByCode(t)})),n.offersToHandle.clear()},n.checkDialWaiting=function(){console.debug("this.peerToDials: ",n.peerToDials.length),0!=n.peerToDials.length&&(n.peerToDials.forEach(n.dialPeerByCode),n.peerToDials=[])},n.leaveRoom=function(){n.showConfirmationDanger("Leave Room?").then((function(e){e&&n.doLeaveRoom()}))},n.doLeaveRoom=function(){n.state.roomCode&&n.commonAjax(n.publicConferenceService.leaveRoom,(function(){n.props.history.push("/conference/room")}),n.showCommonErrorAlert,n.state.roomCode)},n.startStream=function(e){var t=n.state.room;t&&(t.started=!0,t.mediaShare=e,n.cleanMediaResources(),n.setState({room:t},(function(){return n.initMediaStream(!0)})))},n.retryMediaStream=function(){return n.initMediaStream(!0)},n.publicConferenceService=n.getServices().publicConferenceService,n.wsService=n.getServices().websocketService,n}return Object(s.a)(a,[{key:"componentWillUnmount",value:function(){console.debug("WILL UNMOUNT"),this.resetWsCallbacks(),this.cleanMediaResources()}},{key:"componentDidMount",value:function(){this.validateLoginStatus()?this.getRoomCodeFromProps():this.backToLogin()}},{key:"render",value:function(){var e=this.getLoggedUser(),t=this.state.room;return e?o.a.createElement(o.a.Fragment,null,t?o.a.createElement(Ua,{room:t}):null,o.a.createElement("div",{id:"ConferenceRoomSteaming",className:"section-body container-fluid"},o.a.createElement("h2",null,"STREAMING Room"),o.a.createElement("div",{className:"alert alert-info"},"Welcome, ",o.a.createElement("strong",null,e.displayName,"  ")),o.a.createElement(an,{show:this.state.loading}),t?o.a.createElement(r.Fragment,null,o.a.createElement(tn,{startStream:this.startStream}),o.a.createElement("p",null),o.a.createElement(Ja,{setLogEnabled:this.setLogEnabled,logEnabled:this.state.logEnabled,videoRef:this.videoRef,redialAll:this.notifyUserEnterRoom,memberRefs:this.memberRefs,user:e,leaveRoom:this.leaveRoom,room:t}),o.a.createElement("p",null),o.a.createElement(Xa,{message:this.state.mediaStreamReady?"Media Stream Ready":void 0}),o.a.createElement(Qa,{retry:this.retryMediaStream,message:this.state.errorMessage}),o.a.createElement(Ka,{user:e,room:t,memberRefs:this.memberRefs,dialPeerByCode:this.dialPeerByCode})):o.a.createElement(ga,{children:"No Data"}))):null}}]),a}(Re),tn=function(e){return null},an=function(e){return 1==e.show?o.a.createElement(Lt,{style:{zIndex:1e3,position:"absolute",width:"100%",marginTop:20}}):null},nn=Object(p.f)(Object(he.b)(ge)(en)),rn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).ref=o.a.createRef(),n.setSidebarMenus=function(e){n.props.setSidebarMenus(e)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(r.Fragment,null,o.a.createElement(ln,null),o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/home",render:function(e){return o.a.createElement(Vt,null)}}),o.a.createElement(p.a,{exact:!0,path:"/",render:function(e){return o.a.createElement(Vt,null)}}),o.a.createElement(p.a,{exact:!0,path:"/about",render:function(e){return o.a.createElement(ia,null)}}),o.a.createElement(p.a,{exact:!0,path:"/management",render:function(t){return o.a.createElement(Yt,{setSidebarMenus:e.setSidebarMenus})}}),o.a.createElement(p.a,{exact:!0,path:"/management/:code",render:function(t){return o.a.createElement(Yt,{setSidebarMenus:e.setSidebarMenus})}})),o.a.createElement(cn,null),o.a.createElement(un,null),o.a.createElement(dn,null),o.a.createElement(sn,null),o.a.createElement(on,null))}},{key:"componentDidMount",value:function(){}}]),a}(Re),on=function(e){return o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/conference/main",render:function(e){return o.a.createElement(Sa,null)}}),o.a.createElement(p.a,{exact:!0,path:"/conference",render:function(e){return o.a.createElement(Sa,null)}}),o.a.createElement(p.a,{exact:!0,path:"/conference/room",render:function(e){return o.a.createElement(Ra,null)}}),o.a.createElement(p.a,{exact:!0,path:"/conference/room/:code",render:function(e){return o.a.createElement(Ra,null)}}),o.a.createElement(p.a,{exact:!0,path:"/conference/enterroom",render:function(e){return o.a.createElement(nn,null)}}))},ln=function(e){return o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/login",render:function(e){return o.a.createElement(Pa,null)}}),o.a.createElement(p.a,{exact:!0,path:"/register",render:function(e){return o.a.createElement(ma,null)}}))},sn=function(e){return o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/dashboard",render:function(e){return o.a.createElement(_e,null)}}),o.a.createElement(p.a,{exact:!0,path:"/dashboard/quizhistory",render:function(e){return o.a.createElement(r.Fragment,null)}}))},cn=function(e){return o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/settings",render:function(e){return o.a.createElement(zt,null)}}),o.a.createElement(p.a,{exact:!0,path:"/settings/user-profile",render:function(e){return o.a.createElement(ea,null)}}),o.a.createElement(p.a,{exact:!0,path:"/settings/app-profile",render:function(e){return o.a.createElement(ra,null)}}))},un=function(e){return o.a.createElement(p.c,null)},dn=function(e){return o.a.createElement(p.c,null)},mn=Object(p.f)(Object(he.b)(ge,(function(e){return{}}))(rn)),pn=(a(85),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).isSidebarActive=function(e){var t=n.props.parentMenu;if(null==t)return!1;var a=n.props.location.pathname;return t.url+"/"+e.url==a},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(e){var t=e.srcElement.body.scrollTop;Math.min(0,t/3-60)}},{key:"render",value:function(){var e=this,t=this.props.parentMenu;if(null==t)return null;var a=null==this.props.sidebarMenus?[]:this.props.sidebarMenus,n=this.getLoggedUser();return o.a.createElement("ul",{id:"sidebar",className:"sidebar-nav bg-light"},o.a.createElement(fn,{show:null!=t,brand:t}),a.map((function(a){if(a.userAuthorized&&!a.userAuthorized(n))return null;var r=e.isSidebarActive(a)?"menu-active":"regular-menu";return o.a.createElement("li",{className:"sidebar-item "+r,key:"SIDEBAR_"+a.code},o.a.createElement(je.b,{to:t.url+"/"+a.url},o.a.createElement("span",{className:"sidebar-icon"},o.a.createElement("i",{className:S.getIconClassName(a)})),o.a.createElement("span",{className:"menu-label"},a.name)))})))}}]),a}(Re)),fn=function(e){return 0==e.show?null:o.a.createElement(r.Fragment,null,o.a.createElement("li",{id:"sidebar-brand",className:"sidebar-brand",style:{marginBottom:"20px"}},o.a.createElement("div",{style:{textAlign:"center",paddingTop:"10px",paddingBottom:"10px"}},o.a.createElement("h3",{className:"text-dark"},o.a.createElement("i",{className:S.getIconClassName(e.brand)})),o.a.createElement(je.b,{to:e.brand.url,style:{textDecoration:"none"}},o.a.createElement("h4",{className:"text-dark"},e.brand.name)))),o.a.createElement("li",{className:"sidebar-item-brand "},o.a.createElement(je.b,{to:e.brand.url},o.a.createElement("span",{className:"sidebar-icon"},o.a.createElement("i",{className:S.getIconClassName(e.brand)})))))},hn=Object(p.f)(Object(he.b)(ge,(function(e){return{performLogout:function(t){return e(fe(t))}}}))(pn)),gn=(a(86),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state={showSidebar:!1,activeMenuCode:null,menu:void 0,sidebarMenus:[]},n.currentPathName="",n.setMenuNull=function(){console.warn("SET MENU NULL"),n.setState({menu:void 0,showSidebar:!1,activeMenuCode:null,sidebarMenus:null})},n.setMenu=function(e){null!=e&&(console.debug("SET MENU: ",e.code),n.setState({menu:e,sidebarMenus:null,showSidebar:e.showSidebar,activeMenuCode:e.code}))},n.setSidebarMenus=function(e){n.setState({sidebarMenus:e})},n.setCurrentMenu=function(){var e=function(e){var t=e.split("/"),a=t[0];return""==a.trim()&&(a=t[1]),a}(n.props.location.pathname);if(e!=n.currentPathName){n.currentPathName=e;var t=function(e){var t=O();try{for(var a=0;a<t.length;a++){var n=t[a];if(n.url=="/"+e)return n}return null}catch(r){return null}}(e);null==t?n.setMenuNull():n.setMenu(t)}},n.getSubMenus=function(){var e,t;return n.state.menu&&null!=n.state.menu.subMenus&&(null===(e=n.state.menu.subMenus)||void 0===e?void 0:e.length)>0?null===(t=n.state.menu)||void 0===t?void 0:t.subMenus:n.state.sidebarMenus?n.state.sidebarMenus:null},n.state=Object(f.a)({},n.state),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setCurrentMenu()}},{key:"componentDidUpdate",value:function(){this.setCurrentMenu()}},{key:"render",value:function(){var e=1==this.state.showSidebar;return o.a.createElement(r.Fragment,null,o.a.createElement(Le,{setMenuNull:this.setMenuNull,activeMenuCode:this.state.activeMenuCode,setMenu:this.setMenu}),o.a.createElement("div",{id:e?"app-content":"content",className:"container-fluid",style:{position:"absolute",paddingTop:"55px"}},o.a.createElement(mn,{setSidebarMenus:this.setSidebarMenus})),1==e?o.a.createElement(hn,{sidebarMenus:this.getSubMenus(),parentMenu:this.state.menu}):null)}}]),a}(Re)),vn=Object(p.f)(Object(he.b)(ge,(function(e){return{performLogout:function(t){return e(fe(t))}}}))(gn)),bn=function e(){Object(m.a)(this,e),this.loading=!1,this.loadingPercentage=0,this.requestId=void 0,this.mainAppUpdated=new Date,this.showAlert=!1,this.realtime=!1,this.loadingAppStatus="loading application",this.errorAuthenticatingApp=!1},En=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).wsConnected=!1,n.loadings=0,n.alertTitle="Info",n.alertBody=null,n.alertIsYesOnly=!0,n.alertIsError=!1,n.alertOnYesCallback=function(e){},n.alertOnCancelCallback=function(e){},n.wsUpdateHandler=void 0,n.clientRef=o.a.createRef(),n.userService=void 0,n.wsService=void 0,n.alertCallback={title:"Info",message:"Info",yesOnly:!1,onOk:function(){},onNo:function(){}},n.refresh=function(){n.setState({mainAppUpdated:new Date})},n.requestAppId=function(){n.setState({loadingAppStatus:"loading application",errorAuthenticatingApp:!1}),n.userService.requestApplicationId((function(e){F((function(){n.props.setRequestId(e,Object(c.a)(n)),n.refresh(),n.setState({errorAuthenticatingApp:!1})}),500)}),n.retryRequestAppId)},n.retryRequestAppId=function(){n.setState({loadingAppStatus:"loading application (Retrying)",errorAuthenticatingApp:!1}),n.userService.requestApplicationIdNoAuth((function(e){F((function(){n.props.setRequestId(e,Object(c.a)(n)),n.setState({errorAuthenticatingApp:!1})}),500)}),(function(){return n.setState({errorAuthenticatingApp:!0})}))},n.smoothEndLoading=function(){F((function(){n.setState({loading:!1,loadingPercentage:0})}),100)},n.handleProgress=function(e){var t,a=null!==(t=e.percentage)&&void 0!==t?t:0,r=Math.floor(a);(a<0||a>100)&&n.endLoading(),n.setState({loadingPercentage:r})},n.initWebsocket=function(){n.wsService.setWebSocketUrl(ce()+"realtime-app"),n.wsService.registerWebSocketCallbacks({id:"PROGRESS",subscribeUrl:"/wsResp/progress/"+n.props.requestId,callback:n.handleProgress},{id:"GENERAL_UPDATE",subscribeUrl:"/wsResp/"+n.props.requestId+"/update",callback:function(e){return n.handleWsUpdate(e)}}),n.wsService.performWebsocketConnection(),n.wsConnected=!0},n.handleWsUpdate=function(e){n.wsUpdateHandler&&n.wsUpdateHandler(e)},n.setWsUpdateHandler=function(e){n.wsUpdateHandler=e},n.resetWsUpdateHandler=function(){n.setWsUpdateHandler(void 0)},n.state=new bn,n.userService=n.props.services.userService,n.wsService=n.props.services.websocketService,n.props.setMainApp(Object(c.a)(n)),n}return Object(s.a)(a,[{key:"incrementLoadings",value:function(){this.loadings++}},{key:"decrementLoadings",value:function(){this.loadings--,this.loadings<0&&(this.loadings=0)}},{key:"startLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.incrementLoadings(),this.setState({loading:!0,realtime:e})}},{key:"endLoading",value:function(){this.decrementLoadings(),0==this.loadings&&(this.state.realtime?this.setState({loadingPercentage:100},this.smoothEndLoading):this.setState({loading:!1,loadingPercentage:0}))}},{key:"showAlert",value:function(e,t,a,n,r){this.alertTitle=e,this.alertBody=t,this.alertIsYesOnly=a;var o=this;this.alertOnYesCallback=function(e){o.dismissAlert(),n(e)},a||(this.alertOnCancelCallback=function(e){o.dismissAlert(),null!=r&&r(e)}),this.setState({showAlert:!0})}},{key:"dismissAlert",value:function(){this.alertIsError=!1,this.setState({showAlert:!1})}},{key:"showAlertError",value:function(e,t,a,n,r){this.alertIsError=!0,this.showAlert(e,t,a,n,r)}},{key:"componentDidUpdate",value:function(){this.props.applicationProfile&&function(e){if(e.pageIcon){var t=document.querySelector('link[rel="shortcut icon"]')||document.querySelector('link[rel="icon"]');t||((t=document.createElement("link")).id="favicon",t.setAttribute("rel","shortcut icon"),document.head.appendChild(t)),t.setAttribute("href",ue()+e.pageIcon)}}(this.props.applicationProfile),this.props.requestId&&!this.wsConnected&&this.initWebsocket()}},{key:"componentDidMount",value:function(){this.requestAppId(),this.setState({loadingPercentage:0})}},{key:"render",value:function(){var e=this;return this.props.requestId?o.a.createElement(r.Fragment,null,o.a.createElement(yn,{realtime:this.state.realtime,loading:this.state.loading,loadingPercentage:this.state.loadingPercentage}),this.state.showAlert?o.a.createElement(Se,{title:this.alertTitle,isError:this.alertIsError,onClose:function(t){return e.setState({showAlert:!1})},yesOnly:this.alertIsYesOnly,onYes:this.alertOnYesCallback,onNo:this.alertOnCancelCallback},this.alertBody):null,o.a.createElement(vn,null)):o.a.createElement(Cn,{error:this.state.errorAuthenticatingApp,message:this.state.loadingAppStatus,retry:this.retryRequestAppId})}}]),a}(r.Component);function yn(e){return 1==e.loading?o.a.createElement(be,{realtime:e.realtime,progress:e.loadingPercentage,text:"Please wait...",type:"loading"}):null}var Cn=function(e){return o.a.createElement("div",{className:"text-center"},o.a.createElement("p",null),e.error?o.a.createElement(Pt,null,"Loading Error"):o.a.createElement(Lt,null),o.a.createElement("h4",null,e.message),e.error?o.a.createElement(ot,{iconClassName:"fas fa-redo",onClick:e.retry,children:"Retry"}):null)},Sn=Object(p.f)(Object(he.b)(ge,(function(e){return{setMainApp:function(t){return e({type:"SET_MAIN_APP",payload:t,meta:{type:"SET_MAIN_APP"}})},setRequestId:function(t,a){return e(function(e,t){var a={type:"SET_REQUEST_ID",payload:Object(f.a)({loginStatus:e.loggedIn,referer:t},e),meta:{type:"SET_REQUEST_ID"}};return console.debug("setRequestId: ",a),a}(t,a))}}}))(En)),On=function(e){var t=J();return o.a.createElement(he.a,{store:t},o.a.createElement(je.a,null,o.a.createElement(Sn,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(On,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[47,1,2]]]);
//# sourceMappingURL=main.59915735.chunk.js.map